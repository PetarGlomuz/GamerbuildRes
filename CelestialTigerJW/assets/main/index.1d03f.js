window.__require=function e(t,o,n){function i(r,l){if(!o[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var c="function"==typeof __require&&__require;if(!l&&c)return c(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var p=o[r]={exports:{}};t[r][0].call(p.exports,function(e){return i(t[r][1][e]||e)},p,p.exports,e,t,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({BetControl:[function(e,t,o){"use strict";cc._RF.push(t,"a31f1u1alJCDL3PRkYKq14h","BetControl");var n,i,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var l=e("./Common_Base"),s=e("./EventCenter"),c=e("../init"),p=e("../Common/NetTrans"),u=cc._decorator,h=u.ccclass,d=(u.property,(i={})[110038]=!0,i[110045]=!0,i[110042]=!0,i[111059]=!0,i[111063]=!0,i[110060]=!0,i),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.themeControl=null,t.themeid=0,t.bet=0,t._lastBet=0,t._lastBetBase=0,t}var o;return a(t,e),o=t,t.prototype.init=function(e){this.themeControl=e,this.themeControl.betControl=this,this.themeid=this.themeControl.getThemeId(),c.IN_QUEST_STAY_THEME_FLAG?this.bet=QUEST_STAY_BET_CONFIG_DATA[1]:c.IN_QUEST_NEW_USER_THEME_FLAG?this.bet=QUEST_NEW_USER_BET_CONFIG_DATA[1]:c.IN_HERO_WISH_GAME_THEME?this.bet=o.getMinLargeBet():c.IN_FLAME_THEME_FLAG&&(this.bet=window.LEVEL_BET_DATA.final_bet||o.getEntryBets()[2]||o.getMinLargeBet()),this.checkBetValidity(),this.betChanged()},t.prototype.changeToUpBet=function(){if(110038==this.themeControl.getThemeId())s.default.pushEvent(l.EVT.EVT_CHANGE_BET_110038);else{var e=o.getNextBet(this.bet);e&&(this.bet=e,this.betChanged(!0),e==o.getMaxBet()&&this.themeControl.footer.createMaxBetTip())}},t.prototype.changeToDownBet=function(){if(110038==this.themeControl.getThemeId())s.default.pushEvent(l.EVT.EVT_CHANGE_BET_110038);else{var e=o.getPrevBet(this.bet);e&&(this.bet=e,this.betChanged(!0),e==o.getMaxBet()&&this.themeControl.footer.createMaxBetTip())}},t.prototype.changeToBet=function(e){return!!o._getIdxByBet(e)&&(this.bet=e,this.betChanged(!0),o.getMinLargeBet()==e&&p.NetTrans.sendGamePacket("behavior",{page:"change_to_unlock_bet"}),!0)},t.prototype.changeToTotalBet=function(e){var t=e/this.getCurBetBase();return this.changeToBet(t)},t.prototype.setMaxBet=function(){110038==this.themeControl.getThemeId()?s.default.pushEvent(l.EVT.EVT_CHANGE_BET_110038):this.checkIsMaxBet(!0)},t.prototype.setMinBet=function(){this.checkIsMinBet(!0)},t.prototype.checkIsMaxBet=function(e){return void 0===e&&(e=void 0),e&&(this.bet=o.getMaxBet(),this.betChanged(!0)),this.bet==o.getMaxBet()},t.prototype.checkIsMinBet=function(e){return void 0===e&&(e=null),e&&(this.bet=o.getMinBet(),this.betChanged(!0)),this.bet==o.getMinBet()},t.prototype.betChanged=function(e){void 0===e&&(e=void 0),this._lastBet&&this._lastBet==this.bet&&this._lastBetBase==this.getCurBetBase()||(this._lastBet=this.bet,this._lastBetBase=this.getCurBetBase(),e&&this.setCurBetSound(),this.themeControl.betChanged())},t.prototype.setCurBetSound=function(){this.checkIsMaxBet()&&this.themeControl.playBetSound(-1);var e=Math.min(42,o._getIdxByBet(this.bet));this.themeControl.playBetSound(e-1)},t.prototype.getCurBet=function(){return this.bet},t.prototype.getCurBetBase=function(){return o.getBetBase(this.themeControl.getThemeId(),this.getCurBet())},t.prototype.getCurFakeBetBase=function(){return o.getFakeBetBase(this.themeControl.getThemeId(),this.getCurBet())},t.prototype.getCurTotalBet=function(){return this.getCurBetBase()*this.getCurBet()},t.prototype.checkBetValidity=function(){var e=this._lastBetBase&&this.bet*this._lastBetBase/this.getCurBetBase()||this.bet;if(!o.canBet(e)){for(var t,n,i=o.getBetList(),a=1;a<=i.length;a++)if(i[a-1]<e?t=i[a-1]:i[a-1]>=e&&(n=i[a-1]),n)return this.bet=n,void this.betChanged();if(t)return this.bet=t,void this.betChanged();console.error("No avaliable bet ???")}},t.canBet=function(e){return null!=o._getIdxByBet(e)},t.getBetList=function(){return c.IN_QUEST_STAY_THEME_FLAG?QUEST_STAY_BET_CONFIG_DATA&&QUEST_STAY_BET_CONFIG_DATA[0]:c.IN_QUEST_NEW_USER_THEME_FLAG?QUEST_NEW_USER_BET_CONFIG_DATA&&QUEST_NEW_USER_BET_CONFIG_DATA[0]:c.CLUB_FLAG?window.LEVEL_BET_DATA.club:window.LEVEL_BET_DATA.common},t.getMaxBet=function(){var e=o.getBetList();return e[e.length-1]},t.getMinBet=function(){return o.getBetList()[0]},t.getBetBase=function(e,t){var n=window.THEME_BASE_BET_DATA[e];if(n)return d[e]?t>=window.GLOBAL_LEVEL_BET.five_bet_list_1[4]?n[n.length-1]:t>=window.GLOBAL_LEVEL_BET.five_bet_list_1[3]?n.length-1>0&&n[n.length-1-1]||n[0]:t>=window.GLOBAL_LEVEL_BET.five_bet_list_1[2]?n.length-2>0&&n[n.length-2-1]||n[0]:t>=window.GLOBAL_LEVEL_BET.five_bet_list_1[1]&&n.length-3>0&&n[n.length-3-1]||n[0]:5==n.length?t>=window.GLOBAL_LEVEL_BET.five_bet_list[4]?n[4]:t>=window.GLOBAL_LEVEL_BET.five_bet_list[3]?n[3]:t>=window.GLOBAL_LEVEL_BET.five_bet_list[2]?n[2]:t>=window.GLOBAL_LEVEL_BET.five_bet_list[1]?n[1]:n[0]:4==n.length?t>=window.GLOBAL_LEVEL_BET.five_bet_list[4]?n[3]:t>=window.GLOBAL_LEVEL_BET.five_bet_list[3]?n[2]:t>=window.GLOBAL_LEVEL_BET.five_bet_list[2]?n[1]:n[0]:t<o.getMinLargeBet()?n[0]:n[1]},t.getFakeBetBase=function(e,t){var n=c.FAKE_THEME_BASE_BET_DATA[e];return t<o.getMinLargeBet()?n[0]:n[1]},t.getTotalBet=function(e,t){return o.getBetBase(e,t)*t},t.getMinLargeBet=function(){return!c.CLUB_FLAG||c.IN_QUEST_STAY_THEME_FLAG||c.IN_QUEST_NEW_USER_THEME_FLAG?window.LEVEL_BET_DATA.open_map:window.LEVEL_BET_DATA.club_open_map},t.canLargeBet=function(){return o.getMaxBet()>=o.getMinLargeBet()},t.getMinClubPointTotalBet=function(){return window.LEVEL_BET_DATA.club_bet},t.getNextBet=function(e){var t=o.getBetList(),n=o._getIdxByBet(e);return n&&n<t.length?t[n+1-1]:n&&n==t.length?t[0]:null},t.getPrevBet=function(e){var t=o.getBetList(),n=o._getIdxByBet(e);return n&&n>1?t[n-1-1]:n&&1==n?t[t.length-1]:null},t._getIdxByBet=function(e){for(var t=o.getBetList(),n=1;n<=t.length;n++)if(e==t[n-1])return n;return null},t.getEntryBets=function(){return!c.CLUB_FLAG||c.IN_QUEST_STAY_THEME_FLAG||c.IN_QUEST_NEW_USER_THEME_FLAG?window.LEVEL_BET_DATA.common_in:window.LEVEL_BET_DATA.club_in},t.getClubEntryBets=function(){return!c.CLUB_FLAG||c.IN_QUEST_STAY_THEME_FLAG||c.IN_QUEST_NEW_USER_THEME_FLAG?window.LEVEL_BET_DATA.common_in:window.LEVEL_BET_DATA.club_in},t.getNormalEntryBets=function(){return window.LEVEL_BET_DATA.common_in},t.getUnlockUserLevel=function(e){return c.CLUB_FLAG?c.THEME_CONFIG_LIST[e].UNLOCK_LEVEL_CLUB||1:c.THEME_CONFIG_LIST[e].UNLOCK_LEVEL_NORMAL||1},t.getUnlockTheme=function(e){if(THEME_UNLOCK_DATA&&"object"==typeof THEME_UNLOCK_DATA)return THEME_UNLOCK_DATA[e-1]},o=r([h],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../Common/NetTrans":"NetTrans","../init":"init","./Common_Base":"Common_Base","./EventCenter":"EventCenter"}],ClippingNode:[function(e,t,o){"use strict";cc._RF.push(t,"13007ae6rNCpqSE+Vs8hlvd","ClippingNode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/Tools"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stencil=null,t}return i(t,e),t.prototype.AddStencil=function(e,t,o,n,i,a,r){void 0===o&&(o=void 0),void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=void 0),void 0===r&&(r=void 0),this.stencil=new cc.Node("stencil"),this.stencil.addComponent(cc.Mask),this.stencil.width=e,this.stencil.height=t,null!=n&&(this.stencil.anchorX=n),null!=i&&(this.stencil.anchorY=i),o&&(this.stencil.position=o),a&&(this.stencil.getComponent(cc.Mask).type=a),r&&(this.stencil.getComponent(cc.Mask).segements=r),this.addChild(this.stencil)},t.prototype.MoveStencil=function(e,t){void 0===t&&(t=0);var o=this.stencil.children,n=cc.v3(-e.x,e.y);o.forEach(function(e){t>0?cc.tween(e).to(t,{position:cc.v3(n)}).start():e.position=n}),t>0?cc.tween(this.stencil).to(t,{position:cc.v3(e)}).start():this.stencil.position=e},t.prototype.AddChild=function(e,t){this.addChild(e),r.changeFather(e,this.stencil,t)},t.prototype.SetImageMaskSpriteFrame=function(e){this.stencil.getComponent(cc.Mask).inverted=!1,this.stencil.getComponent(cc.Mask).alphaThreshold=.1,this.stencil.getComponent(cc.Mask).spriteFrame=e},a([s],t)}(cc.Node));o.default=c,cc._RF.pop()},{"../Base/Tools":"Tools"}],Common_Base:[function(e,t,o){"use strict";cc._RF.push(t,"cafc5LKcVdBE5+pybzTVX1n","Common_Base"),Object.defineProperty(o,"__esModule",{value:!0}),o.PriorityQueue=o.POPUP_STACK=o.angle2radian=o.radian2angle=o.LocalLang=o.THEME_JP_CMD=o.BATCH_SPIN=o.EVT=o.EVENTNAMES=o.EVENTS=o.THEME_BASE_TYPE=o.THEME_BG_TYPE=o.THEME_FG_TYPE=o.translateAnimation=o.translateImage=o.setLabelWidthHeight=o.POPOVER_PRIORITY=o.SCREEN_ORIENTATION=o.LOGLEVEL=void 0,o.LOGLEVEL={DEBUG:0,INFO:1,WARNING:2,ERROR:3};var n={},i={},a=null,r=function(){function e(){}return e.addCallFunc=function(t,o,n,i){e._addFunc(t,o,n,i,e.CallFuncType.Once)},e.addScheduleFunc=function(t,o,n,i){e._addFunc(t,o,n,i,e.CallFuncType.RepeatForever)},e.addScheduleUntilFunc=function(t,o,n,i){e._addFunc(t,o,n,i,e.CallFuncType.RepeatUntil)},e.hasFunction=function(e,t){if(null==n[e])return null;for(var o in n[e].pairs)if(n[e].pairs[o].func===t)return o;return null},e._addFunc=function(t,o,r,l,s){var c="object"==typeof l?l.TimerCallGroupID:l;if(null!=c&&null!=c&&"string"==typeof c||console.error("_addFunc",l),l)if(t){if(n[c]=n[c]||{state:-1,pairs:[]},null==e.hasFunction(c,t)){var p=function(t,o){if(n[t])if(-2==n[t].state);else{var r=n[t].pairs[o];if(null==r||null==r)return;var s=r.func,c=r.target;if(e.CallFuncType.Once==r.loopType)e.unscheduleFunc(s,l),s.bind(c).call();else if(e.CallFuncType.RepeatForever==r.loopType)s.bind(c).call(),cc.Tween.stopAllByTag(o),cc.tween(a).tag(o).then(i[o]).start();else if(e.CallFuncType.RepeatUntil==r.loopType){if(s.bind(c).call())return void e.unscheduleFunc(s,l);cc.Tween.stopAllByTag(o),cc.tween(a).tag(o).then(i[o]).start()}}},u=0;do{u=Date.now()}while(Object.keys(i).includes(u.toString()));null==a&&(a=cc.director.getScene().getChildByName("Canvas").getChildByName("TimerCallFuncNode")),i[u]=cc.tween().delay(o).call(function(){p(c,u)}),cc.tween(a).tag(u).then(i[u]).start(),n[c].pairs[u]={tag:u,func:t,loopType:s,target:r}}}else console.error("_addFunc","func is null");else console.error("_addFunc","group is null")},e.pauseThemeTimer=function(e){var t="object"==typeof e?e.TimerCallGroupID:e;null!=t&&null!=t&&"string"==typeof t||console.error("pauseThemeTimer",e),n[t]&&(n[t].state=-2)},e.resumeThemeTimer=function(e){var t="object"==typeof e?e.TimerCallGroupID:e;null!=t&&null!=t&&"string"==typeof t||console.error("resumeThemeTimer",e),n[t]&&(n[t].state=-1)},e.clearGroup=function(e){var t="object"==typeof e?e.TimerCallGroupID:e;null!=t&&null!=t&&"string"==typeof t||console.error("clearGroup",e),n[t]&&(n[t].pairs.forEach(function(e,t){cc.Tween.stopAllByTag(t),delete i[t]}),delete n[t])},e.unscheduleFunc=function(t,o){var a="object"==typeof o?o.TimerCallGroupID:o;null!=a&&null!=a&&"string"==typeof a||console.error("unscheduleFunc",o);var r=e.hasFunction(a,t),l=null==r?null:Number(r);null!=l&&(cc.Tween.stopAllByTag(l),delete n[a].pairs[l],delete i[l])},e.CallFuncType={Once:0,RepeatForever:1,RepeatUntil:2},e}();o.default=r,o.SCREEN_ORIENTATION={HORIZONTAL:1,VERTICAL:2},o.POPOVER_PRIORITY={BIG_AWARD_PUSH:0,PAY_TABLE_INFO:0,FEATURE_PUSH:0,TIMED_COINS:0,FRIEND_ONLINE:0,FRIEND_MESSAGE:0,ACHIEVEMENT_FINISH:0,LEVEL_UP:0,BIG_WIN_SHOW:0,COIN_MASTER:0,WORLD_CUP_ACTIVITY:0,PERSONAL_INFO:0,COIN_SHOP:0,SETTING_TABLE:0,HUTCH_DIALOG:0,WILD_BASKET:0,VIP_DIALOGS:0,SALE_DIALOG:0,FEEDBACK_DIALOG:0,COOKING_WILD_POPUP:0,BET_CHOICE:0,BUY_AWARD:0,CONNECT_LOST_REFUND:0,MONTHLY_AWRAD_RUN_OUT:0,MONTHLY_AWARD_GOT:0,BIND_REWARD:0,DAILY_BONUS:0,WILD_CARD:0,COMMON_LOADING:1e7,FORCE_UPDATE:1e8,OFFLINE_NOTICE:1e9,SHIELD_LAYER:1e10},o.setLabelWidthHeight=function(e,t,o){void 0===o&&(o=void 0),(t||o)&&(e.overflow=cc.Label.Overflow.SHRINK,!t||o?!o||t?(e.node.width=t,e.node.height=o||t,e.node.scaleX=1,e.node.scaleY=1):e.node.height=o:e.node.width=t)},o.translateImage=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),function(e,t,o){return"lang_"+o+"/"+e+"_"+o}(e,0,o.LocalLang)},o.translateAnimation=function(e,t){return void 0===t&&(t=null),e+"_"+o.LocalLang},o.THEME_FG_TYPE={NORMAL:0,CHOICE:1,STEP:2},o.THEME_BG_TYPE={NORMAL:0,CHOICE:1,STEP:2},o.THEME_BASE_TYPE={OLD:0,NEW:1},o.EVENTS={NTF_STORE_VIDEO_OVER:"NTF_STORE_VIDEO_OVER",NTF_CHECK_NEXT_VIDEO:"NTF_CHECK_NEXT_VIDEO",NTF_START_DOWNLOAD:"NTF_START_DOWNLOAD",NTF_DOWNLOAD_ERROR:"NTF_DOWNLOAD_ERROR",NTF_DOWNLOAD_PROGRESS:"NTF_DOWNLOAD_PROGRESS",NTF_DOWNLOAD_SUCCESS:"NTF_DOWNLOAD_SUCCESS",NTF_UPDATE_VIP_TICKETS:"NTF_UPDATE_VIP_TICKETS",NTF_UPDATE_VIP_PONTS:"NTF_UPDATE_VIP_PONTS",EVT_REFRESH_HEAD_VIP:"EVT_REFRESH_HEAD_VIP",NTF_UPDATE_GIFT_VIEW:"NTF_UPDATE_GIFT_VIEW",NTF_UPDATE_GIFT_INVITE_VIEW:"NTF_UPDATE_GIFT_INVITE_VIEW",NTF_UPDATE_ALL_GIFT_VIEW:"NTF_UPDATE_ALL_GIFT_VIEW",NTF_RELOAD_FRIENDS:"NTF_RELOAD_FRIENDS",NTF_RELOAD_INVITE_FRIENDS:"NTF_RELOAD_INVITE_FRIENDS",NTF_REFRESH_GIFT_COLLECT_ALL_BTN:"NTF_REFRESH_GIFT_COLLECT_ALL_BTN",EVT_MODULE_READY:{ADVERTISE:"EVT_MODULE_READY_ADVERTISE"},EVT_CHANGE_TOTAL_BET:"EVT_CHANGE_TOTAL_BET",EVT_FACEBOOK_FIRST_LOGIN_COIN:"EVT_FACEBOOK_FIRST_LOGIN_COIN",EVT_INVITE_INVITED:"EVT_INVITE_INVITED",EVT_INVITE_COLLECTED:"EVT_INVITE_COLLECTED",EVT_INVITE_DELETED:"EVT_INVITE_DELETED",EVT_INVITE_COLLECTED_FAILED:"EVT_INVITE_COLLECTED_FAILED",ACT:{EMAIL_INVALID_INPUT:"EVT_EMAIL_INVALID_INPUT",BONUS_2020_RECEIVE_DATA:"BONUS_2020_RECEIVE_DATA",BONUS_2020_NETWORK_RECOVER:"BONUS_2020_NETWORK_RECOVER",TW_VOUCHER_CHANGE_UI:"TW_VOUCHER_CHANGE_UI",SHOW_CRAZY_DRAW_NEW_TICKET:"SHOW_CRAZY_DRAW_NEW_TICKET",SHOW_P3330_X:"SHOW_P3330_X",QUEST_NEW_USER_EXTINGUISH:"QUEST_NEW_USER_EXTINGUISH"},SYSTEM:{ADD_EXP:"EVT_ADD_EXP",GAIN_EXP:"EVT_GAIN_EXP",GAIN_EXP_BLOCK:"EVT_GAIN_EXP_BLOCK",ENTER_LOBBY:"EVT_ENTER_LOBBY",RETURN_LOBBY_FROM_THEME:"EVT_RETURN_LOBBY_FROM_THEME",ENTER_THEME:"EVT_ENTER_THEME",RECEIVE_ENTER_THEME_DATA:"EVT_RECEIVE_ENTER_THEME_DATA",ENTER_STORE:"EVT_ENTER_STORE",LEAVE_STORE:"EVT_LEAVE_STORE",ENTER_FEEDBACK:"EVT_ENTER_FEEDBACK",LEAVE_FEEDBACK:"EVT_LEAVE_FEEDBACK",ENTER_LvB_MAIN_DIALOG:"EVT_ENTER_LvB_MAIN_DIALOG",LEAVE_LvB_MAIN_DIALOG:"EVT_LEAVE_LvB_MAIN_DIALOG",ENTER_CM_MAIN_DIALOG:"EVT_ENTER_CM_MAIN_DIALOG",LEAVE_CM_MAIN_DIALOG:"EVT_LEAVE_CM_MAIN_DIALOG",ON_NETWORK_LOST:"EVT_ON_NETWORK_LOST",AFTER_THEME_RECONNECT:"EVT_AFTER_THEME_RECONNECT",NEW_USER_MASK_SHOW:"EVT_NEW_USER_MASK_SHOW",NEW_USER_MASK_HIDE:"EVT_NEW_USER_MASK_HIDE",NEW_USER_GUIDE_HIDE:"EVT_NEW_USER_GUIDE_HIDE",MAX_BET_EXCEED_MIN_LARGE:"EVT_MAX_BET_EXCEED_MIN_LARGE",UPDATE_TROPHY_NUM:"EVT_UPDATE_TROPHY_NUM",UPDATE_MEDAL_NUM:"EVT_UPDATE_BADGE_NUM",TROPHY_TO_MEDAL:"EVT_TROPHY_TO_MEDAL",UPDATE_ALIEN_SPIN_NUM:"EVT_UPDATE_ALIEN_SPIN_NUM",UPDATE_ALIEN_DUN_NUM:"EVT_UPDATE_ALIEN_DUN_NUM",UPDATE_ALIEN_PRC_NUM:"UPDATE_ALIEN_PRC_NUM",BET_CHANGE:"EVT_BET_CHANGE",RAFFLE_CLICK:"RAFFLE_CLICK",UPDATE_RAFFLE:"UPDATE_RAFFLE",START_LOBBY_JP_ROLL:"START_LOBBY_JP_ROLL",FLUSH_LOBBY_JP_ICON:"FLUSH_LOBBY_JP_ICON",CHANGE_LANG:"CHANGE_LANG",LEVEL_ROAD:"LEVEL_ROAD",LEFT_MEDAL_SPIN_TIMES:"EVT_SYSTEM_LEFT_MEDAL_SPIN_TIMES",USER_GUIDE_HELPER:"EVT_SYSTEM_USER_GUIDE_HELPER",RECEIVE_WILD_CARD_DATA:"EVT_RECEIVE_WILD_CARD_DATA"},NEW_USER:{MISSION_BOARD_UPDATE:"EVT_NEW_USER_MISSION_BOARD_UPDATE",UPDATE_LOGIN_REWARD:"EVT_NEW_USER_UPDATE_LOGIN_REWARD"},INBOX:{NEW_USER_REWARD:"EVT_INBOX_NEW_USER_REWARD"},USER_INFO:{SET_USER_NAME_END:"EVT_USER_INFO_SET_USER_NAME_END",SET_USER_AVATAR_END:"EVT_USER_INFO_SET_USER_AVATAR_END"},COME_BACK_V2:{GET_DAILY_REWARD_END:"EVT_COME_BACK_GET_DAILY_REWARD_END",SHOW_FIRST_REWARDS_LAYER:"EVT_COME_BACK_SHOW_FIRST_REWARDS_LAYER",UPDATE_RECALL_DATA:"EVT_COME_BACK_UPDATE_RECALL_DATA"},FRIEND:{SEND_STAMP:"EVT_SEND_STAMP"},THEME_INTER_LOBBY:{MOVE:"EVT_THEME_INTER_LOBBY_MOVE",PICKING_CHAR:"EVT_THEME_INTER_LOBBY_PICK",CHANGE_CHAR:"EVT_THEME_INTER_LOBBY_CHANGE_CHAR",CHOOSE_SLOT:"EVT_THEME_INTER_LOBBY_CHOOSE_SLOT",ENABLE_SHIELD:"EVT_THEME_INTER_LOBBY_ENABLE_SHIELD",DISABLE_SHIELD:"EVT_THEME_INTER_LOBBY_DISABLE_SHIELD",ENTER_THEME:"EVT_THEME_INTER_LOBBY_ENTER_THEME",CHANGE_ROOM:"EVT_THEME_INTER_LOBBY_CHANGE_ROOM",ALARM_ROOM:"EVT_THEME_INTER_LOBBY_ALARM_ROOM",LEAVE_TABLE:"EVT_THEME_INTER_LOBBY_LEAVE_TABLE",SHOW_SPIN:"EVT_THEME_INTER_LOBBY_SHOW_SPIN",FINISH_LOBBY_MG:"EVT_THEME_INTER_LOBBY_FINISH_LOBBY_MG",KICK_OUT:"EVT_THEME_INTER_LOBBY_KICK_OUT",BIG_WIN:"EVT_THEME_INTER_LOBBY_BIG_WIN",EXPRESSION:"EVT_THEME_INTER_LOBBY_EXPRESSION",BOOSTER:"EVT_THEME_INTER_LOBBY_BOOSTER",CAPTURE_REWARD:"EVT_THEME_INTER_LOBBY_CAPTURE_REWARD",GET_REWARD:"EVT_THEME_INTER_LOBBY_GET_REWARD",ENTER_TOGETHER_GAME:"EVT_THEME_ENTER_TOGETHER_GAME"},THEME:{MIMIC_SPIN:"EVT_THEME_MIMIC_SPIN",FRESH_THEME_ENTRY_ICON:"FRESH_THEME_ENTRY_ICON",SN_P3180:"EVT_THEME_SN_P3180",SN_P3181_RANK:"EVT_THEME_SN_P3181_RANK",SN_ACT_HIDE:"SN_ACT_HIDE",SN_P3181_BUY:"EVT_THEME_SN_P3181_BUY",SN_SHOW_P3181:"EVT_THEME_SN_SHOW_P3181",SN_SHOW_P3713:"EVT_THEME_SN_SHOW_P3713",SEND_BATCH_SPIN:"EVT_SEND_BATCH_SPIN",BATCH_SPIN:"EVT_THEME_BATCH_SPIN",AFTER_NG_PERFORM_OVER:"EVT_THEME_AFTER_NG_PERFORM_OVER",GF_STATE_CHANGE:"EVT_GF_STATE_CHANGE",BTN_SPIN_STATE:"EVT_THEME_BTN_SPIN_STATE",ON_CAN_STOP:"EVT_ON_CAN_STOP",SPIN_STROKE:"EVT_SPIN_STROKE"},THEME_110068:{SLOT_CHOOSE_WIZARD_110068:"slot_choose_wizard_110068",SLOT_MAP_GAME_110068:"slot_map_game_110068",GET_GAME_COIN:"get_game_coin",OUT_FG:"out_fg"},CLUB:{CLUB_CASH_BACK_UPDATE:"CLUB_CASH_BACK_UPDATE"},STAMP:{COLLECT_REPLAY_REWARD:"EVT_COLLECT_REPLAY_REWARD"},STORE:{SHOW_BENEFITS:"EVT_STORE_SHOW_BENEFITS",HIDE_INFO:"EVT_HIDE_INFO",GOTO_SPECIAL_PAGE:"EVT_GOTO_SPECIAL_PAGE",COLLECT_TIMED_COIN:"EVT_COLLECT_TIMED_COIN",MOVE_SCROLL_VIEW:"EVT_MOVE_SCROLL_VIEW"},DAILY_MISSION:{FOOTER_ICON_COLLECT:"EVT_FOOTER_ICON_COLLECT",FOOTER_NEXT_MISSION:"EVT_FOOTER_NEXT_MISSION"},MISSION_BADGE:{FRESH_MISSION_PASS_BOOSTER:"EVT_FRESH_MISSION_PASS_BOOSTER"},GLOBAL:{PAUSE:"EVT_PAUSE",CHECK_RESOURCES:"EVT_CHECK_RESOURCES"},EVT_ENTER_BACKGROUND:"EVT_ENTER_BACKGROUND",EVT_ENTER_FOREGROUND:"EVT_ENTER_FOREGROUND",EVT_SPIN_UPDATE_FIVE_BET:"EVT_SPIN_UPDATE_FIVE_BET",EVT_CHOOSE_ROOM_HEAD_CHANGE_110038:"EVT_CHOOSE_ROOM_HEAD_CHANGE_110038",EVT_CHOOSE_ROOM_NAME_CHANGE_110038:"EVT_CHOOSE_ROOM_NAME_CHANGE_110038",EVT_CHOOSE_ROOM_HEAD_CLOSE_110038:"EVT_CHOOSE_ROOM_HEAD_CLOSE_110038",EVT_CHANGE_BET_110038:"EVT_CHANGE_BET_110038",EVT_CHANGE_BET_TROPHY_110038:"EVT_CHANGE_BET_TROPHY_110038",EVT_SET_RETURN_LOBBY_BLACK:"EVT_SET_RETURN_LOBBY_BLACK",EVT_SET_RETURN_LOBBY_LIGHT:"EVT_SET_RETURN_LOBBY_LIGHT",EVT_SAMURAI_NINJA_CHOOSE_TEAM:"EVT_SAMURAI_NINJA_CHOOSE_TEAM",EVT_SAMURAI_NINJA_ENTOUCH:"EVT_SAMURAI_NINJA_ENTOUCH",JW_LOOT:{JW_LOOT_CHECK_SYMBOL:"JW_LOOT_CHECK_SYMBOL",JW_LOOT_CHANGE_LIST_INDEX:"JW_LOOT_CHANGE_LIST_INDEX",JW_LOOT_CHANGE_SYMBOL:"JW_LOOT_CHANGE_SYMBOL",JW_LOOT_REEL_SYMBOL_DOWN:"JW_LOOT_REEL_SYMBOL_DOWN"},B_ACT:{CHECK_RANK:"EVT_CHECK_RANK",CHECK_RANK_REWARD_LIST:"EVT_CHECK_RANK_REWARD_LIST",CHECK_RANK_REWARD_CHOICE_LIST:"CHECK_RANK_REWARD_CHOICE_LIST",GET_RANK_REWARD_CHOICE_LIST:"GET_RANK_REWARD_CHOICE_LIST",OPENED_BEGINNER_TR2_SALE:"EVT_B_ACT_OPENED_BEGINNER_TR2_SALE"},THEME_SHOP:{THEME_SHOP_CLICK:"THEME_SHOP_CLICK",UPDATE_THEME_SHOP:"UPDATE_THEME_SHOP"}},o.EVENTNAMES=o.EVENTS,o.EVT=o.EVENTNAMES,o.BATCH_SPIN="batch_spin",o.THEME_JP_CMD="theme_jp_cmd",o.LocalLang="EN",o.radian2angle=function(e){return 180*e/Math.PI},o.angle2radian=function(e){return e*(Math.PI/180)};var l={};o.POPUP_STACK={getStackSize:function(e){return null==e?void 0:(l[e]=l[e]||0,l[e])},pushStack:function(e){if(null!=e)if("object"==typeof e)for(var t in e){var n=e[t];o.POPUP_STACK.pushStack(n)}else l[n=e]=l[n]||0,l[n]=l[n]+1},popStack:function(e){if(null!=e)if("object"==typeof e)for(var t in e){var n=e[t];o.POPUP_STACK.popStack(n)}else l[n=e]=l[n]||0,l[n]=Math.max(0,l[n]-1)},clearStack:function(e){if(null!=e)if("object"==typeof e)for(var t in e){var n=e[t];o.POPUP_STACK.clearStack(n)}else l[n=e]=0}};var s=function(){function e(){this.data={heap:[],values:[]}}return e.prototype.push=function(e,t){null!=t?(this.data.heap.push(e),this.data.values.push(t)):console.error("cannot push null")},e.prototype.pop=function(){if(this.data.values,0!=this.data.heap.length)return[this.data.heap.pop(),this.data.values.pop()];console.error("cannot pop from empty heap")},e.prototype.isEmpty=function(){return null==this.data.heap[0]},e.prototype.reset=function(){this.data.heap=[],this.data.values=[]},e}();o.PriorityQueue=s,cc._RF.pop()},{}],Common:[function(e,t,o){"use strict";cc._RF.push(t,"e18ba10NsBB2I64cwNSiW7C","Common");var n=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.num_with_commas=o.stringify=o.comma_value_smart_version2=o.addComma2DigitsWithZero=o.addComma2Digits=o.addComma=o.Common=void 0;var i=cc._decorator,a=i.ccclass,r=(i.property,function(){function e(){}var t;return t=e,e.shuffle=function(e){for(var t,o,n=e.length;0!==n;)o=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[o],e[o]=t;return e},e.findRandom=function(e,t){return Math.floor(Math.random()*(t-e))+e},e.getBetIndex=function(e){e=Math.floor(1e4*e+.005);for(var o=0;o<t.baseBet.length;o++)if(e==Math.floor(1e4*t.baseBet[o]))return o;return 0},e.randomNumber=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.CURRENT_GAME_NAME="CelestialTiger",e.CURRENT_GAME_LANGUAGE="En",e.NUMBER_OF_ROW=4,e.NUMBER_OF_COLUMN=6,e.FREESPIN_TRIGGER_COUNT=5,e.REEL_SPEED=60,e.REEL_SPEED_UP=60,e.REEL_SYMBOLS_COUNT=14,e.BETLINE_COUNT=80,e.XDIFF=160,e.REEL_CONTENT_HEIGHT=507,e.ELEMENT_WIDTH=156,e.ELEMENT_HEIGHT=120,e.REALMONEY_ODD=1,e.eleIndex=[0,1,2,3,4,5,6,7,8,9,10,11,12,13],e.addCoinTime=2,e.firstStopTime=1,e.stopTime=.2,e.speedUpTime=1.5,e.singleStopTime=2,e.elapse=0,e.scatterSymbol1=11,e.scatterSymbol2=12,e.moneySymbol=13,e.wildSymbol=0,e.baseBet=[180,360,600,1200,1800,2400,3e3,3600,6e3,7200,9e3,12e3,15e3,3e4,45e3,6e4,9e4,12e4,15e4,18e4,3e5,45e4,6e5],e.baseCoin=[10],e.changePic=!0,e.lineCount=80,e.speed=60,e.eStatus={Idle:0,Running:1,Win:2,Wait:3,FreeSpin:4,Respin:5,Prize:6},e.CustomEvent={EventStartRoll:"EventStartRoll",EventStartAll:"EventStartAll",EventStopRoll:"EventStopRoll",EventStopAutoResult:"EventStopAutoResult",EventStopFreeResult:"EventStopFreeResult",EventStopRespinResult:"EventStopRespinResult",EventExit:"EventExit"},e.BigWinOdd=[5,10,20,40,100],e.addCoinTimeFree=2,e.nomalWinDelayTime=2.5,e.addCoinDiffMin=.01,e.addCoinDiffMax=1e3,e.winLinePos=[[0,0,0,0,0,0],[1,1,1,1,1,1],[2,2,2,2,2,2],[3,3,3,3,3,3],[3,2,1,1,2,3],[0,1,2,2,1,0],[1,2,3,3,2,1],[2,1,0,0,1,2],[0,1,0,0,1,0],[3,2,3,3,2,3],[1,0,1,1,0,1],[2,3,2,2,3,2],[1,2,1,1,2,1],[2,1,2,2,1,2],[0,0,1,1,0,0],[3,3,2,2,3,3],[1,1,2,2,1,1],[2,2,1,1,2,2],[2,2,3,3,2,2],[1,1,0,0,1,1],[1,2,2,2,2,1],[2,1,1,1,1,2],[1,0,0,0,0,1],[2,3,3,3,3,2],[3,2,2,2,2,3],[0,1,1,1,1,0],[2,0,0,0,0,2],[1,3,3,3,3,1],[3,1,1,1,1,3],[0,2,2,2,2,0],[2,2,0,0,2,2],[1,1,3,3,1,1],[0,0,2,2,0,0],[3,3,1,1,3,3],[3,3,0,0,3,3],[0,0,3,3,0,0],[3,2,1,0,0,0],[0,1,2,3,3,3],[0,0,0,1,2,3],[3,3,3,2,1,0],[2,1,0,0,0,0],[1,2,3,3,3,3],[0,0,0,0,1,2],[3,3,3,3,2,1],[3,2,1,1,1,1],[0,1,2,2,2,2],[1,1,1,1,2,3],[2,2,2,2,1,0],[1,3,0,0,3,1],[2,0,3,3,0,2],[0,3,0,0,3,0],[3,0,3,3,0,3],[0,1,0,1,0,1],[3,2,3,2,3,2],[1,2,1,2,1,2],[2,1,2,1,2,1],[2,3,2,3,2,3],[1,0,1,0,1,0],[0,2,0,2,0,2],[3,1,3,1,3,1],[1,3,1,3,1,3],[2,0,2,0,2,0],[0,3,0,3,0,3],[3,0,3,0,3,0],[0,1,2,3,2,1],[3,2,1,0,1,2],[1,2,3,2,1,0],[2,1,0,1,2,3],[0,1,0,1,2,3],[3,2,3,2,1,0],[1,2,1,0,1,2],[2,1,2,3,2,1],[0,3,3,3,3,0],[3,0,0,0,0,3],[1,0,1,2,1,0],[2,3,2,1,2,3],[0,2,3,3,2,0],[3,1,0,0,1,3],[1,3,0,3,0,2],[2,0,3,0,3,2]],e.s_sound={AllButton:0,InfoOpen:1,InfoClose:2,InfoScroll:3,BigWinBgMusic:4,BigWinBegin:5,BigWinBgm:6,BigWinEnd:7,BigWinBig:8,BigWinSuper:9,BigWinMega:10,BigWinEpic:11,BigWinUltimate:12,BigWinWinEnd:13,AutoSpin:14,VoGrand:15,VoMajor:16,VoMinor:17,VoMini:18,VoCongra:19,VoRespinCongra1:20,VoRespinCongra2:21,Open1:22,Open2:23,NgBGM:24,FgBGM:25,BgBGM:26,BgDark:27,BgBlost:28,GrandTransition:29,JpTransition:30,MapTransition:31,RespinTransition:32,PickTransition:33,Pick:34,PickOpen:35,PickIn:36,PickSet:37,PickClick:38,PickClick1:39,PickTiger:40,PickAdd:41,PickAll:42,PickRes2:43,PickRedBall:44,PickYelloBall:45,PickPlist:46,PickRespin:47,PickEnd:48,PickCongra:49,Diliang:50,WheelStart:51,RespinSet:52,RespinIn:53,RespinAll:54,RespinWheel:55,RespinStop:56,RespinSubtract:57,RespinFast:58,RespinMulti:59,RespinRoll1:60,RespinRoll2:61,RespinRoll3:62,Respin1:63,Respin6:64,RespinEnd:65,BigGold:66,GameFeverChange:67,Triggering:68,MapFull:69,Map1:70,Map2:71,MapIn:72,MapSet:73,MapTear:74,MapChange:75,MapLizi:76,MapCollect:77,Good:78,Popup:79,BackToNg1:80,BackToNg2:81,Win1:82,Win2:83,Win3:84,WinA:85,WinB:86,WinAEnd:87,WinBEnd:88,JpLock:89,JpUnlock:90,MapUp:91,MapLock:92,MapUnlock:93,AllWin:94,AllLoss:95,ReelStop:96,ReelSC1:97,ReelSC2:98,ReelSC3:99,ReelSctr:100,ReelChip:101,ReelChip2:102,ReelTear:103,ReelFast:104,ReelFastBG:105,Ting1:106,Ting2:107,Next:108,Way:109,God:110},t=n([a],e)}());function l(e){return(e=Math.floor(e)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function s(e,t,o){return void 0===o&&(o=2),"0.00"==((e/=t)-Math.floor(e)).toFixed(o)?l(e):e.toFixed(o).replace(/\B(?=(\d{3})+(?!\d))/g,",")}o.Common=r,o.addComma=l,o.addComma2Digits=function(e){return"0.00"==((e*=1)-Math.floor(e)).toFixed(2)?l(e):e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},o.addComma2DigitsWithZero=function(e){return e*=1,Math.floor(e),e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},o.comma_value_smart_version2=s,o.stringify=function(e,t){return void 0===t&&(t=void 0),null==e||null==e?"":e>=1e12?s(e,1e12)+"T":e>=1e9?s(e,1e9)+"B":e>=1e6?s(e,1e6)+"M":e>=1e3?s(e,1e3)+"K":t?e.toFixed(t):Number(e.toFixed(3)).toString()},o.num_with_commas=function(e,t,o){return void 0===t&&(t=0),void 0===o&&(o=1),s(e,1,2)},cc._RF.pop()},{}],CompoAutoNode:[function(e,t,o){"use strict";cc._RF.push(t,"4c322p9vlJCKZUFUUm/Rqh2","CompoAutoNode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchNode=null,t}return i(t,e),a([l],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],CompoMaxBetButton:[function(e,t,o){"use strict";cc._RF.push(t,"c9bc1F3fIVInowWoohWAoQu","CompoMaxBetButton");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setMaxState=null,t}return i(t,e),a([l],t)}(cc.Button));o.default=s,cc._RF.pop()},{}],CompoSpinButton:[function(e,t,o){"use strict";cc._RF.push(t,"bc247VCsNpJDbGmZwbBp5y+","CompoSpinButton");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Base/Tools"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textSprite=null,t.textPath="",t.textPathDis="",t}return i(t,e),t.prototype.loadTextures=function(e,t,o,n){void 0===n&&(n=0),this.normalSprite=r.getFooterAtlas().getSpriteFrame(e),this.pressedSprite=r.getFooterAtlas().getSpriteFrame(t),this.disabledSprite=r.getFooterAtlas().getSpriteFrame(o)},t.prototype.loadTextureNormal=function(e,t){void 0===t&&(t=0),this.normalSprite=r.getFooterAtlas().getSpriteFrame(e)},a([s],t)}(cc.Button));o.default=c,cc._RF.pop()},{"../../Base/Tools":"Tools"}],CompoSpinNode:[function(e,t,o){"use strict";cc._RF.push(t,"68220RP2MJJaIgT8v9EkYUl","CompoSpinNode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.SPIN_STATUS_NAME=void 0;var r=cc._decorator,l=r.ccclass;r.property,o.SPIN_STATUS_NAME={NORMAL_SPIN:"normalspin",AUTO_SPIN:"autospin"};var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curStatue=o.SPIN_STATUS_NAME.NORMAL_SPIN,t.isStop=!1,t.isForbid=!1,t.changeBtnState=null,t.refreshState=null,t}return i(t,e),a([l],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],CountWinLine:[function(e,t,o){"use strict";var n;cc._RF.push(t,"52b80v4Z6hB2a0Vx2NSiBGG","CountWinLine"),Object.defineProperty(o,"__esModule",{value:!0}),o.getWinLine=o.getLineConfig=void 0;var i=e("./Global"),a=i.Global.ColumnNum,r=i.Global.GameTypePrivate,l=e("./GoldTiger"),s=((n={})[r.NG]=[[5,[0,1,2,3,4],[1,1,1,1,1]],[5,[0,1,2,3,4],[0,0,0,0,0]],[5,[0,1,2,3,4],[2,2,2,2,2]],[5,[0,1,2,3,4],[0,1,2,1,0]],[5,[0,1,2,3,4],[2,1,0,1,2]],[5,[0,1,2,3,4],[0,0,1,0,0]],[5,[0,1,2,3,4],[2,2,1,2,2]],[5,[0,1,2,3,4],[1,2,2,2,1]],[5,[0,1,2,3,4],[1,0,0,0,1]],[5,[0,1,2,3,4],[0,1,1,1,0]],[5,[0,1,2,3,4],[2,1,1,1,2]],[5,[0,1,2,3,4],[0,1,0,1,0]],[5,[0,1,2,3,4],[2,1,2,1,2]],[5,[0,1,2,3,4],[1,0,1,0,1]],[5,[0,1,2,3,4],[1,2,1,2,1]],[5,[0,1,2,3,4],[1,1,0,1,1]],[5,[0,1,2,3,4],[1,1,2,1,1]],[5,[0,1,2,3,4],[0,2,0,2,0]],[5,[0,1,2,3,4],[2,0,2,0,2]],[5,[0,1,2,3,4],[1,0,2,0,1]],[5,[0,1,2,3,4],[1,2,0,2,1]],[5,[0,1,2,3,4],[0,0,2,0,0]],[5,[0,1,2,3,4],[2,2,0,2,2]],[5,[0,1,2,3,4],[0,2,2,2,0]],[5,[0,1,2,3,4],[2,0,0,0,2]],[5,[0,1,2,3,4],[0,2,1,2,0]],[5,[0,1,2,3,4],[2,0,1,0,2]],[5,[0,1,2,3,4],[0,0,1,2,2]],[5,[0,1,2,3,4],[2,2,1,0,0]],[5,[0,1,2,3,4],[1,0,1,2,1]],[5,[0,1,2,3,4],[1,2,1,0,1]],[5,[0,1,2,3,4],[0,2,1,0,2]],[5,[0,1,2,3,4],[2,0,1,2,0]],[5,[0,1,2,3,4],[1,0,2,1,0]],[5,[0,1,2,3,4],[1,2,0,1,2]],[5,[0,1,2,3,4],[0,1,2,0,1]],[5,[0,1,2,3,4],[2,1,0,2,1]],[5,[0,1,2,3,4],[0,0,0,1,2]],[5,[0,1,2,3,4],[2,2,2,1,0]],[5,[0,1,2,3,4],[1,1,1,0,2]]],n);o.getLineConfig=function(){var e=l.default.theme.gameLayer.getGameTypePrivate();return s[e]},o.getWinLine=function(e,t,n,i){void 0===n&&(n=null),void 0===i&&(i=null),i=i||1,n=n||1;for(var r=[],s=l.default.RowNum,c=3-s,p=s*a,u=1;u<=p*i;u++)r[u-1]=0;var h=o.getLineConfig()[e-1];for(u=1;u<=t;u++)r[h[1][u-1]*s+(h[2][u-1]-c)+1+(n-1)*p-1]=1;return r},cc._RF.pop()},{"./Global":"Global","./GoldTiger":"GoldTiger"}],DataManager:[function(e,t,o){"use strict";cc._RF.push(t,"260c5dCjP5LGYeIjNTVbTSe","DataManager");var n=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.DataManager=void 0;var i=cc._decorator,a=i.ccclass,r=(i.property,function(){function e(){this.initialResponse={}}var t;return t=e,e.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},e._instance=null,t=n([a],e)}());o.DataManager=r,cc._RF.pop()},{}],EffectLayer:[function(e,t,o){"use strict";cc._RF.push(t,"0954aUKpYpBKrEFnP/rJs19","EffectLayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../Base/BetControl"),s=e("../Base/Common_Base"),c=e("../Base/ThemeControlNew"),p=e("../Base/ThemeWinNode"),u=e("../Base/Tools"),h=e("../Components/ClippingNode"),d=e("./Common"),m=e("./CountWinLine"),f=e("./Enum"),_=e("./Global"),y=_.Global.ColumnNum,g=_.Global.distanceX,T=_.Global.distanceY,S=_.Global.frameBottomY,E=_.Global.GameTypePrivate,b=_.Global.jpName,C=_.Global.jpUpperScale,v=_.Global.performTimeList,N=_.Global.ResImagePath,L=_.Global.ResSpinePath,B=_.Global.symbolNumBigScale,P=_.Global.symbolUpperNumScale,A=_.Global.symbolUpperPosList,w=_.Global.symbolUpperTypeList,G=e("./GoldTiger"),R=e("./LineAnimator"),O=e("./MusicManager"),I=e("./PickNode"),F=e("./PopOut"),M=cc._decorator,x=M.ccclass,k=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TimerCallGroupID="EffectLayer",t.TAG="ThemeGoldTiger.EffectLayer",t.lineAnimator=null,t.pickNode=null,t.FGToBGEntryList=[],t.spinResult=null,t.eachLineShowIndex=null,t.winNumList=[],t.showInAdvancePos=null,t.scatterHitPos=[],t.allLineHitPos=[],t.eachLineAnimationInterval=2,t.winEffectIds=[],t.lastState=f.WinShowState.Idle,t.state=f.WinShowState.Idle,t.performList=[],t.performEndFunc=[],t.NoWinFlag=!1,t.lineTb=0,t.hasPerformAfterWinLine=!1,t.winEndPath=0,t.linesWin=!1,t.totalWinValue=0,t.shouldLockSpin=void 0,t.winRemoveNumEnd=void 0,t.AnimationEffectIdx=void 0,t}return i(t,e),t.prototype.onLoad=function(){for(var e in this.spinResult=null,this.eachLineShowIndex=null,this.winNumList=[],f.WinType)this.winNumList[f.WinType[e]]=0;for(this.eachLineAnimationInterval=2,this.winEffectIds=[],this.state=f.WinShowState.Idle,this.lineAnimator=(new cc.Node).addComponent(R.default),this.node.addChild(this.lineAnimator.node),this.performList=[],this.performEndFunc=[],e=f.WinShowState.Idle;e<=f.WinShowState.Checking;e++)this.performList[e]=0;this.showInAdvancePos=[],this.scatterHitPos=[],this.allLineHitPos=[]},t.prototype.update=function(){this.state==f.WinShowState.Checking&&(console.log("update","checkPerformList"),this.checkPerformList())},t.prototype.perform=function(e){this.state==f.WinShowState.Idle&&(this.spinResult=e,this.clearPerformList(),this.initWinValue(this.spinResult),this.assemblePerformList(),u.checkNodeExist(this.lineAnimator)&&this.lineAnimator.sync(),this.stateChangeTo(f.WinShowState.Checking))},t.prototype.assemblePerformList=function(){for(var e=!1,t=!0,o=1;o<=y*G.default.RowNum*1;o++)this.allLineHitPos[o-1]=0,this.scatterHitPos[o-1]=0;if(this.spinResult.win_lines&&this.spinResult.win_lines.length>0){this.linesWin=!0;var n=this.spinResult.win_lines;for(o=1;o<=n.length;o++){n[o-1].hit_pos||(n[o-1].hit_pos=m.getWinLine(n[o-1].line,n[o-1].count));for(var i=1;i<=n[o-1].hit_pos.length;i++)0!=n[o-1].hit_pos[i-1]&&(this.allLineHitPos[i-1]=1)}this.performList[f.WinShowState.SymbolLineAnimation]=1,t=!1}G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.MAIN&&1==(this.spinResult.pick_game_trig||0)&&(this.spinResult.bonus_game_trig=0,this.performList[f.WinShowState.ScatterAnimation]=1,this.performList[f.WinShowState.FGEntry]=1,e=!0,t=!1),G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.MAIN&&1==(this.spinResult.bonus_game_trig||0)&&(this.performList[f.WinShowState.BGScatterAnimation]=1,this.performList[f.WinShowState.BGEntry]=1,e=!0,t=!1),G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.MAIN&&1==(this.spinResult.win_map||0)&&(this.performList[f.WinShowState.MapFull]=1,this.performList[f.WinShowState.BGEntry]=1,e=!0,t=!1),G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.MAIN&&(this.performList[f.WinShowState.CollectTiger]=1),G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.BONUS&&(this.spinResult.bg_total_win||0)>0&&(G.default.theme.gameLayer.spinLayer.spinTable.cellList.forEach(function(e){e.stopBGNearWinExpect()}),((this.spinResult.jp_value||[])[0]||0)>0?this.performList[f.WinShowState.BGFull]=1:this.performList[f.WinShowState.BGEndVoice]=1,this.performList[f.WinShowState.BGCollect]=1,this.performList[f.WinShowState.BGExit]=1,e=!0,t=!1),p.default.getWinType({spinResult:this.spinResult,winIndex:0})&&(this.performList[f.WinShowState.SymbolLineAnimation]=0,this.performList[f.WinShowState.BigWinAnimation]=1,t=!1),this.NoWinFlag=t,this.performList[f.WinShowState.NoWinDelay]=1,this.hasPerformAfterWinLine=e},t.prototype.clearPerformList=function(){for(var e=f.WinShowState.Idle;e<=f.WinShowState.Checking-1;e++)this.performList[e]=0},t.prototype.performEnd=function(){G.default.theme.gameLayer.getGameTypePrivate(),this.performEndFunc.forEach(function(e){e()}),this.performEndFunc=[],this.stateChangeTo(f.WinShowState.Idle)},t.prototype.checkPerformList=function(){for(var e=-1,t=f.WinShowState.Idle;t<=f.WinShowState.Checking-1;t++)if(1==this.performList[t]){e=t;break}if(-1!=e){this.performList[e]=0;var o=f.WinShowStateTurn[e-1];console.log("checkPerformList",e,o),this[o]&&this[o](this)}else this.performEnd()},t.prototype.MapFull=function(){var e=this;G.default.theme.ctl.disableSpinAndOtherBtns(),e.stateChangeTo(f.WinShowState.MapFull);var t=G.default.theme.gameLayer;u.funcDelay(function(){t.spinLayer.spinTable.countBar.performFull(e.spinResult.map_pos_idx||1),u.playEffect(d.Common.s_sound.MapFull),u.funcDelay(function(){cc.audioEngine.stopMusic(),O.default.getInstance().fadeMusic(2.5,.5,0,1),u.playEffect(d.Common.s_sound.Triggering),s.default.addCallFunc(e.stopPerformUnit,3,e,e)},1)},.5)},t.prototype.CollectTiger=function(){G.default.theme.ctl.disableSpinAndOtherBtns(),this.stateChangeTo(f.WinShowState.CollectTiger);var e=G.default.theme.gameLayer,t=new cc.Node;cc.tween(t).delay(3).removeSelf().start(),e.spinLayer.spinTable.node.addChild(t,6);var o=function(o){var n=o,i=e.spinLayer.spinTable.countBar.getTigerPos(),a=new cc.Node;t.addChild(a),a.setPosition(n);var r=u.createParticle(_.Global.PlistPath+"pick_down"),l=u.createParticle(_.Global.PlistPath+"pick_top_1"),s=u.createParticle(_.Global.PlistPath+"pick_top_2");r.duration=.7,l.duration=.7,s.duration=.7,r.node.setPosition(0,0),l.node.setPosition(0,0),s.node.setPosition(0,0),a.addChild(r.node),a.addChild(l.node),a.addChild(s.node),cc.tween(a).to(.5,{position:i}).delay(2).removeSelf().start()},n=!1;if(G.default.theme.ctl.getCurBet()>=l.default.getMinLargeBet())for(var i=1;i<=y;i++)for(var a=e.spinLayer.spinTable.cellList[i-1],r=1;r<=G.default.RowNum;r++){var c=a.conversionCells(r);1==c.getSymbolIndex()&&(c.performH1Collect(),n=!0,o(c.getSymbolPosition()))}var p=this.spinResult.collect_info,h=p.wild_collect/p.aim*100;n?(u.playEffect(d.Common.s_sound.MapLizi),u.funcDelay(function(){e.spinLayer.spinTable.countBar.performCollectTo(h),u.playEffect(d.Common.s_sound.MapCollect)},.5)):h!=e.spinLayer.spinTable.countBar.getNowPercent()&&e.spinLayer.spinTable.countBar.performCollectTo(h),h>=100?s.default.addCallFunc(this.stopPerformUnit,.5,this,this):this.stopPerformUnit()},t.prototype.BG_NGReconnect=function(e){var t=this;t.spinResult={},t.spinResult.bg_init=e.bg_result,G.default.theme.ctl.disableSpinAndOtherBtns(),t.stateChangeTo(f.WinShowState.BGEntry);var o=G.default.theme.gameLayer,n=E.BG_NG;o.prepareBGEntry(e.bg_rest_round),o.preloadBgImgRes(function(){}),u.funcDelay(function(){o.setGameType(c.THEME_GAME_TYPE.BONUS),o.setGameTypePrivate(n),o.changeViewToBG(e),G.default.theme.gameLayer.spinLayer.spinTable.pauseUpdateFuncList.enQueue(function(){O.default.getInstance().playBG_BGM(),u.funcDelay(function(){t.stopPerformUnit()},1)})},1),G.default.theme.ctl.turnOffAutoSpinCheck(),G.default.theme.ctl.setTurboVisible(!1),G.default.theme.ctl.setFooterSpinBtn(),G.default.theme.ctl.disableSpinAndOtherBtns(),G.default.theme.ctl.hideThemeActivityNode()},t.prototype.BG_MAPReconnect=function(e){var t=this;t.spinResult={},t.spinResult.bg_init=e.bg_result,G.default.theme.ctl.disableSpinAndOtherBtns(),t.stateChangeTo(f.WinShowState.BGEntry);var o=G.default.theme.gameLayer,n=(e.jp_base_check,E.BG_MAP);o.prepareBGEntry(e.bg_rest_round),o.preloadBgImgRes(function(){}),u.funcDelay(function(){o.createMapTower(e.rocket_reel_long,e.rocket_num),o.mapTower.active=!1,o.setGameType(c.THEME_GAME_TYPE.BONUS),o.setGameTypePrivate(n),o.changeViewToBG(e),G.default.theme.gameLayer.spinLayer.spinTable.pauseUpdateFuncList.enQueue(function(){for(var n=0,i=1;i<=5;i++)for(var a=1;a<=3;a++){var r=5*(a-1)+i,l=o.spinLayer.spinTable.cellList[r-1].conversionCells(1);if(13==l.getSymbolIndex()&&0==l.getUpperType()){n+=1;var s=e.rocket_result[n-1];l.reconnectMapChange(s)}}O.default.getInstance().playBG_BGM(),u.funcDelay(function(){t.stopPerformUnit()},1)})},1),G.default.theme.ctl.turnOffAutoSpinCheck(),G.default.theme.ctl.setTurboVisible(!1),G.default.theme.ctl.setFooterSpinBtn(),G.default.theme.ctl.disableSpinAndOtherBtns(),G.default.theme.ctl.hideThemeActivityNode()},t.prototype.BGEntry=function(){var e,t=this;G.default.theme.ctl.disableSpinAndOtherBtns(),t.stateChangeTo(f.WinShowState.BGEntry);var o,n,i=G.default.theme.gameLayer;o=i.getGameTypePrivate()==E.FG?E.BG_FG:1==(t.spinResult.win_map||0)?E.BG_MAP:E.BG_NG,i.prepareBGEntry(3);var a=function(){var e;O.default.getInstance().fadeMusic(0,.3,.2,0);var a=(e={},e[E.BG_NG]=f.InterludeType.BGEntry,e[E.BG_FG]=f.InterludeType.FGBGEntry,e[E.BG_MAP]=f.InterludeType.MapBGEntry,e)[o],r=i.playInterlude(a),l=r[0],p=r[1];o==E.BG_FG&&(n=u.createBlackLayer({fatherNode:i.node,zOrder:9,time:.5,opacity:200})),u.funcDelay(function(){s.default.unscheduleFunc(t.performEachLineAnimation,t),i.setGameType(c.THEME_GAME_TYPE.BONUS),i.setGameTypePrivate(o),i.changeViewToBG(),o==E.BG_MAP||o==E.BG_FG&&(t.deletePickNode(),i.unloadFgImgRes(),u.funcDelay(function(){G.default.theme.gameLayer.spinLayer.spinTable.pauseUpdateFuncList.enQueue(function(){u.playEffect(d.Common.s_sound.Respin6);var e=.8;u.funcDelay(function(){u.deleteBlackLayer(n,.5)},e-.5);for(var o=function(o){var n,a=t.FGToBGEntryList[o-1],r=i.spinLayer.spinTable.cellList[a[0]+5*(a[1]-1)-1];n=2==a[1]?5*(a[1]-1)+6-a[0]:a[0]+5*(a[1]-1),u.funcDelay(function(){var e=u.createAni(L.FG+"Pick_RespinGuoChang").getComponent(sp.Skeleton);e.node.setPosition(i.getCenterPos()),cc.tween(e.node).call(function(){e.setAnimation(0,""+n,!1)}).delay(3).removeSelf().start(),i.node.addChild(e.node,10),u.funcDelay(function(){r.notSpin=!0;var e=r.conversionCells(1);e.setSymbolIndex({index:a[2]}),e.symbolUp()},.5)},e),e+=.1},a=1;a<=t.FGToBGEntryList.length;a++)o(a)})},1))},l),u.funcDelay(function(){O.default.getInstance().playBG_BGM()},l),u.funcDelay(function(){G.default.theme.gameLayer.spinLayer.spinTable.pauseUpdateFuncList.enQueue(function(){u.checkNodeExist(t.lineAnimator)&&t.lineAnimator.sync(),o==E.BG_MAP?u.funcDelay(function(){t.spinResult.rocket_credit=t.spinResult.init_rocket_credit,t.performList[f.WinShowState.MapBGChange]=1,t.stopPerformUnit()},.5):o==E.BG_FG?u.funcDelay(function(){t.stopPerformUnit()},1):(i.deleteInterlude(a),u.funcDelay(function(){t.stopPerformUnit()},.5))})},p)},r=(e={},e[E.BG_NG]=f.PopupType.BGEntry,e[E.BG_FG]=f.PopupType.BGFGEntry,e[E.BG_MAP]=f.PopupType.BGMapEntry,e)[o];i.preloadBgImgRes(function(){}),u.funcDelay(function(){o==E.BG_MAP&&(t.spinResult.bg_init=t.spinResult.bg_init_display,i.createMapTower(t.spinResult.rocket_reel_long),i.mapTower.active=!1),o==E.BG_FG?a():t.performPop({popType:r,callback:a})},1),G.default.theme.ctl.turnOffAutoSpinCheck(),G.default.theme.ctl.setTurboVisible(!1),G.default.theme.ctl.setFooterSpinBtn(),G.default.theme.ctl.disableSpinAndOtherBtns(),G.default.theme.ctl.hideThemeActivityNode()},t.prototype.MapBGChange=function(){var e=this;e.stateChangeTo(f.WinShowState.MapBGChange);var t=G.default.theme.gameLayer,o=t.mapTower.getNowIndex(),n=e.spinResult.rocket_num,i=(e.spinResult.rocket_credit||[]).length;o+i!=n&&u.showErrorPop(["wrong tower state nowIndex=",o,"remoteIndex=",n,"collectNum=",i]);for(var a=[],r=1;r<=5;r++)for(var l=1;l<=3;l++){var c=5*(l-1)+r,p=t.spinLayer.spinTable.cellList[c-1];if(p.notSpin){var h=p.conversionCells(1);13==h.getSymbolIndex()&&0==h.getUpperType()&&a.push([r,l,p])}}a.length!=i&&u.showErrorPop(["wrong tower state collectList.length.",a.length,"collectNum=",i]),a.length>0&&G.default.theme.ctl.disableSpinAndOtherBtns();var m=t.mapTower.getHeadPos(),y=v,E=t.mapTower.getBigReel(),b=0,C=function(n){var i=a[n],r=e.spinResult.rocket_credit[n];r!=E[o+n]&&u.showErrorPop(["wrong tower value rocket_credit["+n+"]=",r,"bigReel["+(o+n)+"]=",E[o+n]]);var l=i[2],c=i[0],p=i[1],h=t.getCenterPos().x+(c-3)*g,f=t.getCenterPos().y-S+(3.5-p)*T,C=h-m.x,v=f-m.y;s.radian2angle(Math.atan(v/C)),u.funcDelay(function(){u.playEffect(d.Common.s_sound.MapTear);var e=u.createAni(L.BG+"SuperRespin").getComponent(sp.Skeleton);e.node.position=cc.v3(m),cc.tween(e.node).call(function(){e.setAnimation(0,"zhuayin",!1)}).delay(y.scratchStayTime).to(y.scratchFadeOutTime,{opacity:0}).removeSelf().start(),t.spinLayer.spinTable.node.addChild(e.node,11),u.funcDelay(function(){var e=new cc.Node;t.spinLayer.spinTable.node.addChild(e,11),e.setPosition(m);var o=y.scratchMoveTime,n=u.createParticle(_.Global.PlistPath+"pick_down"),i=u.createParticle(_.Global.PlistPath+"pick_top_1"),a=u.createParticle(_.Global.PlistPath+"pick_top_2");n.duration=o+.2,i.duration=o+.2,a.duration=o+.2,n.node.setPosition(0,0),i.node.setPosition(0,0),a.node.setPosition(0,0),e.addChild(n.node),e.addChild(i.node),e.addChild(a.node),cc.tween(e).to(o,{position:cc.v3(h,f)}).delay(2).removeSelf().start(),u.playEffect(d.Common.s_sound.PickPlist)},y.scratchStayTime),u.funcDelay(function(){t.mapTower.performScratchAndPush()},y.scratchStayTime),u.funcDelay(function(){l.conversionCells(1).performMapChange(r)},y.scratchMoveTime+y.scratchStayTime)},b),b+=y.performTime};for(r=0;r<a.length;r++)C(r);b>0&&(b+=y.delayAfterPerform),s.default.addCallFunc(e.stopPerformUnit,b,e,e)},t.prototype.BGScatterAnimation=function(){G.default.theme.ctl.disableSpinAndOtherBtns(),this.stateChangeTo(f.WinShowState.BGScatterAnimation),G.default.theme.gameLayer;var e=this.spinResult.sb_hit_pos;cc.audioEngine.stopMusic(),u.playEffect(d.Common.s_sound.Triggering),u.checkNodeExist(this.lineAnimator)&&(this.lineAnimator.sync(),this.lineAnimator.performBGScatterAnimation(e)),s.default.addCallFunc(this.stopPerformUnit,3,this,this)},t.prototype.BGEndVoice=function(){var e=this;G.default.theme.ctl.disableSpinAndOtherBtns(),G.default.theme.gameLayer,e.stateChangeTo(f.WinShowState.BGEndVoice),cc.audioEngine.stopMusic(),u.playEffect(d.Common.s_sound.RespinEnd),O.default.getInstance().fadeMusic(2,.3,cc.audioEngine.getMusicVolume(),.4),u.funcDelay(function(){e.stopPerformUnit()},2)},t.prototype.BGFull=function(){var e=this;G.default.theme.ctl.disableSpinAndOtherBtns();var t=G.default.theme.gameLayer;O.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),.4),e.stateChangeTo(f.WinShowState.BGFull);var o=e.spinResult.jp_value[0],n=u.createAni(L.BG+"Respin_dajiang").getComponent(sp.Skeleton);n.node.opacity=0,cc.tween(n.node).call(function(){n.setAnimation(0,"Respin_dajiang",!0)}).to(.5,{opacity:255}).delay(3).to(.5,{opacity:0}).removeSelf().start(),u.playEffect(d.Common.s_sound.RespinAll),n.node.setPosition(t.getCenterPos().add(cc.v3(0,1.5*T-S))),t.spinLayer.spinTable.node.addChild(n.node,11),u.funcDelay(function(){e.performPop({popType:f.PopupType.Jackpot,callback:function(){O.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),.4),e.addFooterValue(f.WinType.JP,o),e.stopPerformUnit()},jpType:1,value:o})},1.5)},t.prototype.performBGFooterAddValue=function(){var e=u.createAni(L.BG+"Respin_dyf").getComponent(sp.Skeleton);u.playEffect(d.Common.s_sound.Diliang);var t=new cc.Node;t.addChild(e.node),e.node.setPosition(0,7),e.node.setPosition(-50,97),cc.tween(t).call(function(){e.setAnimation(0,"dyf",!1)}).delay(2).removeSelf().start(),G.default.theme.ctl.footer.addWinAnimationToFooter(t)},t.prototype.performFGFooterAddValue=function(){var e=u.createAni(L.FG+"BG_yingfen").getComponent(sp.Skeleton);u.playEffect(d.Common.s_sound.Diliang);var t=new cc.Node;t.addChild(e.node),e.node.setPosition(0,7),cc.tween(t).call(function(){e.setAnimation(0,"yingfen",!1)}).delay(2).removeSelf().start(),G.default.theme.ctl.footer.addWinAnimationToFooter(t)},t.prototype.performBGCollectParticle=function(e){console.log("performBGCollectParticle"),u.playEffect(d.Common.s_sound.PickPlist);var t=v.collectFlyTime,o=new cc.Node;cc.tween(o).delay(3).removeSelf().start(),cc.director.getScene().getChildByName("Canvas").addChild(o,1e4),e=o.convertToNodeSpaceAR(e);var n=o.convertToNodeSpaceAR(G.default.theme.ctl.footer.getNumberWorldPos());n=n.add(cc.v3(-50,120));var i=new cc.Node;o.addChild(i),i.setPosition(e);var a=u.createParticle(_.Global.PlistPath+"pick_down"),r=u.createParticle(_.Global.PlistPath+"pick_top_1"),l=u.createParticle(_.Global.PlistPath+"pick_top_2");a.duration=t+.2,r.duration=t+.2,l.duration=t+.2,a.node.setPosition(0,0),r.node.setPosition(0,0),l.node.setPosition(0,0),i.addChild(a.node),i.addChild(r.node),i.addChild(l.node),cc.tween(i).to(t,{position:cc.v3(n)}).delay(2).removeSelf().start()},t.prototype.BGCollect=function(){var e=this;console.log("BGCollect"),G.default.theme.ctl.disableSpinAndOtherBtns(),e.stateChangeTo(f.WinShowState.BGCollect);var t=G.default.theme.gameLayer;O.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),.4);for(var o=t.spinLayer.spinTable,n=e.spinResult.middle_set,i=e.spinResult.direct_check,r=e.spinResult.dir_target_set,l=e.spinResult.final_chip_credit_check,c=u.createQueue(),p=[],m=[],_=1;_<=15;_++){var E=5*((_-1)%3+1-1)+(Math.floor((_-1)/3)+1),R=o.cellList[E-1];R.notSpin&&(12==R.conversionCells(1).getSymbolIndex()?p.push(R):m.push(R))}for(_=1;_<=p.length;_++)c.enQueue(p[_-1]);for(1==e.spinResult.is_game_fever&&e.spinResult.game_fever_type,_=1;_<=m.length;_++)c.enQueue(m[_-1]);var I=e.spinResult.bet_used,F=a({},e.spinResult.jp_value),M=function(){if(c.isEmpty())e.stopPerformUnit();else{var a=c.deQueue(),p=a.conversionCells(1),m=p.getSymbolIndex(),_=p.getUpperType(),E=a.reelIndex,R=(E-1)%5+1,x=Math.floor((E-1)/5)+1,k=3*(R-1)+x;if(10==m){p.performCollect();var D=l[k-1],W=w[_]*I*p.getMulti();D!=W&&u.showErrorPop("posIndex:"+E+" valueIndex="+k+" addValue="+D+" computeValue="+W+" symbolUpperType="+_+" symbolUpperTypeList[symbolUpperType]="+w[_]+" bet_use="+I+" symbol.getMulti()="+p.getMulti()),e.performBGCollectParticle(p.getSymbolWorldPosition()),u.funcDelay(function(){e.performBGFooterAddValue(),e.addFooterValue(f.WinType.BG,D)},v.collectFlyTime),u.funcDelay(function(){M()},v.collectJumpTime+v.collectFlyTime)}else if(11==m){var U=n[x-1],j=l[k-1];W=void 0,u.between(U,15,30)?W=U=w[U]*I:32==U?W=F[(U=2)-1]:u.showErrorPop(["wrong realResult=",U]),j!=W&&u.showErrorPop("posIndex:"+E+" valueIndex="+k+" addValue="+j+" computeValue="+W+" realResult="+U+(u.between(U,15,30)?" symbolUpperTypeList[realResult]="+w[U]+" bet_use="+I:"")),p.performWheelUp(),u.funcDelay(function(){p.performWheelSpin(U)},v.wheelUpTime),u.funcDelay(function(){p.performWheelDown()},v.wheelUpTime+v.wheelSpinTime+v.wheelStopWait),u.funcDelay(function(){e.performBGCollectParticle(p.getSymbolWorldPosition())},v.wheelUpTime+v.wheelSpinTime+v.wheelStopWait),u.funcDelay(function(){2==U?(e.performPop({popType:f.PopupType.Jackpot,callback:function(){O.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),.4),M()},jpType:U,value:j}),e.performBGFooterAddValue(),e.addFooterValue(f.WinType.JP,j)):(e.performBGFooterAddValue(),e.addFooterValue(f.WinType.BG,j),u.funcDelay(function(){M()},v.collectJumpTime))},v.wheelUpTime+v.wheelSpinTime+v.wheelStopWait+v.collectFlyTime)}else if(12==m){var V=n[x-1],H=45*i[x-1],Y=r[x-1],z=0;p.performWheelUp(),u.funcDelay(function(){u.funcDelay(function(){var e,n=g*y,i=3*T,r=new h.default("tableClipNode");r.AddStencil(n,i),r.setPosition(t.getCenterPos().add(cc.v3(0,1.5*T-S))),o.unClipNode.addChild(r,9999);var l=new cc.Node,c=u.createAni(L.BG+"Respin_chengbeiguang").getComponent(sp.Skeleton);cc.tween(c.node).call(function(){c.setAnimation(0,"daiji",!0)}).start(),c.node.angle=90,c.node.setPosition(0,50),l.addChild(c.node);var m=u.addImage(N.BG+"multi_point");m.scale=.5,m.setAnchorPoint(.5,1),m.setPosition(0,0),m.angle=180,l.addChild(m),r.AddChild(l,1e4),l.setPosition(0,(2-x)*T);var f=new h.default;f.AddStencil(2*(10+1e3*Math.tan(s.angle2radian(15))),i,cc.v3(0,0),0,null,cc.Mask.Type.IMAGE_STENCIL),f.stencil.angle=90,f.position=cc.v3(0,(2-x)*T);var _=new cc.Node;_.angle=-90,u.loadImageFromUrl(N.BG+"shapestencil",function(e,t){e?console.error(e):f.SetImageMaskSpriteFrame(t)}),f.addChild(_),u.changeFather(_,f.stencil),r.AddChild(f,1e3),u.findElementInList([3,8,13],a.reelIndex)||u.showErrorPop("wrong wheel reelIndex"+a.reelIndex);var E=(e={},e[3]=[0,2,3,4,9,10,12,14],e[8]=[1,3,4,5,9,10,11,13],e[13]=[0,2,4,5,10,11,12,14],e)[a.reelIndex],R={};for(var O in E){var F=E[O],M=Math.floor(F/3)+1,k=F%3+1,D=o.cellList[5*(k-1)+M-1];if(D.notSpin){var W=D.conversionCells(1),U=W.getSymbolIndex(),j=W.getUpperType(),J=W.getMulti(),X=V*J,K=W.getMultiTime(),Q=(M-3)*g,q=(2-k)*T-(2-x)*T,Z=new cc.Node;Z.setScale(1.05),Z.setPosition(Q,q),R[F]=Z,f.addChild(Z),u.changeFather(Z,_);var $=new cc.Node;if($.addComponent(cc.Sprite),10==U){$.getComponent(cc.Sprite).spriteFrame=u.getSymbolAtlas().getSpriteFrame(G.default.themeId+"_"+U+"_"+(K+1)),$.scale=.5;var ee=(ie=w[j])*I*X;(ae=u.createFont("symbol_num")).node.setScale(P),ae.string=u.num_2_str(ee),ae.node.setPosition(A.num),Z.addChild($),Z.addChild(ae.node)}else if(u.findElementInList([33,34],U)){$.getComponent(cc.Sprite).spriteFrame=u.getSymbolAtlas().getSpriteFrame(G.default.themeId+"_"+U),$.scale=.5;var te=w[j];(oe=u.addImage(u.transPng("symbol_upper_"+b[te-1]))).scale=C,oe.setPosition(A.jp),Z.addChild($),Z.addChild(oe,1),X>1&&(oe.setPosition(A.jpMultiName),(ne=u.createFont("jp_multi")).node.setPosition(A.jpMultiText),Z.addChild(ne.node),ne.string="X"+X)}else if(13==U)if($.getComponent(cc.Sprite).spriteFrame=u.getSymbolAtlas().getSpriteFrame(G.default.themeId+"_"+U+"_"+(K+1)),$.scale=.5,Z.addChild($),u.findElementInList([33,34],j)){var oe,ne;te=w[j],(oe=u.addImage(u.transPng("symbol_upper_"+b[te-1]))).scale=C,oe.setPosition(A.jp),Z.addChild(oe,1),X>1&&(oe.setPosition(A.jpMultiName),(ne=u.createFont("jp_multi")).node.setPosition(A.jpMultiText),Z.addChild(ne.node),ne.string="X"+X)}else if(u.between(j,15,30)){ee=(ie=w[j])*I*X;var ie,ae,re="symbol_num",le=1;ie>=5&&(le=B,re="symbol_num_big"),(ae=u.createFont(re)).node.setScale(P*le),ae.string=u.num_2_str(ee),ae.node.setPosition(A.num),Z.addChild(ae.node)}else u.showErrorPop("error symbolIndex="+U+" reelPosX="+M+" reelPosY="+k)}}var se,ce,pe,ue=(H-0-90-90+360)%360;z=(ue+=360)/120,cc.tween(l).delay(v.multiRollDelayTime).call(function(){se=u.playEffect(d.Common.s_sound.RespinRoll1),u.funcDelay(function(){u.funcDelay(function(){se&&cc.audioEngine.stopEffect(se)},.1),ce=u.playEffect(d.Common.s_sound.RespinRoll2,!0)},.6)}).by(v.multiRollAddSpeedTime,{angle:-90},{easing:"sineIn"}).by(z,{angle:-ue}).call(function(){u.funcDelay(function(){ce&&cc.audioEngine.stopEffect(ce)},.1),pe=u.playEffect(d.Common.s_sound.RespinRoll3)}).by(v.multiRollReduceSpeedTime,{angle:-90},{easing:"sineOut"}).call(function(){pe&&cc.audioEngine.stopEffect(pe)}).start(),cc.tween(f.stencil).delay(v.multiRollDelayTime).by(v.multiRollAddSpeedTime,{angle:-90},{easing:"sineIn"}).by(z,{angle:-ue}).by(v.multiRollReduceSpeedTime,{angle:-90},{easing:"sineOut"}).start(),cc.tween(_).delay(v.multiRollDelayTime).by(v.multiRollAddSpeedTime,{angle:90},{easing:"sineIn"}).by(z,{angle:ue}).by(v.multiRollReduceSpeedTime,{angle:90},{easing:"sineOut"}).start(),u.funcDelay(function(){p.performWheelDown();var e=!1;for(var t in Y){var n=Y[t],i=Math.floor(n/3)+1,a=n%3+1,l=o.cellList[5*(a-1)+i-1];l.notSpin&&(e=!0,l.conversionCells(1).performMulti(V))}e&&u.playEffect(d.Common.s_sound.RespinMulti),r.active=!1,r.removeFromParent(),u.funcDelay(function(){},v.multiPerformTime)},v.multiRollDelayTime+v.multiRollAddSpeedTime+z+v.multiRollReduceSpeedTime+v.multiRollEndWaitTime)},v.wheelSpinTime),p.performWheelSpin(-V)},v.wheelUpTime),u.funcDelay(function(){0==z&&(z=4),u.funcDelay(function(){M()},z)},v.wheelUpTime+v.wheelSpinTime+v.wheelDownTime+v.multiRollDelayTime+v.multiRollAddSpeedTime+v.multiRollReduceSpeedTime+v.multiPerformTime+v.multiRollEndWaitTime)}else if(13==m)if(u.between(_,15,30)){p.performCollect();var J=l[k-1];W=w[_]*I*p.getMulti(),J!=W&&u.showErrorPop("posIndex:"+E+" valueIndex="+k+" addValue="+J+" computeValue="+W+" symbolUpperType="+_+" symbolUpperTypeList[symbolUpperType]="+w[_]+" bet_use="+I+" symbol.getMulti()="+p.getMulti()),e.performBGCollectParticle(p.getSymbolWorldPosition()),u.funcDelay(function(){e.performBGFooterAddValue(),e.addFooterValue(f.WinType.BG,J)},v.collectFlyTime),u.funcDelay(function(){M()},v.collectJumpTime+v.collectFlyTime)}else if(u.findElementInList([33,34],_)){p.performCollect();var X=w[_],K=l[k-1];W=F[X-1],K!=W&&u.showErrorPop("posIndex:"+E+" valueIndex="+k+" addValue="+K+" computeValue="+W+" symbolUpperType="+_+" symbolUpperTypeList[symbolUpperType]="+w[_]+" bet_use="+I+" symbol.getMulti()="+p.getMulti()),e.performBGCollectParticle(p.getSymbolWorldPosition()),u.funcDelay(function(){e.performBGFooterAddValue(),e.addFooterValue(f.WinType.JP,K)},v.collectFlyTime),u.funcDelay(function(){e.performPop({popType:f.PopupType.Jackpot,callback:function(){O.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),.4),M()},jpType:X,value:K,multi:p.getMulti()})},v.collectJumpTime+v.collectFlyTime)}else u.showErrorPop("collectNext error symbolUpperType"+_);else if(u.findElementInList([33,34],m)){p.performCollect();var Q=w[_],q=l[k-1];W=F[Q-1],q!=W&&u.showErrorPop("posIndex:"+E+" valueIndex="+k+" addValue="+q+" computeValue="+W+" symbolUpperType="+_+" symbolUpperTypeList[symbolUpperType]="+w[_]+" bet_use="+I+" symbol.getMulti()="+p.getMulti()),e.performBGCollectParticle(p.getSymbolWorldPosition()),u.funcDelay(function(){e.performBGFooterAddValue(),e.addFooterValue(f.WinType.JP,q)},v.collectFlyTime),u.funcDelay(function(){e.performPop({popType:f.PopupType.Jackpot,callback:function(){O.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),.4),M()},jpType:Q,value:q,multi:p.getMulti()})},v.collectJumpTime+v.collectFlyTime)}else M(),u.showErrorPop("collectNext error symbolIndex="+m)}};M()},t.prototype.BGExit=function(){var e,t=this;G.default.theme.ctl.disableSpinAndOtherBtns(),t.stateChangeTo(f.WinShowState.BGExit);var o=G.default.theme.gameLayer,n=o.getGameTypePrivate(),i=(e={},e[E.BG_NG]=f.PopupType.BGExit,e[E.BG_FG]=f.PopupType.BGFGExit,e[E.BG_MAP]=f.PopupType.BGMapExit,e)[n];u.funcDelay(function(){var e=t.spinResult.total_win;t.performPop({popType:i,value:e,callback:function(){var e,i=(e={},e[E.BG_NG]=f.InterludeType.BGExit,e[E.BG_FG]=f.InterludeType.FGBGExit,e[E.BG_MAP]=f.InterludeType.MapBGExit,e)[n],a=o.playInterlude(i),r=a[0],l=a[1];u.funcDelay(function(){G.default.reconnectFlagList.BG_MAP=!1,s.default.unscheduleFunc(t.performEachLineAnimation,t),o.setGameType(c.THEME_GAME_TYPE.MAIN),o.setGameTypePrivate(E.NG),o.changeViewToNGFromBG(),G.default.theme.gameLayer.jackpotLayer.stopMimic(),u.checkNodeExist(t.lineAnimator)&&t.lineAnimator.sync()},r);var h=p.default.getWinTypeCoins({spinResult:t.spinResult,winIndex:2}),d=p.default.getWinType({spinResult:t.spinResult,winIndex:2});d&&G.default.theme.ctl.preloadBWImgRes(),u.funcDelay(function(){var e=0;i==f.InterludeType.FGBGExit?(o.deleteInterlude(i),e=1):i==f.InterludeType.BGExit&&(o.deleteInterlude(i),e=1),u.funcDelay(function(){var e=function(){cc.audioEngine.stopMusic(),u.funcDelay(function(){O.default.getInstance().playNG_BGM(),O.default.getInstance().fadeNG_BGM(),G.default.theme.ctl.setTurboVisible(!0),G.default.theme.ctl.enableSpinAndOtherBtns(),G.default.theme.ctl.turnOnAutoSpinCheck(),G.default.theme.ctl.getAutoStatus()?G.default.theme.ctl.setFooterAutoSpinBtn():G.default.theme.ctl.setFooterSpinBtn(),o.unloadBgImgRes(),t.stopPerformUnit()},1)};G.default.theme.ctl.showThemeActivityNode(),d?(O.default.getInstance().cleanFading(),G.default.theme.ctl.performBigWin(d,h,e)):e()},e)},l)}})},0)},t.prototype.ScatterAnimation=function(){G.default.theme.ctl.disableSpinAndOtherBtns(),this.stateChangeTo(f.WinShowState.ScatterAnimation);var e=this.spinResult.sf_hit_pos;cc.audioEngine.stopMusic(),O.default.getInstance().fadeMusic(2.5,.5,0,1),u.playEffect(d.Common.s_sound.Triggering),u.checkNodeExist(this.lineAnimator)&&(this.lineAnimator.sync(),this.lineAnimator.performScatterAnimation(e)),s.default.addCallFunc(this.stopPerformUnit,3,this,this)},t.prototype.FGReconnect=function(e){var t=this;t.spinResult={},G.default.theme.ctl.disableSpinAndOtherBtns(),t.stateChangeTo(f.WinShowState.FGEntry);var o=G.default.theme.gameLayer,n=E.FG;o.preloadFgImgRes(function(){}),u.funcDelay(function(){t.createPickNode(),t.pickNode.reconnect(e),o.setGameTypePrivate(n),o.changeViewToFG(),u.checkNodeExist(t.lineAnimator)&&t.lineAnimator.sync(),O.default.getInstance().playFG_BGM()},1),G.default.theme.ctl.turnOffAutoSpinCheck(),G.default.theme.ctl.setTurboVisible(!1),G.default.theme.ctl.setFooterSpinBtn(),G.default.theme.ctl.disableSpinAndOtherBtns(),G.default.theme.ctl.hideThemeActivityNode()},t.prototype.createPickNode=function(){this.pickNode=new I.default,this.pickNode.init(),G.default.theme.gameLayer.node.addChild(this.pickNode,5),this.pickNode=this.pickNode},t.prototype.deletePickNode=function(){this.pickNode.hide(),this.pickNode=null},t.prototype.performPop=function(e){var t=(new cc.Node).addComponent(F.default);t.init(e.popType,e);var o=G.default.theme.gameLayer;t.node.setPosition(o.getStaticCenterPos()),o.node.addChild(t.node,10),t.popOutAfterAddToFather()},t.prototype.FGEntry=function(){console.log("FGEntry");var e=this;G.default.theme.ctl.disableSpinAndOtherBtns(),e.stateChangeTo(f.WinShowState.FGEntry);var t=G.default.theme.gameLayer,o=E.FG,n=function(){var n=t.playInterlude(f.InterludeType.FGEntry),i=n[0];n[1],u.funcDelay(function(){s.default.unscheduleFunc(e.performEachLineAnimation,e),t.setGameTypePrivate(o),t.changeViewToFG(),u.checkNodeExist(e.lineAnimator)&&(e.lineAnimator.sync(),t.spinLayer.spinTable.allSymbolUp()),e.pickNode.createTip(),e.pickNode.active=!0},i),u.funcDelay(function(){O.default.getInstance().playFG_BGM()},i)},i=function(){e.createPickNode(),e.pickNode.active=!1;var o=(new cc.Node).addComponent(F.default);o.init(f.PopupType.FGEntry,{callback:n}),o.node.setPosition(t.centerX,t.centerY-t.moveDistance/t.layerScale),t.node.addChild(o.node,10),o.popOutAfterAddToFather()};t.preloadFgImgRes(function(){}),u.funcDelay(function(){i()},1),G.default.theme.ctl.turnOffAutoSpinCheck(),G.default.theme.ctl.setTurboVisible(!1),G.default.theme.ctl.setFooterSpinBtn(),G.default.theme.ctl.disableSpinAndOtherBtns(),G.default.theme.ctl.hideThemeActivityNode()},t.prototype.performFGToBG=function(e){G.default.theme.ctl.disableSpinAndOtherBtns(),G.default.theme.gameLayer,this.spinResult.bg_init=e.bg_start_pos,this.FGToBGEntryList=[];for(var t=1;t<=5;t++)for(var o=1;o<=3;o++){var n=this.spinResult.bg_init[t-1][o-1];(u.between(n,15,30)||u.findElementInList([11,12,13,33,34],n))&&(this.FGToBGEntryList.push([t,o,n]),this.spinResult.bg_init[t-1][o-1]=Math.floor(8*Math.random()+1))}this.performList[f.WinShowState.BGEntry]=1,this.stopPerformUnit()},t.prototype.performFGToNG=function(e){var t=this;G.default.theme.ctl.disableSpinAndOtherBtns();var o=G.default.theme.gameLayer;u.funcDelay(function(){var n=e.total_win_check;t.performPop({popType:f.PopupType.FGExit,callback:function(){var n=o.playInterlude(f.InterludeType.FGExit),i=n[0],a=n[1];u.funcDelay(function(){s.default.unscheduleFunc(t.performEachLineAnimation,t),o.setGameTypePrivate(E.NG),o.changeViewToNGFromFG(),u.checkNodeExist(t.lineAnimator)&&t.lineAnimator.sync(),t.deletePickNode()},i);var r=p.default.getWinTypeCoins({spinResult:e,winIndex:4}),l=p.default.getWinType({spinResult:e,winIndex:4});l&&G.default.theme.ctl.preloadBWImgRes(),u.funcDelay(function(){var e=function(){cc.audioEngine.stopMusic(),u.funcDelay(function(){O.default.getInstance().playNG_BGM(),O.default.getInstance().fadeNG_BGM(),G.default.theme.ctl.setTurboVisible(!0),G.default.theme.ctl.enableSpinAndOtherBtns(),G.default.theme.ctl.turnOnAutoSpinCheck(),G.default.theme.ctl.getAutoStatus()?G.default.theme.ctl.setFooterAutoSpinBtn():G.default.theme.ctl.setFooterSpinBtn(),o.unloadFgImgRes(),t.stopPerformUnit()},1)};G.default.theme.ctl.showThemeActivityNode(),l?(O.default.getInstance().cleanFading(),G.default.theme.ctl.performBigWin(l,r,e)):e()},a)},value:n})},.5)},t.prototype.stopPerformUnit=function(){console.log("stopPerformUnit"),G.default.theme.gameLayer.jackpotLayer.cleanJPCmdCallback(),s.default.unscheduleFunc(this.stopPerformUnit,this),this.stateChangeTo(f.WinShowState.Checking)},t.prototype.NoWinDelay=function(){this.stateChangeTo(f.WinShowState.NoWinDelay),G.default.theme.ctl.footer.setLabelDescription("Intro"),c.THEME_GAME_TYPE.MAIN==G.default.theme.ctl.getGameType()&&G.default.theme.ctl.getAutoStatus()?this.NoWinFlag?s.default.addCallFunc(this.stopPerformUnit,1,this,this):this.stopPerformUnit():c.THEME_GAME_TYPE.MAIN==G.default.theme.ctl.getGameType()?(O.default.getInstance().fadeNG_BGM(),G.default.theme.gameLayer,G.default.theme.ctl.enableSpin(),this.stopPerformUnit()):c.THEME_GAME_TYPE.FREE==G.default.theme.ctl.getGameType()?s.default.addCallFunc(this.stopPerformUnit,1,this,this):c.THEME_GAME_TYPE.BONUS==G.default.theme.ctl.getGameType()&&(this.NoWinFlag?(G.default.theme.ctl.enableSpin(),s.default.addCallFunc(this.stopPerformUnit,1,this,this)):this.stopPerformUnit())},t.prototype.BigWinAnimation=function(){var e=this;G.default.theme.ctl.disableSpinAndOtherBtns(),e.stateChangeTo(f.WinShowState.BigWinAnimation),u.checkNodeExist(e.lineAnimator)&&e.lineAnimator.sync();var t=function(){G.default.theme.gameLayer,G.default.theme.ctl.enableSpin(),G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.FREE?O.default.getInstance().playFG_BGM():G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.MAIN&&(1==(e.spinResult.pick_game_trig||0)||O.default.getInstance().playNG_BGM()),G.default.theme.ctl.getGameType()!=c.THEME_GAME_TYPE.MAIN||G.default.theme.ctl.getAutoStatus()||(e.resetForEachLineAnimation(),e.performEachLineAnimation(),console.log("BigWinAnimation.addScheduleFunc.performEachLineAnimation",e.eachLineAnimationInterval),s.default.addScheduleFunc(e.performEachLineAnimation,e.eachLineAnimationInterval,e,e)),e.addFooterValue(f.WinType.Line,e.winNumList[f.WinType.Line],0),e.stopSymbolLineAnimation(!0),G.default.theme.ctl.getGameType()!=c.THEME_GAME_TYPE.MAIN||G.default.theme.ctl.getAutoStatus()?G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.FREE||G.default.theme.ctl.getAutoStatus()?s.default.addCallFunc(e.stopPerformUnit,1,e,e):(G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.BONUS||G.default.theme.ctl.getAutoStatus())&&s.default.addCallFunc(e.stopPerformUnit,1,e,e):e.stopPerformUnit()},o=p.default.getWinType({spinResult:e.spinResult,winIndex:0}),n=p.default.getWinTypeCoins({spinResult:e.spinResult,winIndex:0});O.default.getInstance().cleanFading(),G.default.theme.ctl.preloadBWImgRes(),u.funcDelay(function(){e.showAllLines(),e.performHighWinAni(e.lineTb);var i=u.playEffect(d.Common.s_sound.BigGold);u.funcDelay(function(){i&&cc.audioEngine.stopEffect(i),G.default.theme.ctl.performBigWin(o,n,t)},2)},.3)},t.prototype.performHighWinAni=function(e){if(!(e<3)){var t=u.createAni(L.NG+"NG_dajiang").getComponent(sp.Skeleton);cc.tween(t.node).call(function(){t.setAnimation(0,"dajiang",!1)}).delay(3).to(.5,{opacity:0}).removeSelf().start(),t.node.setPosition(G.default.theme.gameLayer.getCenterPos()),G.default.theme.node.addChild(t.node,-1)}},t.prototype.playHighMultiWinVoice=function(e){e<3||u.playRandomVoice("playHighMultiWinVoice",[d.Common.s_sound.Win1,d.Common.s_sound.Win2,d.Common.s_sound.Win3])},t.prototype.SymbolLineAnimation=function(){var e=this;u.checkNodeExist(e.lineAnimator)&&e.lineAnimator.sync(),e.stateChangeTo(f.WinShowState.SymbolLineAnimation),s.default.addCallFunc(function(){G.default.theme.ctl.enableSpin()},.1,e,e),G.default.theme.ctl.getGameType()!=c.THEME_GAME_TYPE.MAIN||G.default.theme.ctl.getAutoStatus()||e.hasPerformAfterWinLine||G.default.theme.ctl.enableOtherBtns();var t=0;if(e.spinResult.tb<1?(t=1.2,e.playWinEffect(d.Common.s_sound.WinA,!1),e.winEndPath=d.Common.s_sound.WinAEnd):(e.playWinEffect(d.Common.s_sound.WinB,!1),e.winEndPath=d.Common.s_sound.WinBEnd,t=2.2),O.default.getInstance().cleanFading(),1==(e.spinResult.pick_game_trig||0));else{var o=t,n=.2;n=n||0,G.default.theme.ctl.backoffMusicActionNode||(G.default.theme.ctl.backoffMusicActionNode=new cc.Node,G.default.theme.ctl.theme.node.addChild(G.default.theme.ctl.backoffMusicActionNode)),cc.tween(G.default.theme.ctl.backoffMusicActionNode).delay(n).call(function(){G.default.theme.ctl.fadeLoopMusic(0,.1,1,.5)}).delay(Math.max(o-n,0)).call(function(){G.default.theme.ctl.fadeLoopMusic(0,.1,.5,1)}).start()}e.playHighMultiWinVoice(e.lineTb),e.addFooterValue(f.WinType.Line,e.winNumList[f.WinType.Line],t),e.showAllLines(),G.default.theme.ctl.getGameType()!=c.THEME_GAME_TYPE.MAIN||G.default.theme.ctl.getAutoStatus()?(console.log("addCallFunc 2","stopPerformUnit",t),s.default.addCallFunc(e.stopSymbolLineAnimation,t,e,e),s.default.addCallFunc(e.stopPerformUnit,t,e,e)):(s.default.addCallFunc(e.stopSymbolLineAnimation,t,e,e),console.log("addCallFunc 1","stopPerformUnit"),s.default.addCallFunc(e.stopPerformUnit,t,e,e),s.default.addCallFunc(function(){e.resetForEachLineAnimation(),e.performEachLineAnimation(),console.log("SymbolLineAnimation.addScheduleFunc.performEachLineAnimation",e.eachLineAnimationInterval),s.default.addScheduleFunc(e.performEachLineAnimation,e.eachLineAnimationInterval,e,e)},1,null,e))},t.prototype.stopSymbolLineAnimation=function(e){if(void 0===e&&(e=!1),s.default.unscheduleFunc(this.stopSymbolLineAnimation,this),this.stopAllWinMusicAndEffects(),G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.MAIN&&O.default.getInstance().fadeNG_BGM(),G.default.theme.ctl.footer.flushTotalWin(),!e){var t=this.winEndPath||d.Common.s_sound.WinAEnd;u.playEffect(t,!1),this.winEndPath=null}},t.prototype.showAllLines=function(){u.checkNodeExist(this.lineAnimator)&&this.lineAnimator.performAllLine(this.allLineHitPos)},t.prototype.stopAllLines=function(){u.checkNodeExist(this.lineAnimator)&&this.lineAnimator.stopLineAnimation()},t.prototype.resetForEachLineAnimation=function(){this.eachLineShowIndex=1},t.prototype.performEachLineAnimation=function(){if(u.checkNodeExist(this.lineAnimator)&&this.lineAnimator.stopLineAnimation(),null!=this.eachLineShowIndex&&null!=this.spinResult&&null!=this.spinResult.win_lines&&null!=this.spinResult.win_lines[this.eachLineShowIndex-1]){var e=m.getWinLine(this.spinResult.win_lines[this.eachLineShowIndex-1].line,this.spinResult.win_lines[this.eachLineShowIndex-1].count);this.lineAnimator.performLineAnimation(e),this.eachLineShowIndex=this.eachLineShowIndex%this.spinResult.win_lines.length,this.eachLineShowIndex=this.eachLineShowIndex+1}},t.prototype.stopShow=function(){var e;return G.default.theme.totalBet=G.default.theme.ctl.getCurTotalBet(),(e=this.state==f.WinShowState.Idle||this.stepCurrentState())&&(this.stopAllPerforms(),this.performEnd()),e},t.prototype.stepCurrentState=function(){return this.state==f.WinShowState.SymbolLineAnimation&&this.hasPerformAfterWinLine?(this.stopSymbolLineAnimation(),this.stopPerformUnit(),!1):this.state!=f.WinShowState.SymbolLineAnimation||this.hasPerformAfterWinLine?this.state==f.WinShowState.BigWinAnimation?(this.stopPerformUnit(),!1):this.state==f.WinShowState.NoWinDelay||this.state==f.WinShowState.Idle:(G.default.theme.ctl.stopFadeMusicActionNode(),this.stopSymbolLineAnimation(),!0)},t.prototype.stopAllPerforms=function(){if(s.default.clearGroup(this),u.checkNodeExist(this.lineAnimator)){for(var e in this.stopAllWinMusicAndEffects(),this.lineAnimator.stopAnimation(),G.default.theme.ctl.footer.flushTotalWin(),f.WinType){var t=f.WinType[e];this.winNumList[t]>0&&this.addFooterValue(t,this.winNumList[t])}G.default.theme.ctl.footer.setLabelDescription("Clear")}},t.prototype.stateChangeTo=function(e){this.lastState=this.state,this.state=e},t.prototype.playWinEffect=function(e,t){var o=u.playEffect(e,t);-1!=o&&this.winEffectIds.push(o)},t.prototype.stopAllWinMusicAndEffects=function(){for(s.default.unscheduleFunc(this.stopAllWinMusicAndEffects,this);this.winEffectIds.length>0;){var e=this.winEffectIds.splice(0,1)[0];cc.audioEngine.stopEffect(e)}},t.prototype.isWinLineCanChangeTip=function(){return this.state==f.WinShowState.SymbolLineAnimation&&!this.hasPerformAfterWinLine},t.prototype.initWinValue=function(e){G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.FREE?this.winNumList[f.WinType.Line]=e.fg_base_win||0:G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.MAIN&&(this.winNumList[f.WinType.Line]=e.base_win||0),this.winNumList[f.WinType.Scatter]=e.sf_win||0,this.winNumList[f.WinType.Line]=this.winNumList[f.WinType.Line]+this.winNumList[f.WinType.Scatter],this.winNumList[f.WinType.Scatter]=0,this.winNumList[f.WinType.JP]=e.jp_win||0,G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.BONUS?this.winNumList[f.WinType.BG]=(e.total_win||0)-this.winNumList[f.WinType.JP]:this.winNumList[f.WinType.BG]=0,this.winNumList[f.WinType.FG]=0;var t=this.winNumList[f.WinType.Line]/G.default.theme.totalBet;for(var o in this.lineTb=t,this.totalWinValue=0,f.WinType)this.totalWinValue=this.totalWinValue+this.winNumList[f.WinType[o]]},t.prototype.addFooterValue=function(e,t,o){void 0===o&&(o=null),console.log("addFooterValue",e,t,o,this.winNumList),this.winNumList[e]=this.winNumList[e]-t,G.default.theme.ctl.footer.flushTotalWin(),G.default.theme.ctl.footer.updateTotalWin(t,o),this.winNumList[e]<0&&u.showErrorPop("winType."+e+" addValue."+t+" leftValue."+this.winNumList[e])},r([x],t)}(cc.Component));o.default=k,cc._RF.pop()},{"../Base/BetControl":"BetControl","../Base/Common_Base":"Common_Base","../Base/ThemeControlNew":"ThemeControlNew","../Base/ThemeWinNode":"ThemeWinNode","../Base/Tools":"Tools","../Components/ClippingNode":"ClippingNode","./Common":"Common","./CountWinLine":"CountWinLine","./Enum":"Enum","./Global":"Global","./GoldTiger":"GoldTiger","./LineAnimator":"LineAnimator","./MusicManager":"MusicManager","./PickNode":"PickNode","./PopOut":"PopOut"}],Enum:[function(e,t,o){"use strict";cc._RF.push(t,"9566eRk5ElLj6K83vX8fqnf","Enum"),Object.defineProperty(o,"__esModule",{value:!0}),o.WinType=o.PopupTypeTurn=o.PopupType=o.InterludeTypeTurn=o.InterludeType=o.PopState=o.WinShowStateTurn=o.WinShowState=o.SpinReelState=o.SpinTableState=o.SpinLayerState=void 0,o.SpinLayerState={Uninitialized:0,Idle:1,Rolling:2,Show:3},o.SpinTableState={Uninitialized:0,Idle:1,Rolling:2},o.SpinReelState={Uninitialized:0,Idle:1,Rolling:2,AboutToStop:3,BounceBack:4,RollingWithResult:5,BounceUp:6,PreRollWithResult:7,SpinDelay:8},o.WinShowState={Idle:1,CollectTiger:2,MapFull:3,BGScatterAnimation:4,ScatterAnimation:5,SymbolLineAnimation:6,BigWinAnimation:7,FGEntry:8,BGEntry:9,MapBGChange:10,BGEndVoice:11,BGFull:12,BGCollect:13,BGExit:14,NoWinDelay:15,Checking:16,BgWin2:void 0,WinDelay:void 0},o.WinShowStateTurn=["Idle","CollectTiger","MapFull","BGScatterAnimation","ScatterAnimation","SymbolLineAnimation","BigWinAnimation","FGEntry","BGEntry","MapBGChange","BGEndVoice","BGFull","BGCollect","BGExit","NoWinDelay","Checking"],o.PopState={Expand:1,Shrink:2},o.InterludeType={BGEntry:1,FGBGEntry:2,MapBGEntry:3,BGExit:4,FGBGExit:5,MapBGExit:6,FGEntry:7,FGExit:8,SFGEntry:9,SFGExit:10},o.InterludeTypeTurn=["BGEntry","FGBGEntry","MapBGEntry","BGExit","FGBGExit","MapBGExit","FGEntry","FGExit","SFGEntry","SFGExit"],o.PopupType={FGEntry:1,FGExit:2,BGEntry:3,BGExit:4,BGFGEntry:5,BGFGExit:6,BGMapEntry:7,BGMapExit:8,Jackpot:9,GameFever:10},o.PopupTypeTurn=["FGEntry","FGExit","BGEntry","BGExit","BGFGEntry","BGFGExit","BGMapEntry","BGMapExit","Jackpot","GameFever"],o.WinType={Line:1,Scatter:2,JP:3,BG:4,FG:5},cc._RF.pop()},{}],EventCenter:[function(e,t,o){"use strict";cc._RF.push(t,"f1059lONQZPlIlq5PXaFIKn","EventCenter");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){var t=e.call(this)||this;return o._instance=t,t}var o;return i(t,e),o=t,t.registerEvent=function(e,t,n){o._instance.node.on(e,t,n)},t.removeEvent=function(e,t,n){o._instance.node.off(e,t,n)},t.pushEvent=function(e,t){void 0===t&&(t=null),o._instance.node.emit(e,t)},t._instance=null,o=a([l],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],Footer:[function(e,t,o){"use strict";cc._RF.push(t,"72ec5jv11xPD7rawnS4Hnmv","Footer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./LabelNumRoll"),l=e("./Common_Base"),s=e("./ThemeControlNew"),c=e("./Tools"),p=e("./BetControl"),u=e("./EventCenter"),h=e("./User"),d=e("../Components/Footer/CompoSpinButton"),m=e("../Components/Footer/CompoSpinNode"),f=e("../Components/Footer/CompoAutoNode"),_=e("../Components/Footer/CompoMaxBetButton"),y=e("../init"),g=e("../Game/Common"),T=e("../Game/Global"),S=e("../Common/NetTrans"),E=T.Global.ResSpinePath,b=cc._decorator,C=b.ccclass,v=b.property,N=[null,"footer-footer-btn_spin","footer-footer-btn_spin_clicked","footer-footer-btn_spin_disabled"],L=[null,"footer-footer-btn_spin","footer-footer-btn_spin_clicked","footer-footer-btn_spin_disabled"],B=[null,"footer-footer-btn_spin","footer-footer-btn_spin_clicked","footer-footer-btn_spin_disabled"],P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ctl=null,t.root=null,t.spFooterWin=null,t.totalBetNode=null,t.totalBetNodePos=null,t.totalBetNodeHidePos=null,t.totalBetNodeShowPos=null,t.labelTotalBet=null,t.btnAddBet=null,t.btnSubBet=null,t.addStarted=!1,t.subStarted=!1,t.maxStarted=!1,t.btnMaxBet=null,t.qidong=null,t.winNode=null,t.labelWin=null,t.autoNode=null,t.spinNode=null,t.spinCountBoard=null,t.spinCountLabel=null,t.btnSpin=null,t.spinSaoGuang=null,t.spinCountDownNode=null,t.spinCountDownLabel=null,t.maxBetFlash=null,t.betTipNode=null,t.underLabelWinNode=null,t.unClickLayer=null,t.positionY=0,t.ignoreTouchSubBetBtnOnce=!1,t.ignoreTouchAddBetBtn=!1,t.otherBtnsEnableState=!1,t.spinEnableState=!1,t.isFreeSpin=!1,t.isFreeSpinLayer=!1,t.turboFlag=!1,t.canTurbo=!1,t.infinitySpin=!1,t.isAuto=!1,t.autoCount=0,t.maxBetTag=!1,t.minBetTag=!1,t.tipTotalBetSprite=void 0,t}return i(t,e),t.prototype.init=function(e){var t=this;t.ctl=e,t.isFreeSpin=!1,t.root=t.node.getChildByName("root");for(var o=cc.winSize,n=[-77,-51,-51,38,63,63,-51],i=[t.root.getChildByName("node_total_bet"),t.root.getChildByName("bet_tip_node"),t.root.getChildByName("node_max_bet"),t.root.getChildByName("node_spin"),t.root.getChildByName("node_auto"),t.root.getChildByName("node_total_bet_info")],a=1;a<=i.length;a++)if(i[a-1]){var r=n[a-1]/280*(o.width-1280);i[a-1].position=cc.v3(i[a-1].position.x+r)}t.underLabelWinNode=new cc.Node,t.underLabelWinNode.setPosition(0,-85),t.root.getChildByName("node_win").getChildByName("sp_win").addChild(t.underLabelWinNode,1),t.totalBetNode=t.root.getChildByName("node_total_bet"),t.betTipNode=t.root.getChildByName("bet_tip_node"),t.labelTotalBet.overflow=cc.Label.Overflow.SHRINK,t.labelTotalBet.node.width=210,t.btnAddBet=t.totalBetNode.getChildByName("btn_add_bet").getComponent(cc.Button),t.btnSubBet=t.totalBetNode.getChildByName("btn_sub_bet").getComponent(cc.Button);var s=t.root.getChildByName("node_max_bet");t.qidong=s.getChildByName("qidong"),t.btnMaxBet.setMaxState=function(e){t.qidong.active=e},t.addMaxBetFlash(),t.winNode=t.root.getChildByName("node_win"),t.labelWin.nrInit(0,12,null,null),t.labelWin.overflow=cc.Label.Overflow.SHRINK,t.labelWin.node.width=440,t.labelWin.setDeZero(!0),t.showAdNode(),t.autoNode.node.active=!1,t.loadAutoBtn(),t.spinCountBoard=t.spinNode.node.getChildByName("count"),t.spinCountBoard.active=!1,t.autoCount=0,t.canTurbo=!0,t.btnSpin.textSprite=t.btnSpin.node.getChildByName("text_sprite"),t.btnSpin.textSprite.zIndex=100,t.positionY=t.btnSpin.textSprite.position.y,t.spinCountDownNode=t.btnSpin.node.getChildByName("count_down"),t.spinCountDownLabel=t.spinCountDownNode.getChildByName("count_down_label").getComponent(cc.Label),t.spinCountDownNode.active=!1,t.spinNode.changeBtnState=function(e,o,n){t.ctl.touchSpinTag=!1,e&&"ignore"==e||(t.spinNode.curStatue=e),o&&"ignore"==o||(t.spinNode.isStop=o),n&&"ignore"==n||(t.spinNode.isForbid=n),t.spinNode.refreshState(),!t.spinNode.curStatue||t.spinNode.curStatue!=m.SPIN_STATUS_NAME.NORMAL_SPIN||t.spinNode.isStop||t.spinNode.isForbid?t.spinEnableState=!1:t.spinEnableState=!0,u.default.pushEvent(l.EVT.THEME.BTN_SPIN_STATE,{spinAble:t.spinEnableState})},t.spinNode.refreshState=function(){cc.Tween.stopAllByTag(10086);var e=!1,o=!1;t.btnSpin.interactable=!t.spinNode.isForbid,t.spinNode.isStop?(e=!1,t.btnSpin.loadTextures(B[1],B[2],B[3],1),t.btnSpin.textPath="footer/btn_stop",t.btnSpin.textPathDis="footer/btn_stop_dis",c.setTexture(t.btnSpin.textSprite.getComponent(cc.Sprite),l.translateImage(t.btnSpin.textPath)),o=!0):t.spinNode.curStatue==m.SPIN_STATUS_NAME.NORMAL_SPIN?(e=!1,t.btnSpin.loadTextures(N[1],N[2],N[3],1),t.ctl.autoSpinCheck?(t.btnSpin.textPath="footer/btn_spin_ng",t.btnSpin.textPathDis="footer/btn_spin_ng_dis",c.setTexture(t.btnSpin.textSprite.getComponent(cc.Sprite),l.translateImage(t.btnSpin.textPath))):(t.btnSpin.textPath="footer/btn_spin_fg",t.btnSpin.textPathDis="footer/btn_spin_fg_dis",c.setTexture(t.btnSpin.textSprite.getComponent(cc.Sprite),l.translateImage(t.btnSpin.textPath)))):t.spinNode.curStatue==m.SPIN_STATUS_NAME.AUTO_SPIN&&(e=!0,t.btnSpin.loadTextures(L[1],L[2],L[3],1),t.infinitySpin?(t.btnSpin.textPath="footer/btn_stop",t.btnSpin.textPathDis="footer/btn_stop_dis",c.setTexture(t.btnSpin.textSprite.getComponent(cc.Sprite),l.translateImage(t.btnSpin.textPath)),o=!0):(t.btnSpin.textPath="footer/btn_stop_auto",t.btnSpin.textPathDis="footer/btn_stop_auto",c.setTexture(t.btnSpin.textSprite.getComponent(cc.Sprite),l.translateImage(t.btnSpin.textPath)))),o?t.btnSpin.loadTextures("footer-footer-btn_spin_red","footer-footer-btn_spin_red_clicked","footer-footer-btn_spin_red_disabled",1):t.btnSpin.loadTextures("footer-footer-btn_spin","footer-footer-btn_spin_clicked","footer-footer-btn_spin_disabled",1),t.spinNode.isForbid?c.setTexture(t.btnSpin.textSprite.getComponent(cc.Sprite),l.translateImage(t.btnSpin.textPathDis)):c.setTexture(t.btnSpin.textSprite.getComponent(cc.Sprite),l.translateImage(t.btnSpin.textPath)),t.spinNode.isForbid&&e?t.btnSpin.textSprite.position=cc.v3(0,t.positionY):e&&(t.btnSpin.textSprite.position=cc.v3(0,t.positionY)),t.spinNode.curStatue!=m.SPIN_STATUS_NAME.NORMAL_SPIN||t.spinNode.isStop||t.spinNode.isForbid?(t.btnSpin.node.stopAllActions(),t.spinSaoGuang&&(t.spinSaoGuang.node.active=!1)):(t.btnSpin.node.stopAllActions(),t.spinSaoGuang.setAnimation(0,"Spin_button",!0))},t.spinNode.changeBtnState(m.SPIN_STATUS_NAME.NORMAL_SPIN,!1,!1),t.initEvent()},t.prototype.changeBackgroundParticle=function(e){if(this.spFooterWin){var t=cc.v3(this.spFooterWin.node.position),o=this.spFooterWin.node.zIndex,n=this.spFooterWin.node.parent;this.spFooterWin.node.removeFromParent(),this.spFooterWin=e,n.addChild(this.spFooterWin.node,o),this.spFooterWin.node.setPosition(t)}},t.prototype.getValueWorldPos=function(){return c.getWorldPos(this.spFooterWin.node)},t.prototype.addWinAnimationToFooter=function(e){var t=cc.v3(this.spFooterWin.node.position),o=this.spFooterWin.node.zIndex;this.spFooterWin.node.parent.addChild(e,o),e.setPosition(t)},t.prototype.getNumberWorldPos=function(){var e=cc.v3(this.spFooterWin.node.position),t=this.spFooterWin.node.parent;return e.y=e.y-35,t.convertToWorldSpaceAR(e)},t.prototype.onExit=function(){},t.prototype.getCenterWorldPos=function(){var e=this.root.getChildByName("node_win");return e?e.parent.convertToWorldSpaceAR(e.position):cc.v3(0,0)},t.prototype.getUnderLabelWinNode=function(){return this.underLabelWinNode},t.prototype.getWinNodeWorldPosition=function(){return this.winNode.parent.convertToWorldSpaceAR(this.winNode.position)},t.prototype.showPlayHideOther=function(){this.root.getChildByName("node_win").active=!1,this.root.getChildByName("node_total_bet").active=!1,this.root.getChildByName("node_total_bet_info").active=!1,this.root.getChildByName("node_max_bet").active=!1},t.prototype.showPuzzleFooter=function(){},t.prototype.onSpin=function(e){this.btnSpin.interactable&&(e.type==cc.Node.EventType.TOUCH_START?(this.checkCanClickSpin()&&this.ctl.touchSpinBtnBegan(),this.btnSpin.getComponent(cc.Sprite).spriteFrame=this.btnSpin.getComponent(cc.Button).pressedSprite):e.type==cc.Node.EventType.TOUCH_END?(this.ctl.touchSpinBtnEnded(),this.hideMaxBetTip(),this.btnSpin.getComponent(cc.Sprite).spriteFrame=this.btnSpin.getComponent(cc.Button).normalSprite):e.type==cc.Node.EventType.TOUCH_CANCEL&&(this.ctl.touchSpinBtnCanceled(),this.btnSpin.getComponent(cc.Sprite).spriteFrame=this.btnSpin.getComponent(cc.Button).normalSprite))},t.prototype.onDownBet=function(e){if(this.btnSubBet.interactable&&!this.changedBet&&(this.subStarted||!this.ctl.touchSubBetTag))if(e.type==cc.Node.EventType.TOUCH_START)this.subStarted=!0,110038!=this.ctl.getThemeId()&&(this.btnSpin.interactable=!1,this.btnAddBet.interactable=!1,this.btnMaxBet.interactable=!1,this.ctl.touchSubBetBtnBegan(),this.hideMaxBetTip()),this.btnSubBet.getComponent(cc.Sprite).spriteFrame=this.btnSubBet.getComponent(cc.Button).pressedSprite;else if(e.type==cc.Node.EventType.TOUCH_END){if(!this.ctl.touchSubBetTag)return;if(!this.subStarted)return;if(this.subStarted=!1,this.ignoreTouchSubBetBtnOnce)return void(this.ignoreTouchSubBetBtnOnce=null);110038!=this.ctl.getThemeId()?(this.changedBet=!0,this.btnSpin.interactable=!0,this.ctl.betControl.bet!=p.default.getMaxBet()&&(this.btnMaxBet.interactable=!0),this.ctl.touchSubBetBtnEnded(),S.NetTrans.sendGamePacket("behavior",{page:"manual_change_bet_down"})):this.ctl.changeToDownBet(),this.removeUnClickLayer()}else if(e.type==cc.Node.EventType.TOUCH_CANCEL){if(!this.ctl.touchSubBetTag)return;if(!this.subStarted)return;this.subStarted=!1,110038!=this.ctl.getThemeId()&&(this.btnSpin.interactable=!0,this.btnAddBet.interactable=!0,this.ctl.betControl.bet!=p.default.getMaxBet()&&(this.btnMaxBet.interactable=!0),this.ctl.touchSubBetBtnCanceled()),this.removeUnClickLayer(),this.btnSubBet.getComponent(cc.Sprite).spriteFrame=this.btnSubBet.getComponent(cc.Button).normalSprite}},t.prototype.onUpBet=function(e){if(this.btnAddBet.interactable&&!this.changedBet&&(this.addStarted||!this.ctl.touchAddBetTag))if(e.type==cc.Node.EventType.TOUCH_START)this.addStarted=!0,110038!=this.ctl.getThemeId()&&(this.btnSpin.interactable=!1,this.btnSubBet.interactable=!1,this.btnMaxBet.interactable=!1,this.ctl.touchAddBetBtnBegan(),this.hideMaxBetTip()),this.btnAddBet.getComponent(cc.Sprite).spriteFrame=this.btnAddBet.getComponent(cc.Button).pressedSprite;else if(e.type==cc.Node.EventType.TOUCH_END){if(!this.ctl.touchAddBetTag)return;if(!this.addStarted)return;if(this.addStarted=!1,this.ignoreTouchAddBetBtn)return void(this.ignoreTouchAddBetBtn=null);110038!=this.ctl.getThemeId()?(this.changedBet=!0,this.btnSpin.interactable=!0,this.ctl.betControl.bet!=p.default.getMaxBet()&&(this.btnMaxBet.interactable=!0),this.ctl.touchAddBetBtnEnded(),S.NetTrans.sendGamePacket("behavior",{page:"manual_change_bet_up"})):this.ctl.changeToUpBet(),this.removeUnClickLayer()}else if(e.type==cc.Node.EventType.TOUCH_CANCEL){if(!this.ctl.touchAddBetTag)return;if(!this.addStarted)return;this.addStarted=!1,110038!=this.ctl.getThemeId()&&(this.btnSpin.interactable=!0,this.btnSubBet.interactable=!0,this.ctl.betControl.bet!=p.default.getMaxBet()&&(this.btnMaxBet.interactable=!0),this.ctl.touchAddBetBtnCanceled()),this.removeUnClickLayer(),this.btnAddBet.getComponent(cc.Sprite).spriteFrame=this.btnAddBet.getComponent(cc.Button).normalSprite}},t.prototype.onMaxBet=function(e){if(this.btnMaxBet.interactable&&!this.changedBet)if(e.type==cc.Node.EventType.TOUCH_START)this.maxStarted=!0,this.btnMaxBet.getComponent(cc.Sprite).spriteFrame=this.btnMaxBet.getComponent(cc.Button).pressedSprite;else if(e.type==cc.Node.EventType.TOUCH_END){if(!this.maxStarted)return;this.maxStarted=!1,this.changedBet=!0,this.ctl.changeToMaxBet(),110038==this.ctl.getThemeId()||"A"==h.default.getInstance().abType&&h.default.getInstance().isNewUser||this.createMaxBetTip(),S.NetTrans.sendGamePacket("behavior",{page:"manual_change_bet_max"}),this.btnMaxBet.getComponent(cc.Sprite).spriteFrame=this.btnMaxBet.getComponent(cc.Button).normalSprite}else if(e.type==cc.Node.EventType.TOUCH_CANCEL){if(!this.maxStarted)return;this.maxStarted=!1,this.btnMaxBet.getComponent(cc.Sprite).spriteFrame=this.btnMaxBet.getComponent(cc.Button).normalSprite}},t.prototype.initEvent=function(){this.btnSpin.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onSpin,this),this.btnSpin.node.on(cc.Node.EventType.TOUCH_START,this.onSpin,this),this.btnSpin.node.on(cc.Node.EventType.TOUCH_END,this.onSpin,this),this.btnSubBet.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onDownBet,this),this.btnSubBet.node.on(cc.Node.EventType.TOUCH_START,this.onDownBet,this),this.btnSubBet.node.on(cc.Node.EventType.TOUCH_END,this.onDownBet,this),this.btnAddBet.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onUpBet,this),this.btnAddBet.node.on(cc.Node.EventType.TOUCH_START,this.onUpBet,this),this.btnAddBet.node.on(cc.Node.EventType.TOUCH_END,this.onUpBet,this),this.btnMaxBet.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onMaxBet,this),this.btnMaxBet.node.on(cc.Node.EventType.TOUCH_START,this.onMaxBet,this),this.btnMaxBet.node.on(cc.Node.EventType.TOUCH_END,this.onMaxBet,this),u.default.registerEvent(l.EVT.THEME.MIMIC_SPIN,this._mimicSpin,this),u.default.registerEvent(l.EVT.DAILY_MISSION.FOOTER_ICON_COLLECT,this.performDMCollect,this),u.default.registerEvent(l.EVT.DAILY_MISSION.FOOTER_NEXT_MISSION,this.showNextTips,this)},t.prototype.createUnClickLayer=function(){this.unClickLayer||(this.unClickLayer=new cc.Node,this.node.addChild(this.unClickLayer,-1),this.unClickLayer.width=cc.winSize.width,this.unClickLayer.height=cc.winSize.height,this.unClickLayer.addComponent(cc.BlockInputEvents))},t.prototype.removeUnClickLayer=function(){this.unClickLayer&&(this.unClickLayer.removeFromParent(),this.unClickLayer=null)},t.prototype._mimicSpin=function(){this.checkCanClickSpin()&&(this.ctl.touchSpinBtnBegan(),this.ctl.touchSpinBtnEnded(),this.hideMaxBetTip())},t.prototype.getTurboStatus=function(){return this.turboFlag},t.prototype.forceSetTurboStatus=function(e){this.turboFlag=e},t.prototype.setTurboVisible=function(e){this.canTurbo=e},t.prototype.setTurboStatus=function(e){this.turboFlag=e},t.prototype.clickSpinOnce=function(){var e=this;e.checkCanClickSpin()&&(e.ctl.touchSpinBtnBegan(),e.btnSpin.loadTextureNormal(N[2],1),cc.tween(e.node).delay(.3).call(function(){e.ctl.touchSpinBtnEnded(),e.btnSpin.loadTextureNormal(N[1],1)}).start())},t.prototype.updateSpinCount=function(e){e<-200&&(e=-2),this.autoCount=e,this.spinCountLabel&&(this.spinCountLabel.string=e)},t.prototype.showAutoCountBoard=function(e){this.spinCountBoard.active=e},t.prototype.checkAutoSpin=function(e){if(void 0===e&&(e=null),this.ctl.getGameType()==s.THEME_GAME_TYPE.MAIN){var t=this.autoCount;return e||(this.autoCount=this.autoCount-1,this.updateSpinCount(this.autoCount)),t>=0&&(this.autoCount<=0||t-1<=0)?(this.ctl.enableAuto(!1),void this.stopAuto()):h.default.getInstance().getCoins()<this.ctl.getCurTotalBet()?(this.ctl.enableAuto(!1),void this.stopAuto()):void 0}},t.prototype.stopAuto=function(){this.autoCount=0,this.isAuto=!1,this.updateSpinCount(this.autoCount),this.showAutoCountBoard(!1),this.setTurboStatus(!1),this.infinitySpin=!1},t.prototype.onClickAuto=function(e,t){var o,n=((o={})[20]={count:20,showAutoCountBoard:!0},o[50]={count:50,showAutoCountBoard:!0},o[100]={count:100,showAutoCountBoard:!0},o[500]={count:500,showAutoCountBoard:!0},o.fast={count:-2,showAutoCountBoard:!1,isFast:!0,isInfinity:!0},o.infinity={count:-2,showAutoCountBoard:!1,isInfinity:!0},o)[t];this.isAuto=!0,this.showAutoCountBoard(1==n.showAutoCountBoard),this.updateSpinCount(n.count),this.ctl.enableAuto(!0),n.isFast&&this.setTurboStatus(!0),n.isInfinity&&(this.infinitySpin=!0,this.showStop(!0)),this.hideAutoBoard()},t.prototype.loadAutoBtn=function(){},t.prototype.onTouchAutoBack=function(e){e.type==cc.Node.EventType.TOUCH_END&&this.hideAutoBoard()},t.prototype.showAutoBoard=function(){var e=this;e.autoNode.node.active=!0,e.autoNode.node.getChildByName("clipping").zIndex=1,e.autoNode.node.getChildByName("clipping").getChildByName("board").stopAllActions(),e.autoNode.node.getChildByName("clipping").getChildByName("board").position=cc.v3(0,-320),cc.tween(e.autoNode.node.getChildByName("clipping").getChildByName("board")).to(.3,{position:cc.v3(0,0)}).call(function(){e.autoNode.touchNode=new cc.Node,e.autoNode.touchNode.zIndex=0,e.autoNode.touchNode.width=3e3,e.autoNode.touchNode.height=2e3,e.autoNode.touchNode.on(cc.Node.EventType.TOUCH_START,e.onTouchAutoBack,e),e.autoNode.touchNode.on(cc.Node.EventType.TOUCH_MOVE,e.onTouchAutoBack,e),e.autoNode.touchNode.on(cc.Node.EventType.TOUCH_CANCEL,e.onTouchAutoBack,e),e.autoNode.touchNode.on(cc.Node.EventType.TOUCH_END,e.onTouchAutoBack,e),e.autoNode.node.addChild(e.autoNode.touchNode)}).start()},t.prototype.hideAutoBoard=function(){this.autoNode.node.active=!1,this.autoNode.node.getChildByName("clipping").getChildByName("board").stopAllActions(),this.autoNode.node.getChildByName("clipping").getChildByName("board").position=cc.v3(0,-160),this.autoNode.touchNode&&(this.autoNode.touchNode.removeFromParent(!0),this.autoNode.touchNode.off(cc.Node.EventType.TOUCH_START,this.onTouchAutoBack,this),this.autoNode.touchNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchAutoBack,this),this.autoNode.touchNode.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchAutoBack,this),this.autoNode.touchNode.off(cc.Node.EventType.TOUCH_END,this.onTouchAutoBack,this))},t.prototype.setBetInfo=function(e){u.default.pushEvent(l.EVENTNAMES.EVT_CHANGE_TOTAL_BET,e),e=e<0?0:g.comma_value_smart_version2(e,1),this.labelTotalBet.string=e,this.labelTotalBet.overflow=cc.Label.Overflow.SHRINK,this.labelTotalBet.node.width=180,y.IN_HERO_WISH_GAME_THEME||this.ctl.themeName.HideBetLabel},t.prototype.startSpinCountDown=function(e){var t=this;t.spinCountDownLabel.string=Math.floor(e)+"",t.spinCountDownNode.startTime=Date.now(),t.spinCountDownNode.totalValue=e,cc.tween(t.spinCountDownNode).repeatForever(cc.tween().delay(.1).call(function(){var e=Date.now(),o=t.spinCountDownNode.totalValue-(e-t.spinCountDownNode.startTime)/1e3;o<=0&&(o=0,t.stopSpinCountDown()),t.spinCountDownLabel.string=Math.ceil(o)+""})).start(),t.spinCountDownNode.active=!0},t.prototype.stopSpinCountDown=function(){this.spinCountDownNode.stopAllActions(),this.spinCountDownNode.active=!1,this.spinCountDownLabel.string=""},t.prototype.setLabelDescription=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null)},t.prototype.resetTotalWin=function(){this.labelWin&&this.labelWin.nrStartRoll&&(this.labelWin.nrStopRoll(),this.labelWin.nrSetCurValue(0))},t.prototype.flushTotalWin=function(){this.labelWin&&this.labelWin.nrStopRoll&&this.labelWin.nrStopRoll(!0)},t.prototype.updateTotalWin=function(e,t){if(this.labelWin){this.flushTotalWin(),t=t||0;var o=this.labelWin.nrGetCurValue(),n=o+e;t>0?this.labelWin.nrStartRoll(o,n,t):this.labelWin.nrSetCurValue(n)}},t.prototype.setTotalWinNum=function(e){this.labelWin&&(this.labelWin.nrStopRoll(),this.labelWin.string=c.num_2_str(e))},t.prototype.getTotalWinNum=function(){return this.labelWin&&this.labelWin.string},t.prototype.getTotalWinNumValue=function(){return this.labelWin&&this.labelWin.nrGetCurValue()},t.prototype.getTotalWinNumEndValue=function(){return this.labelWin&&this.labelWin.nrGetEndValue()},t.prototype.showAverageBet=function(e,t){void 0===t&&(t=null)},t.prototype.showBasePrizeBet=function(){},t.prototype.showHeroGameBet=function(){},t.prototype.setMaxBetBtnEnable=function(e,t){void 0===t&&(t=!1),t?this.ctl.subBetRollingStart||this.ctl.addBetRollingStart||(this.btnAddBet.interactable=!1):(this.maxBetTag=e,this.ctl.subBetRollingStart||this.ctl.addBetRollingStart||(this.btnAddBet.interactable=!0)),this.ctl.subBetRollingStart||this.ctl.addBetRollingStart||(this.btnMaxBet.interactable=e)},t.prototype.setMaxBetState=function(e){this.btnMaxBet.setMaxState(e)},t.prototype.setMinBetBtnEnable=function(e,t){void 0===t&&(t=!1),t?this.ctl.subBetRollingStart||this.ctl.addBetRollingStart||(this.btnSubBet.interactable=!1):(this.minBetTag=e,this.ctl.subBetRollingStart||this.ctl.addBetRollingStart||(this.btnSubBet.interactable=!0))},t.prototype.setPaytableBtnEnable=function(){},t.prototype.getOtherBtnsEnableState=function(){return this.otherBtnsEnableState},t.prototype.enableOtherBtns=function(e){void 0===e&&(e=null),this.otherBtnsEnableState=e,e?(this.setMaxBetBtnEnable(this.maxBetTag),this.setMinBetBtnEnable(this.minBetTag)):(this.setMaxBetBtnEnable(!1,!0),this.setMinBetBtnEnable(!1,!0))},t.prototype.checkInFreeSpin=function(){return this.isFreeSpin},t.prototype.checkCanClickSpin=function(){return!this.spinNode.isForbid},t.prototype.setTouchEnabled=function(e){this.btnSpin.interactable=!!e},t.prototype.enableAuto=function(e){e?(this.spinNode.changeBtnState(m.SPIN_STATUS_NAME.AUTO_SPIN,"ignore","ignore"),this.btnSpin.textSprite.position=cc.v3(0,this.positionY)):this.spinNode.changeBtnState(m.SPIN_STATUS_NAME.NORMAL_SPIN,"ignore","ignore")},t.prototype.onSpinStart=function(e,t){this.disableStopAndOtherBtns(e,t),this.checkInFreeSpin()||this.setLabelDescription("GoodLuck")},t.prototype.setStopBtn=function(){this.spinNode.changeBtnState("ignore",!0,!1)},t.prototype.onStop=function(){this.spinNode.changeBtnState("ignore",!1,!0)},t.prototype.setSpinBtn=function(){this.ctl.autoSpinCheck&&this.canTurbo||(this.spinCountBoard.active=!1),this.spinNode.changeBtnState(m.SPIN_STATUS_NAME.NORMAL_SPIN,!1,!1)},t.prototype.setAutoSpinBtn=function(){this.spinCountBoard.active=this.isAuto&&!this.infinitySpin&&this.ctl.autoSpinCheck,this.spinNode.changeBtnState(m.SPIN_STATUS_NAME.AUTO_SPIN,!1,!1)},t.prototype.delayEnableSpin=function(e){var t=this;cc.Tween.stopAllByTag(10086),cc.tween(t.node).tag(10086).delay(e).call(function(){t.enableSpin()}).start()},t.prototype.getSpinEnableState=function(){return this.spinEnableState},t.prototype.enableSpin=function(){this.ctl.touchSpinTag||(this.spinNode.changeBtnState("ignore",!1,!1),(this.ctl.subBetRollingStart||this.ctl.addBetRollingStart)&&(this.btnSpin.interactable=!1))},t.prototype.enableSpinAndOtherBtns=function(e,t,o){void 0===e&&(e=null),void 0===t&&(t=null),void 0===o&&(o=null),110038==this.ctl.getThemeId()?e&&t&&this.enableSpin():this.enableSpin(),this.ctl.isSpinning()||(110038==this.ctl.getThemeId()?e&&t&&((this.ctl.theme||{}).gameLayer||{}).judgeCanEnableOthers&&this.ctl.theme.gameLayer.judgeCanEnableOthers():o?this.enableOtherBtns(!1):this.enableOtherBtns(!0))},t.prototype.disableSpin=function(){cc.Tween.stopAllByTag(10086),this.spinNode.changeBtnState("ignore",!1,!0)},t.prototype.disableSpinAndOtherBtns=function(){this.disableSpin(),this.enableOtherBtns(!1)},t.prototype.disableStopAndOtherBtns=function(e,t){this.showStop(e,t),this.enableOtherBtns(!1)},t.prototype.showStop=function(e,t){void 0===t&&(t=!1),t||e?this.spinNode.changeBtnState("ignore",!1,!0):this.disableStop()},t.prototype.enableStop=function(){this.spinNode.changeBtnState("ignore",!0,!1)},t.prototype.disableStop=function(){this.spinNode.changeBtnState("ignore",!0,!0)},t.prototype.addMaxBetFlash=function(){var e=this;e.maxBetFlash||(e.maxBetFlash=c.createAni(E.Common+"Slot_Bet_max").getComponent(sp.Skeleton),e.maxBetFlash.node.active=!0,e.maxBetFlash.node.zIndex=100,e.root.getChildByName("node_total_bet_info").addChild(e.maxBetFlash.node)),e.maxBetFlash.clearTracks(),e.maxBetFlash.node.setPosition(e.root.getChildByName("node_total_bet_info").getChildByName("total_label").position.x,e.totalBetNode.getChildByName("bg_total_bet_1").position.y),cc.tween(e.maxBetFlash).call(function(){e.maxBetFlash.setAnimation(0,"bet_max_heng",!1)}).start()},t.prototype.canToAutoSpin=function(){return this.spinNode.curStatue==m.SPIN_STATUS_NAME.NORMAL_SPIN&&!this.isFreeSpinLayer},t.prototype.changeLanguage=function(){},t.prototype.checkFlameBetTip=function(){},t.prototype.checkIconStatus=function(){},t.prototype.refreshFlameData=function(){},t.prototype.refreshDailyMission=function(){},t.prototype.performDMCollect=function(){},t.prototype.showNextTips=function(){},t.prototype.onDMAllDone=function(){},t.prototype.refreshFlame=function(){},t.prototype.hideClubPointBetTip=function(){},t.prototype.showClubPointBetTip=function(){},t.prototype.freshJwLootBetTip=function(e){void 0===e&&(e=0)},t.prototype.showJwLootBetTip=function(){},t.prototype.showPetBetTip=function(){},t.prototype.showAdNode=function(){},t.prototype.showDMPromotionDialog=function(){},t.prototype.DMDialogHide=function(){},t.prototype.showDMUnlockTip=function(){},t.prototype.showDMFinishTip=function(){},t.prototype.createMaxBetTip=function(){},t.prototype.hideMaxBetTip=function(){},t.prototype.hideTotalBetNode=function(){this.totalBetNode&&(this.totalBetNodePos=cc.v3(this.totalBetNode.position),this.totalBetNodeHidePos=cc.v3(this.totalBetNodePos.x,this.totalBetNodePos.y-200),cc.tween(this.totalBetNode).to(.5,{position:this.totalBetNodeHidePos}).start(),cc.tween(this.root.getChildByName("node_total_bet_info")).to(.5,{position:this.totalBetNodeHidePos}).start())},t.prototype.showTotalBetNode=function(){this.totalBetNode&&(this.totalBetNodePos=cc.v3(this.totalBetNode.position),this.totalBetNodeShowPos=cc.v3(this.totalBetNodePos.x,this.totalBetNodePos.y+200),cc.tween(this.totalBetNode).to(.5,{position:this.totalBetNodeShowPos}).start(),cc.tween(this.root.getChildByName("node_total_bet_info")).to(.5,{position:this.totalBetNodeShowPos}).start())},t.prototype.hide=function(){this.node.active=!1},t.prototype.show=function(){this.node.active=!0},a([v(sp.Skeleton)],t.prototype,"spFooterWin",void 0),a([v(cc.Label)],t.prototype,"labelTotalBet",void 0),a([v(_.default)],t.prototype,"btnMaxBet",void 0),a([v(r.default)],t.prototype,"labelWin",void 0),a([v(f.default)],t.prototype,"autoNode",void 0),a([v(m.default)],t.prototype,"spinNode",void 0),a([v(cc.Label)],t.prototype,"spinCountLabel",void 0),a([v(d.default)],t.prototype,"btnSpin",void 0),a([v(sp.Skeleton)],t.prototype,"spinSaoGuang",void 0),a([C],t)}(cc.Component);o.default=P,cc._RF.pop()},{"../Common/NetTrans":"NetTrans","../Components/Footer/CompoAutoNode":"CompoAutoNode","../Components/Footer/CompoMaxBetButton":"CompoMaxBetButton","../Components/Footer/CompoSpinButton":"CompoSpinButton","../Components/Footer/CompoSpinNode":"CompoSpinNode","../Game/Common":"Common","../Game/Global":"Global","../init":"init","./BetControl":"BetControl","./Common_Base":"Common_Base","./EventCenter":"EventCenter","./LabelNumRoll":"LabelNumRoll","./ThemeControlNew":"ThemeControlNew","./Tools":"Tools","./User":"User"}],GameLayer:[function(e,t,o){"use strict";cc._RF.push(t,"325e6AiM2VJ4J8BW9U4SAIo","GameLayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/BetControl"),l=e("../Base/Common_Base"),s=e("../Base/EventCenter"),c=e("../Base/Tools"),p=e("../Base/User"),u=e("../Components/ClippingNode"),h=e("./Common"),d=e("./Enum"),m=e("./Global"),f=m.Global.distanceX,_=m.Global.distanceY,y=m.Global.GameTypePrivate,g=m.Global.performTimeList,T=m.Global.ResImagePath,S=m.Global.ResSpinePath,E=e("./GoldTiger"),b=e("./InterludeNode"),C=e("./JackpotLayer"),v=e("./MapTower"),N=e("./MusicManager"),L=e("./PopOut"),B=e("./SpinLayer"),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshBGSpinTimes=null,t.reduceBGSpinTimes=null,t.resetBGSpinTimes=null,t.hideSelf=null,t}return i(t,e),t}(cc.Node),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshFGSpinTimes=null,t}return i(t,e),t}(cc.Node),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getNowIndex=null,t.getHeadPos=null,t.getBigReel=null,t.performScratchAndPush=null,t.performHeadJump=null,t}return i(t,e),t}(cc.Node),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.light=null,t.dark=null,t.init=null,t.getStatus=null,t.state=null,t.index=0,t}return i(t,e),t}(sp.Skeleton),R=cc._decorator,O=R.ccclass,I=(R.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TimerCallGroupID="GameLayer",t.machineType=!1,t.theme=null,t.spinLayer=null,t.background={NG:null,FG:null,BG:null},t.FGSpinTimesBoard=null,t.BGSpinTimesBoard=null,t.mapTower=null,t.jackpotLayer=null,t.interludeNode=null,t.logo=null,t.backBlackNode=null,t.gameFeverNode=null,t.gameFeverTipNode=null,t.rollingFeatureList=[],t.rollingFeatureDisableStopFlag=null,t.GameTypePrivate=null,t.bgScale=1,t.layerScale=1,t.screenType="",t.distanceYToHeader=0,t.distanceYToFooter=0,t.moveDistance=0,t.createDone=!1,t.extendSpin=!1,t.isExpecting=!1,t.isFakeSpinning=!1,t.freeGameLeaving=!1,t.freeSpinIndex=0,t.freeSpinNum=0,t.bonusLeftSpinTimes=0,t.bonusSpinIndex=0,t.bonusSpinNum=0,t.receivedJPData=!1,t.cancelEnableStop=!1,t.centerX=0,t.centerY=0,t.cancelEnableOtherBtns=void 0,t.cancelEnableSpinAfterReconnect=void 0,t.cancelEnableSpinAfterNGPerformOver=void 0,t.ngPerformOverNotSpin=void 0,t.processFreeGameResult=void 0,t.freeGameTotalRound=void 0,t.currentFreeGameResultLength=void 0,t.shouldRequestFreeGameChoice=void 0,t.judgeCanEnableOthers=void 0,t.fgReconnect=void 0,t.shouldChoice=void 0,t.mapFgReconnectWithoutExit=void 0,t.mapBGReconnectWithoutExit=void 0,t}return i(t,e),t.prototype.init=function(e){this.theme=e,this.machineType=!1,this.spinLayer=(new cc.Node).addComponent(B.default),this.node.addChild(this.spinLayer.node,2),this.setGameTypePrivate(y.NG),this.createGameFeverNode(),this.jackpotLayer=(new cc.Node).addComponent(C.default),this.jackpotLayer.node.scale=1,this.spinLayer.spinTable.node.addChild(this.jackpotLayer.node,0),this.jackpotLayer.assemble(),this.interludeNode=(new cc.Node).addComponent(b.default),this.interludeNode.node.position=cc.v3(this.centerX,this.centerY-this.moveDistance/this.layerScale),this.interludeNode.node.setScale(1/this.layerScale),this.interludeNode.node.zIndex=1e4,this.node.addChild(this.interludeNode.node,1e4);var t=new cc.Node;if(this.machineType){var o=c.addImage(T.NG+"background_NG");t.addChild(o)}else{var n=c.createAni(S.NG+"ngbg").getComponent(sp.Skeleton);t.addChild(n.node),cc.tween(t).call(function(){n.setAnimation(0,"animation",!0)}).start()}t.position=cc.v3(this.centerX,this.centerY),this.theme.addChild(t,-1),c.setColorWithFather(t),t.opacity=255,this.background.NG=t;var i=new cc.Node;if(this.machineType){var a=c.addImage(T.FG+"background_FG");i.addChild(a)}else{var r=c.createAni(S.FG+"Pick_bg").getComponent(sp.Skeleton);cc.tween(r.node).call(function(){r.setAnimation(0,"pick_bg",!0)}).start(),i.addChild(r.node)}i.position=cc.v3(this.centerX,this.centerY),this.theme.addChild(i,-1),c.setColorWithFather(i),i.opacity=0,this.background.FG=i;var p=new cc.Node;if(this.machineType){var u=c.addImage(T.BG+"background_BG");p.addChild(u)}else{var h=c.createAni(S.BG+"Respin_bg").getComponent(sp.Skeleton);cc.tween(h.node).call(function(){h.setAnimation(0,"Respin_bg",!0)}).start(),p.addChild(h.node)}if(p.position=cc.v3(this.centerX,this.centerY),this.theme.addChild(p,-1),c.setColorWithFather(p),p.opacity=0,this.background.BG=p,this.bgScale=1,"wide"==this.screenType){var d=Math.max(1280/1560,1);i.setScale(d),t.setScale(d),p.setScale(d),this.bgScale=d}else"long"==this.screenType&&(this.bgScale=1);return l.default.addCallFunc(function(){var e;(e=c.createQueue().deQueue())&&e()},.5,null,this),s.default.registerEvent(l.EVT.THEME.MIMIC_SPIN,this.tableClick,this),!0},t.prototype.getCenterPos=function(){return cc.v3(this.centerX,this.centerY)},t.prototype.getStaticCenterPos=function(){return this.getStaticPos(this.getCenterPos())},t.prototype.getStaticPos=function(e){var t=e.x-this.centerX,o=e.y-this.centerY;return cc.v3(this.centerX+t/this.layerScale,this.centerY+(o-this.moveDistance)/this.layerScale)},t.prototype.createLogo=function(){var e=this;e.logo=c.createAni(S.NG+"NG_logo").getComponent(sp.Skeleton),cc.tween(e.logo.node).call(function(){e.logo.setAnimation(0,"logo_EN",!0)}).start(),e.logo.node.setScale(1.5),e.logo.node.position=cc.v3(e.getStaticPos(cc.v3(e.centerX,e.centerY+570))),e.node.addChild(e.logo.node,6)},t.prototype.hideLogo=function(){c.checkNodeExist(this.logo)&&(this.logo.node.active=!1)},t.prototype.showLogo=function(){c.checkNodeExist(this.logo)&&(this.logo.node.active=!0)},t.prototype.hideGameFeverNode=function(){c.checkNodeExist(this.gameFeverNode)&&(this.gameFeverNode.active=!1)},t.prototype.showGameFeverNode=function(){c.checkNodeExist(this.gameFeverNode)&&(this.gameFeverNode.active=!0)},t.prototype.createGameFeverNode=function(){},t.prototype.createGameFeverTip=function(){},t.prototype.deleteGameFeverTip=function(){c.checkNodeExist(this.gameFeverTipNode)&&this.gameFeverTipNode.removeFromParent()},t.prototype.showBackBlackNode=function(){this.hideBackBlackNode(),this.backBlackNode=c.createBlackLayer({fatherNode:this.node,zOrder:0,time:.5,opacity:180})},t.prototype.hideBackBlackNode=function(){c.checkNodeExist(this.backBlackNode)&&(c.deleteBlackLayer(this.backBlackNode,.5),this.backBlackNode=null)},t.prototype.createPuzzleNode=function(){},t.prototype.changeBackgroundTo=function(e){for(var t in e={NG:"NG",FG:"FG",BG:"BG",SFG:"SFG"}[e],this.background){var o=this.background[t];o.stopAllActions(),t==e?cc.tween(o).to(.3,{opacity:255}).start():cc.tween(o).to(.3,{opacity:0}).start()}},t.prototype.setGameType=function(e){E.default.theme.ctl.setGameType(e)},t.prototype.setGameTypePrivate=function(e){this.GameTypePrivate=e,E.default.RowNum=E.default.getRowNum(this.getGameTypePrivate()),c.checkNodeExist(this.spinLayer)&&this.spinLayer.changeTouchSpinConfig()},t.prototype.getGameTypePrivate=function(){return this.GameTypePrivate},t.prototype.onGameExit=function(){for(var e in s.default.removeEvent(l.EVT.THEME.MIMIC_SPIN,this.tableClick,this),l.default.clearGroup(this),l.default.clearGroup(this.spinLayer),l.default.clearGroup(this.spinLayer.spinTable),l.default.clearGroup(this.spinLayer.effectLayer),this.background){var t=this.background[e];c.checkNodeExist(t)&&t.removeFromParent()}this.spinLayer.effectLayer.lineAnimator.destruct(),E.default.QuickStartReelOrders=null,E.default.setBetState(0),E.default.theme=null},t.prototype.preloadFgImgRes=function(e){e&&e()},t.prototype.unloadFgImgRes=function(){},t.prototype.preloadBgImgRes=function(){},t.prototype.unloadBgImgRes=function(){},t.prototype.preloadWheelImgRes=function(){},t.prototype.unloadWheelImgRes=function(){},t.prototype.fakeSpin=function(){this.spinLayer.spinTable.fakeSpin()},t.prototype.resetRollingFeature=function(){this.rollingFeatureList=[],this.rollingFeatureDisableStopFlag=null},t.prototype.insertRollingFeature=function(e){this.rollingFeatureList.push(e)},t.prototype.beginRollingFeature=function(){this.rollingFeatureList.length>0&&this.performNextRollingFeature()},t.prototype.performNextRollingFeature=function(){(this.rollingFeatureList||[]).length>0?(this.rollingFeatureList[0](),this.rollingFeatureList.splice(0,1)):this.rollingFeatureDisableStopFlag||E.default.theme.ctl.enableStop()},t.prototype.showAwardNotice=function(){},t.prototype.tableClick=function(){},t.prototype.expectStart=function(){this.isExpecting=!0,E.default.theme.ctl.disableSpinAndOtherBtns()},t.prototype.expectEnd=function(){this.isExpecting=null},t.prototype.setBackgroundColor=function(e,t){var o=c.registerTag("tintBackground");for(var n in this.background){var i=this.background[n];cc.Tween.stopAllByTag(o),cc.tween(i).tag(o).to(t,{color:e}).start()}},t.prototype.playInterlude=function(e){return this.interludeNode.createInterlude(e)},t.prototype.deleteInterlude=function(e){return this.interludeNode.deleteInterlude(e)},t.prototype.createMapTower=function(e,t){void 0===t&&(t=null);var o=this;if(c.checkNodeExist(o.mapTower))o.mapTower.active=!0;else{var n=cc.v3(528,154),i=cc.v3(528,-90);o.mapTower=new w,o.mapTower.position=cc.v3(o.getCenterPos());var a=t||0,r=cc.v3(0,_/2*.84),l=cc.v3(0,.7*(_/2+_)),s=f,p=_,d=(new cc.Node).addComponent(v.default);d.init({reelOrder:e,headIndex:a+1,distanceY:_,allSymbolNum:2}),d.node.setScale(.84);var m=new u.default;m.AddStencil(.84*s,.84*p,cc.v3(0,0)),o.mapTower.addChild(m,2),m.AddChild(d.node),m.position=n,d.node.position=r,s=f,p=3*_;var y=(new cc.Node).addComponent(v.default);y.init({reelOrder:e,headIndex:a+2,distanceY:_,allSymbolNum:4}),y.node.setScale(.7),y.node.position=l;var E=new u.default;E.AddStencil(.7*s,.7*p,cc.v3(0,0)),o.mapTower.addChild(E,1),E.AddChild(y.node),E.position=i;var b=c.addImage(T.BG+"tower_body");b.position=cc.v3(i),o.mapTower.addChild(b,0);var C=c.addImage(T.BG+"tower_head");C.position=cc.v3(n),o.mapTower.addChild(C,0),o.mapTower.getNowIndex=function(){return a},o.mapTower.getHeadPos=function(){return n.add(o.getCenterPos())},o.mapTower.getBigReel=function(){return e},o.mapTower.performScratchAndPush=function(){a+=1,d.performSymbolScratch(1,g.scratchFadeOutTime),cc.tween(o.mapTower).delay(g.scratchFadeOutTime).call(function(){d.rollNext(),y.rollNext()}).delay(g.towerMoveTime).call(function(){c.playEffect(h.Common.s_sound.MapUp),o.mapTower.performHeadJump()}).start()},o.mapTower.performHeadJump=function(){var e=c.createAni(S.BG+"SuperRespin").getComponent(sp.Skeleton);e.node.position=cc.v3(n),o.mapTower.addChild(e.node,0),cc.tween(e.node).call(function(){e.setAnimation(0,"jinbiluoxia",!1)}).delay(2).removeSelf().start(),cc.tween(m).to(2*g.towerHeadJumpTime/3,{scale:1.3}).to(1*g.towerHeadJumpTime/3,{scale:1}).start()},o.spinLayer.spinTable.node.addChild(o.mapTower,10)}},t.prototype.deleteMapTower=function(){c.checkNodeExist(this.mapTower)&&(this.mapTower.removeFromParent(),this.mapTower=null)},t.prototype.createBGSpinTimesBoard=function(){var e=this;e.deleteBGSpinTimesBoard(),e.BGSpinTimesBoard=new P,e.BGSpinTimesBoard.position=cc.v3(e.centerX,e.centerY+217),e.spinLayer.spinTable.node.addChild(e.BGSpinTimesBoard,5);var t=c.addImage(T.BG+"collect_bar");t.position=cc.v3(0,0),e.BGSpinTimesBoard.addChild(t,0);var o=null;(o=e.bonusLeftSpinTimes>1?c.addImage(c.transPng("bg_times")):c.addImage(c.transPng("bg_time"))).position=cc.v3(-78,0),e.BGSpinTimesBoard.addChild(o,1);for(var n=[cc.v3(141,0),cc.v3(187,0),cc.v3(233,0)],i=[],a=c.createAni(S.BG+"Respin_jishupai").getComponent(sp.Skeleton),r=1;r<=3;r++){var l=(new cc.Node).addComponent(G);c.copyAni(l,a),l.state=0,l.index=r,l.light=function(){0==this.state&&(this.state=1,this.clearTrack(0),this.clearTracks(),cc.tween(this.node).delay(.2).call(function(){this.setAnimation(0,"chuxian",!1),this.addAnimation(0,"daiji",!0)}.bind(this)).start())}.bind(l),l.dark=function(){1==this.state&&(this.state=0,this.clearTrack(0),this.clearTracks(),this.setAnimation(0,"xiaoshi",!1))}.bind(l),l.init=function(e){this.state=e,0==this.state||1==this.state&&(this.clearTrack(0),this.clearTracks(),this.setAnimation(0,"daiji",!0))}.bind(l),l.getStatus=function(){return this.state}.bind(l),l.init(l.state),l.node.position=n[r-1].add(cc.v3(0,5));var s=c.addImage(T.BG+"collect_hole");s.position=cc.v3(n[r-1]),e.BGSpinTimesBoard.addChild(s,2),e.BGSpinTimesBoard.addChild(l.node,2),i[r-1]=l}var p=3;e.BGSpinTimesBoard.refreshBGSpinTimes=function(e){p=e;for(var t=1;t<=3;t++)t>p?i[t-1].init(0):i[t-1].init(1)},e.BGSpinTimesBoard.reduceBGSpinTimes=function(){if(e.bonusLeftSpinTimes=e.bonusLeftSpinTimes-1,p>0){c.playEffect(h.Common.s_sound.RespinSubtract),p-=1;for(var t=1;t<=3;t++)t>p?i[t-1].dark():i[t-1].light()}else c.showErrorPop("BGSpinTimesBoard has no star to spin")},e.BGSpinTimesBoard.resetBGSpinTimes=function(){e.bonusLeftSpinTimes=3;var t=!1;if(3!=p){t=!0,p=3;for(var o=1;o<=3;o++)i[o-1].light()}return t},c.setColorWithFather(e.BGSpinTimesBoard),e.BGSpinTimesBoard.hideSelf=function(){cc.tween(e.BGSpinTimesBoard).to(.5,{opacity:0}).start()}},t.prototype.deleteBGSpinTimesBoard=function(){c.checkNodeExist(this.BGSpinTimesBoard)&&this.BGSpinTimesBoard.removeFromParent()},t.prototype.refreshBGSpinTimes=function(e){this.BGSpinTimesBoard.refreshBGSpinTimes(e)},t.prototype.reduceBGSpinTimes=function(){this.BGSpinTimesBoard.reduceBGSpinTimes()},t.prototype.resetBGSpinTimes=function(){return this.BGSpinTimesBoard.resetBGSpinTimes()},t.prototype.refreshFGSpinTimes=function(e,t){this.FGSpinTimesBoard.refreshFGSpinTimes(e,t)},t.prototype.createFGSpinTimesBoard=function(){this.deleteFGSpinTimesBoard(),this.FGSpinTimesBoard=new A,this.FGSpinTimesBoard.position=cc.v3(this.centerX,this.centerY+-254+(this.distanceYToFooter-this.moveDistance)/this.layerScale),this.node.addChild(this.FGSpinTimesBoard,6);var e=c.addImage(T.FG+"fgCountBoard");this.FGSpinTimesBoard.addChild(e);var t=[],o=c.addImage(l.translateImage("free_game"));t.push(o);var n=c.createFont("fg_num");n.string=this.freeSpinIndex+"/"+this.freeSpinNum,t.push(n);var i=c.getHorizontalNode(t,10);i.position=cc.v3(0,0),this.FGSpinTimesBoard.addChild(i),this.FGSpinTimesBoard.refreshFGSpinTimes=function(e,t){n.string=e+"/"+t}},t.prototype.deleteFGSpinTimesBoard=function(){c.checkNodeExist(this.FGSpinTimesBoard)&&this.FGSpinTimesBoard.removeFromParent()},t.prototype.changeViewToBG=function(e){void 0===e&&(e=null),this.changeBackgroundTo("BG"),this.hideGameFeverNode(),this.spinLayer.spinTable.node.active=!0,this.jackpotLayer.updateJPState(),this.spinLayer.spinTable.saveTable(),this.spinLayer.spinTable.changeTableToBG(),this.createBGSpinTimesBoard(),this.refreshBGSpinTimes(this.bonusLeftSpinTimes),this.getGameTypePrivate()==y.BG_MAP&&(this.createMapTower(this.spinLayer.effectLayer.spinResult.rocket_reel_long),E.default.theme.ctl.footer.showAverageBet(!0,E.default.theme.avg_bet||123),this.createGameFeverTip(e))},t.prototype.changeViewToNGFromBG=function(){this.changeBackgroundTo("NG"),this.showGameFeverNode(),this.jackpotLayer.updateJPState(),this.spinLayer.spinTable.changeTableToNG(),this.spinLayer.spinTable.loadTable(),this.deleteBGSpinTimesBoard(),this.deleteMapTower(),this.deleteGameFeverTip(),E.default.theme.ctl.footer.showAverageBet(!1)},t.prototype.changeViewToFG=function(){this.changeBackgroundTo("FG"),this.hideGameFeverNode(),this.jackpotLayer.updateJPState(),this.spinLayer.spinTable.node.active=!1},t.prototype.changeViewToNGFromFG=function(){this.changeBackgroundTo("NG"),this.showGameFeverNode(),this.jackpotLayer.updateJPState(),this.spinLayer.spinTable.node.active=!0},t.prototype.FGReconnect=function(e){var t=this,o=Number(e.fg_bet),n=Number(e.all_total_win);if(E.default.theme.ctl.getCurBet()==o)E.default.addBetState();else if(!E.default.theme.ctl.betControl.changeToBet(o))return c.showErrorPop(["fg_bet=",o,"betList=",r.default.getBetList()]),E.default.addBetState(),E.default.reconnectFlagList.FG=!1,void E.default.theme.ctl.enableSpinAndOtherBtns();E.default.theme.ctl.footer.flushTotalWin(),E.default.theme.ctl.footer.updateTotalWin(n),E.default.theme.ctl.setCacheRet(["randomDataToEscapeNG"]),c.funcDelay(function(){var o;(o=t).spinLayer.stateChangeTo(d.SpinLayerState.Show),o.spinLayer.effectLayer.FGReconnect(e)},0)},t.prototype.BG_MAPReconnect=function(e){var t=this,o=Number(e.bg_bet),n=Number(e.all_total_win);if(E.default.theme.ctl.getCurBet()==o)E.default.addBetState();else if(!E.default.theme.ctl.betControl.changeToBet(o))return c.showErrorPop(["bg_bet=",o,"betList=",r.default.getBetList()]),E.default.addBetState(),E.default.reconnectFlagList.BG_NG=!1,void E.default.theme.ctl.enableSpinAndOtherBtns();E.default.theme.ctl.footer.flushTotalWin(),E.default.theme.ctl.footer.updateTotalWin(n),E.default.theme.ctl.setCacheRet(["randomDataToEscapeNG"]),c.funcDelay(function(){var o;(o=t).spinLayer.stateChangeTo(d.SpinLayerState.Show),o.spinLayer.effectLayer.BG_MAPReconnect(e)},0)},t.prototype.BG_NGReconnect=function(e){var t=this,o=Number(e.bg_bet),n=Number(e.all_total_win);if(E.default.theme.ctl.getCurBet()==o)E.default.addBetState();else if(!E.default.theme.ctl.betControl.changeToBet(o))return c.showErrorPop(["bg_bet=",o,"betList=",r.default.getBetList()]),E.default.addBetState(),E.default.reconnectFlagList.BG_NG=!1,void E.default.theme.ctl.enableSpinAndOtherBtns();E.default.theme.ctl.footer.flushTotalWin(),E.default.theme.ctl.footer.updateTotalWin(n),E.default.theme.ctl.setCacheRet(["randomDataToEscapeNG"]),c.funcDelay(function(){var o;(o=t).spinLayer.stateChangeTo(d.SpinLayerState.Show),o.spinLayer.effectLayer.BG_NGReconnect(e)},0)},t.prototype.fgReconnectWithoutExit=function(e){void 0===e&&(e=void 0),E.default.theme.ctl.requestFreeGameSpin()},t.prototype.bgReconnectWithoutExit=function(e){void 0===e&&(e=void 0),E.default.theme.ctl.requestBonusGameSpin()},t.prototype.prepareBGEntry=function(e){this.bonusLeftSpinTimes=e||3},t.prototype.prepareFGEntry=function(e,t){this.freeSpinIndex=e,this.freeSpinNum=t},t.prototype.processNextRoundBonusGame=function(){var e=this.getGameTypePrivate();c.findElementInList([y.BG_NG,y.BG_FG,y.BG_MAP],e)&&N.default.getInstance().playBG_BGM(),this.reduceBGSpinTimes(),this.spinLayer.autoAvailable=!1,this.fakeSpin(),E.default.theme.ctl.requestBonusGameSpin(),E.default.theme.ctl.setFooterStopBtn(),E.default.theme.ctl.disableStop()},t.prototype.processThemeChoiceResult=function(e){var t=e;if(t.choice&&t.pos_result&&c.checkNodeExist(this.spinLayer.effectLayer.pickNode)){var o=p.default.getInstance().getCoinsDeltaValueForKey("SeparatelyCountedBgTotalWin"),n=t.ng_nl_win||0;E.default.reconnectFlagList.FG&&(E.default.reconnectFlagList.FG=!1,o+=n);var i=0;(e.total_win_check||0)>0&&(i=e.all_total_win||0),o+=i,p.default.getInstance().setCoinsDeltaValueForKey(o,"SeparatelyCountedBgTotalWin",!1),p.default.getInstance().setCoins(t.coins),this.spinLayer.effectLayer.pickNode.receiveData(t)}},t.prototype.checkGameFever=function(){},t.prototype.createGameFeverPop=function(e){E.default.theme.ctl.disableSpinAndOtherBtns();var t=(new cc.Node).addComponent(L.default);t.init(d.PopupType.GameFever,{gameFeverType:e,callback:function(){E.default.theme.ctl.enableSpinAndOtherBtns()}}),t.node.position=cc.v3(this.centerX,this.centerY-this.moveDistance/this.layerScale),this.node.addChild(t.node,10),t.popOutAfterAddToFather()},a([O],t)}(cc.Component));o.default=I,cc._RF.pop()},{"../Base/BetControl":"BetControl","../Base/Common_Base":"Common_Base","../Base/EventCenter":"EventCenter","../Base/Tools":"Tools","../Base/User":"User","../Components/ClippingNode":"ClippingNode","./Common":"Common","./Enum":"Enum","./Global":"Global","./GoldTiger":"GoldTiger","./InterludeNode":"InterludeNode","./JackpotLayer":"JackpotLayer","./MapTower":"MapTower","./MusicManager":"MusicManager","./PopOut":"PopOut","./SpinLayer":"SpinLayer"}],Global:[function(e,t,o){"use strict";cc._RF.push(t,"daabdapXwlCzZtfQl61Ku40","Global");var n,i,a,r,l,s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.Global=void 0;var c={NG:1,FG:2,BG_NG:3,BG_FG:4,BG_MAP:5},p=cc.size(162,150),u=p.width+6,h=p.height,d=((n={})[c.NG]=3,n[c.FG]=3,n[c.BG_NG]=1,n[c.BG_FG]=1,n[c.BG_MAP]=1,n),m=cc.color(70,70,70),f={num:cc.v3(0,10),jp:cc.v3(0,0),multi:cc.v3(0,0),wheel:cc.v3(0,0),jpMultiText:cc.v3(0,-20),jpMultiName:cc.v3(0,20)},_={low:1,high:2,NG:10,NG_low:11,NG_high:12,FG:20,FG_low:21,FG_high:22,BG_NG:30,BG_NG_low:31,BG_NG_high:32,BG_FG:40,BG_FG_low:41,BG_FG_high:42,BG_MAP:50,BG_MAP_low:51,BG_MAP_high:52,ExpectSC:100,ExpectSC_low:101,ExpectSC_high:102,ExpectBG:110,ExpectBG_low:111,ExpectBG_high:112,ExpectBG_NearWin:120,ExpectBG_NearWin_low:121,ExpectBG_NearWin_high:122},y=((i={})[_.NG_low]=[[3,3,5,5,1,1,1,5,5,10,10,10,1,2,2,2,1,1,7,3,3,6,8,10,10,10,7,4,4,1,1,10,10,10,8,8,1,1,4,4,6,5,5,10,10,10,8,4,4,4,6,6,10,10,10,3,8,8,7,8,8,3,3,10,10,1,1,1,3,3,10,10,3,3,8,8,1,1,1,10,10,10,7,1,1,10,10,10,3,3,8,8,10,10,2,2,2,6,7,10,10,10,1,1,4,4,10,10,10,1,1,8,3,3,3,6,1,1],[2,2,9,8,8,0,0,0,0,1,1,1,10,10,10,3,3,9,6,7,10,10,10,2,2,9,5,5,10,10,10,8,8,0,0,0,2,2,9,3,3,0,0,0,6,6,9,1,1,10,10,10,5,5,0,0,0,2,2,9,8,8,2,2,9,1,1,0,0,3,3,9,5,5,10,10,10,1,1,1,0,0,3,3,6,7,10,10,10,10,1,1,1,6,8,10,10,10,1,1,10,10,10,7,8,9,4,4,9,5,5,0,0,3,3,10,10,10,7,6,6,2,2,9,1,1,3,3,9,4,4,4,6,7,10,10,2,2,7,8,9,4,4,10,10,10,6,6,9,2,2,7,7,10,10,10,3,3,1,1,9,2,0,0,0,7,9,1,1,1,3,3,9,5,5,10,10,10,1,1,1,4,4,10,10,6,7,9,0,0,0,10,10,10,3,3,9,8,8,10,10,10,1,1,0,0,0,0,2,2,2,10,10,10,8,8,9,4,4,10,10,10],[4,4,5,5,9,3,3,6,8,9,4,4,10,10,10,2,2,2,8,10,10,10,5,5,9,4,4,0,0,0,5,5,10,10,7,7,0,0,0,8,8,10,10,10,2,2,9,1,1,9,6,6,10,10,10,1,1,6,8,9,2,2,8,4,4,9,5,5,3,3,3,9,5,5,10,10,10,10,6,8,2,2,0,0,0,9,1,1,10,10,4,4,6,9,2,2,10,10,3,3,9,7,8,3,3,3,1,1,9,4,4,9,1,1,1,10,10,10,3,3,6,0,0,6,7,9,7,8,10,3,3,0,0,0,8,7,10,10,10,3,3,0,0,0,5,5,9,4,4,10,10,10,2,2,2,8,10,10,8,8,9,8,8,0,0,0,8,6,10,10,10,2,2,9,7,8,10,10,1,1,1,6,7,9,1,1,6,7,10,3,3,9,2,2,2,9,8,8,9,5,5,10,10,10,3,3,9,2,2,10,10,6,7,9,2,2,2,1,1,9,8,6,10,10,10,2,2,9,3,3,10,10,10,8,8,9,3,3,1,1,1,10,10,10,4,4,9,1,1,10,10,10,3,3,0,0,0],[5,5,0,0,0,4,4,9,1,1,10,10,10,3,3,9,4,4,3,3,9,8,4,4,4,0,0,5,5,9,1,1,1,3,3,9,5,5,10,10,10,1,1,9,4,4,4,6,10,10,10,1,1,1,0,0,0,0,3,3,9,5,5,10,10,2,2,2,1,1,10,10,10,7,6,9,2,2,3,3,3,9,8,8,10,10,2,2,2,8,1,1,1,0,0,2,2,2,10,10,6,8,5,5,5,9,2,2,10,10,10,8,8,0,0,10,10,10,4,4,9,7,6,10,10,10,2,2,9,1,1,1,3,3,10,10,10,2,2,9,4,4,10,10,3,3,8,10,10,10,8,8,9,1,1,1,3,3,3,9,5,5,10,10,6,6,1,1,9,4,4,1,1,3,3,3,9,8,7,10,10,2,2,2,7,8,9,3,3,10,10,10,6,8,9,2,2,2,3,3,9,8,8,10,10,2,2,0,0,0,5,5,10,10,1,1,0,0,2,2,9,8,6,10,10,10,0,0,0,8,6,9,2,2,10,10,10,0,0,0,8,8,9],[5,5,4,4,0,0,0,2,2,3,3,10,10,10,3,3,1,1,1,5,5,3,3,0,0,0,5,5,0,0,2,2,4,4,10,10,10,5,5,3,3,1,1,1,10,10,6,7,8,8,10,10,7,8,3,10,10,10,2,2,6,7,10,10,10,1,1,3,3,10,10,10,7,6,2,2,2,4,0,0,0,1,1,1,8,7,0,0,0,4,4,10,10,7,7,2,2,2,3,3,10,10,10,8,6,3,3,1,1,10,10,10,5,5,3,3,7,7,6,6,4,4,3,3,2,2,3,3,1,1,10,10,10,6,7,4,4,10,10,7,6,0,0,10,10,10,2,2,2,2,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,2,2,10,10,10,5,5,6,8,1,1,4,4]],i[_.NG_high]=[[3,3,5,5,1,1,1,5,5,10,10,10,1,2,2,2,1,1,7,3,3,6,8,10,10,10,7,4,4,1,1,10,10,10,8,8,1,1,4,4,6,5,5,10,10,10,8,4,4,4,6,6,10,10,10,3,8,8,7,8,8,3,3,10,10,1,1,1,3,3,10,10,3,3,8,8,1,1,1,10,10,10,7,1,1,10,10,10,3,3,8,8,10,10,2,2,2,6,7,10,10,10,1,1,4,4,10,10,10,1,1,8,3,3,3,6,1,1],[2,2,9,8,8,0,0,0,0,1,1,1,10,10,10,3,3,9,6,7,10,10,10,2,2,9,5,5,10,10,10,8,8,0,0,0,2,2,9,3,3,0,0,0,6,6,9,1,1,10,10,10,5,5,0,0,0,2,2,9,8,8,2,2,9,1,1,0,0,3,3,9,5,5,10,10,10,1,1,1,0,0,3,3,6,7,10,10,10,10,1,1,1,6,8,10,10,10,1,1,10,10,10,7,8,9,4,4,9,5,5,0,0,3,3,10,10,10,7,6,6,2,2,9,1,1,3,3,9,4,4,4,6,7,10,10,2,2,7,8,9,4,4,10,10,10,6,6,9,2,2,7,7,10,10,10,3,3,1,1,9,2,0,0,0,7,9,1,1,1,3,3,9,5,5,10,10,10,1,1,1,4,4,10,10,6,7,9,0,0,0,10,10,10,3,3,9,8,8,10,10,10,1,1,0,0,0,0,2,2,2,10,10,10,8,8,9,4,4,10,10,10],[4,4,5,5,9,3,3,6,8,9,4,4,10,10,10,2,2,2,8,10,10,10,5,5,9,4,4,0,0,0,5,5,10,10,7,7,0,0,0,8,8,10,10,10,2,2,9,1,1,9,6,6,10,10,10,1,1,6,8,9,2,2,8,4,4,9,5,5,3,3,3,9,5,5,10,10,10,10,6,8,2,2,0,0,0,9,1,1,10,10,4,4,6,9,2,2,10,10,3,3,9,7,8,3,3,3,1,1,9,4,4,9,1,1,1,10,10,10,3,3,6,0,0,6,7,9,7,8,10,3,3,0,0,0,8,7,10,10,10,3,3,0,0,0,5,5,9,4,4,10,10,10,2,2,2,8,10,10,8,8,9,8,8,0,0,0,8,6,10,10,10,2,2,9,7,8,10,10,1,1,1,6,7,9,1,1,6,7,10,3,3,9,2,2,2,9,8,8,9,5,5,10,10,10,3,3,9,2,2,10,10,6,7,9,2,2,2,1,1,9,8,6,10,10,10,2,2,9,3,3,10,10,10,8,8,9,3,3,1,1,1,10,10,10,4,4,9,1,1,10,10,10,3,3,0,0,0],[5,5,0,0,0,4,4,9,1,1,10,10,10,3,3,9,4,4,3,3,9,8,4,4,4,0,0,5,5,9,1,1,1,3,3,9,5,5,10,10,10,1,1,9,4,4,4,6,10,10,10,1,1,1,0,0,0,0,3,3,9,5,5,10,10,2,2,2,1,1,10,10,10,7,6,9,2,2,3,3,3,9,8,8,10,10,2,2,2,8,1,1,1,0,0,2,2,2,10,10,6,8,5,5,5,9,2,2,10,10,10,8,8,0,0,10,10,10,4,4,9,7,6,10,10,10,2,2,9,1,1,1,3,3,10,10,10,2,2,9,4,4,10,10,3,3,8,10,10,10,8,8,9,1,1,1,3,3,3,9,5,5,10,10,6,6,1,1,9,4,4,1,1,3,3,3,9,8,7,10,10,2,2,2,7,8,9,3,3,10,10,10,6,8,9,2,2,2,3,3,9,8,8,10,10,2,2,0,0,0,5,5,10,10,1,1,0,0,2,2,9,8,6,10,10,10,0,0,0,8,6,9,2,2,10,10,10,0,0,0,8,8,9],[5,5,4,4,0,0,0,2,2,3,3,10,10,10,3,3,1,1,1,5,5,3,3,0,0,0,5,5,0,0,2,2,4,4,10,10,10,5,5,3,3,1,1,1,10,10,6,7,8,8,10,10,7,8,3,10,10,10,2,2,6,7,10,10,10,1,1,3,3,10,10,10,7,6,2,2,2,4,0,0,0,1,1,1,8,7,0,0,0,4,4,10,10,7,7,2,2,2,3,3,10,10,10,8,6,3,3,1,1,10,10,10,5,5,3,3,7,7,6,6,4,4,3,3,2,2,3,3,1,1,10,10,10,6,7,4,4,10,10,7,6,0,0,10,10,10,2,2,2,2,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,2,2,10,10,10,5,5,6,8,1,1,4,4]],i[_.FG_low]=[[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9]],i[_.FG_high]=[[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9]],i[_.BG_NG_low]=[[2,2,2,3,3,10,10,10,3,3,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,10,10,10,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,2,2,1,1,10,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10]],i[_.BG_NG_high]=[[2,2,2,3,3,10,10,10,3,3,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,10,10,10,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,2,2,1,1,10,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10]],i[_.BG_FG_low]=[[2,2,2,3,3,10,10,10,3,3,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,10,10,10,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,2,2,1,1,10,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10]],i[_.BG_FG_high]=[[2,2,2,3,3,10,10,10,3,3,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,10,10,10,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,2,2,1,1,10,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10]],i[_.BG_MAP_low]=[[2,2,2,3,3,10,10,10,3,3,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,10,10,10,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,2,2,1,1,10,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10]],i[_.BG_MAP_high]=[[2,2,2,3,3,10,10,10,3,3,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,10,10,10,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,2,2,1,1,10,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10]],i[_.ExpectSC_low]=[[3,3,3,9,5,5,9,1,1,1,9,2,2,9,1,1,10,10,7,7,9,3,3,9,5,5,9,4,4,9,1,1,5,5,5,9,1,1,4,4,9,6,5,5,9,8,4,4,9,6,7,8,8,9,4,4,8,9,3,3,10,10,1,1,9,1,1,9,3,3,8,8,9,1,1,10,10,1,1,9,8,8,10,10,4,4,9,1,1,1,9,4,4,4,9,1,1,9,3,3,9,6,1,1,9],[3,3,3,9,5,5,9,1,1,1,9,2,2,9,1,1,10,10,7,7,9,3,3,9,5,5,9,4,4,9,1,1,5,5,5,9,1,1,4,4,9,6,5,5,9,8,4,4,9,6,7,8,8,9,4,4,8,9,3,3,10,10,1,1,9,1,1,9,3,3,8,8,9,1,1,10,10,1,1,9,8,8,10,10,4,4,9,1,1,1,9,4,4,4,9,1,1,9,3,3,9,6,1,1,9],[3,3,3,9,5,5,9,1,1,1,9,2,2,9,1,1,10,10,7,7,9,3,3,9,5,5,9,4,4,9,1,1,5,5,5,9,1,1,4,4,9,6,5,5,9,8,4,4,9,6,7,8,8,9,4,4,8,9,3,3,10,10,1,1,9,1,1,9,3,3,8,8,9,1,1,10,10,1,1,9,8,8,10,10,4,4,9,1,1,1,9,4,4,4,9,1,1,9,3,3,9,6,1,1,9],[3,3,3,9,5,5,9,1,1,1,9,2,2,9,1,1,10,10,7,7,9,3,3,9,5,5,9,4,4,9,1,1,5,5,5,9,1,1,4,4,9,6,5,5,9,8,4,4,9,6,7,8,8,9,4,4,8,9,3,3,10,10,1,1,9,1,1,9,3,3,8,8,9,1,1,10,10,1,1,9,8,8,10,10,4,4,9,1,1,1,9,4,4,4,9,1,1,9,3,3,9,6,1,1,9],[3,3,3,9,5,5,9,1,1,1,9,2,2,9,1,1,10,10,7,7,9,3,3,9,5,5,9,4,4,9,1,1,5,5,5,9,1,1,4,4,9,6,5,5,9,8,4,4,9,6,7,8,8,9,4,4,8,9,3,3,10,10,1,1,9,1,1,9,3,3,8,8,9,1,1,10,10,1,1,9,8,8,10,10,4,4,9,1,1,1,9,4,4,4,9,1,1,9,3,3,9,6,1,1,9]],i[_.ExpectSC_high]=[[3,3,3,9,5,5,9,1,1,1,9,2,2,9,1,1,10,10,7,7,9,3,3,9,5,5,9,4,4,9,1,1,5,5,5,9,1,1,4,4,9,6,5,5,9,8,4,4,9,6,7,8,8,9,4,4,8,9,3,3,10,10,1,1,9,1,1,9,3,3,8,8,9,1,1,10,10,1,1,9,8,8,10,10,4,4,9,1,1,1,9,4,4,4,9,1,1,9,3,3,9,6,1,1,9],[3,3,3,9,5,5,9,1,1,1,9,2,2,9,1,1,10,10,7,7,9,3,3,9,5,5,9,4,4,9,1,1,5,5,5,9,1,1,4,4,9,6,5,5,9,8,4,4,9,6,7,8,8,9,4,4,8,9,3,3,10,10,1,1,9,1,1,9,3,3,8,8,9,1,1,10,10,1,1,9,8,8,10,10,4,4,9,1,1,1,9,4,4,4,9,1,1,9,3,3,9,6,1,1,9],[3,3,3,9,5,5,9,1,1,1,9,2,2,9,1,1,10,10,7,7,9,3,3,9,5,5,9,4,4,9,1,1,5,5,5,9,1,1,4,4,9,6,5,5,9,8,4,4,9,6,7,8,8,9,4,4,8,9,3,3,10,10,1,1,9,1,1,9,3,3,8,8,9,1,1,10,10,1,1,9,8,8,10,10,4,4,9,1,1,1,9,4,4,4,9,1,1,9,3,3,9,6,1,1,9],[3,3,3,9,5,5,9,1,1,1,9,2,2,9,1,1,10,10,7,7,9,3,3,9,5,5,9,4,4,9,1,1,5,5,5,9,1,1,4,4,9,6,5,5,9,8,4,4,9,6,7,8,8,9,4,4,8,9,3,3,10,10,1,1,9,1,1,9,3,3,8,8,9,1,1,10,10,1,1,9,8,8,10,10,4,4,9,1,1,1,9,4,4,4,9,1,1,9,3,3,9,6,1,1,9],[3,3,3,9,5,5,9,1,1,1,9,2,2,9,1,1,10,10,7,7,9,3,3,9,5,5,9,4,4,9,1,1,5,5,5,9,1,1,4,4,9,6,5,5,9,8,4,4,9,6,7,8,8,9,4,4,8,9,3,3,10,10,1,1,9,1,1,9,3,3,8,8,9,1,1,10,10,1,1,9,8,8,10,10,4,4,9,1,1,1,9,4,4,4,9,1,1,9,3,3,9,6,1,1,9]],i[_.ExpectBG_low]=[[1,2,3,4,5,6,7,8,9,10],[0,1,2,3,4,5,6,7,8,9,10],[0,1,2,3,4,5,6,7,8,9,10],[0,1,2,3,4,5,6,7,8,9,10],[0,1,2,3,4,5,6,7,8,9,10]],i[_.ExpectBG_high]=[[1,2,3,4,5,6,7,8,9,10],[0,1,2,3,4,5,6,7,8,9,10],[0,1,2,3,4,5,6,7,8,9,10],[0,1,2,3,4,5,6,7,8,9,10],[0,1,2,3,4,5,6,7,8,9,10]],i[_.ExpectBG_NearWin_low]=[[2,2,2,3,3,10,10,10,3,3,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,10,10,10,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,2,2,1,1,10,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10]],i[_.ExpectBG_NearWin_high]=[[2,2,2,3,3,10,10,10,3,3,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,10,10,10,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,1,1,1,10,10,10,2,2,1,1,10,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10],[0,0,0,2,2,2,3,3,10,10,10,3,3,0,0,0,0,3,3,3,10,10,10,2,2,4,4,4,10,10,10,5,5,5,3,3,1,1,10,10,4,4,4,10,10,4,4,4,10,10,10,2,2,2,10,10,10,1,1,1,3,3,10,10,10,2,2,2,4,4,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,3,3,10,10,10,3,3,3,1,1,10,10,10,3,3,3,10,10,10,4,4,3,3,2,2,2,2,1,1,1,10,10,10,4,4,4,10,10,0,0,0,10,10,10,2,2,0,0,0,10,10,10,1,1,3,3,1,1,1,10,10,10,5,5,5,2,2,10,10,10,5,5,5,4,4,1,1,10,10,10]],i),g=((a={none:0})[15]=1,a[16]=1.5,a[17]=2,a[18]=2.5,a[19]=3,a[20]=3.5,a[21]=4,a[22]=4.5,a[23]=5,a[24]=6,a[25]=7.5,a[26]=8,a[27]=10,a[28]=20,a[29]=50,a[30]=100,a[31]=1,a[32]=2,a[33]=3,a[34]=4,a),T=((r={})[1]={},r[2]={},r[3]={},r[4]={},r[5]={},r),S=((l={})[0]={picPath:"110059_0",spinePath:"NG_wild",animation:"wild_zj",skin:null,downAnimation:"",downAnimationTime:1,scale:2,aniScale:2},l[1]={picPath:"110059_1",spinePath:"NG_H1",animation:"H1",skin:null,downAnimation:"",downAnimationTime:1,scale:2,aniScale:2},l[2]={picPath:"110059_2",spinePath:"NG_H2",animation:"H2",skin:null,downAnimation:"",downAnimationTime:1,scale:2,aniScale:2},l[3]={picPath:"110059_3",spinePath:"NG_H3",animation:"H3",skin:null,downAnimation:"",downAnimationTime:1,scale:2,aniScale:2},l[4]={picPath:"110059_4",spinePath:"NG_L1",animation:"L1",skin:null,downAnimation:"",downAnimationTime:1,scale:2,aniScale:2},l[5]={picPath:"110059_5",spinePath:"NG_L2",animation:"animation",skin:null,downAnimation:"",downAnimationTime:1,scale:2,aniScale:2},l[6]={picPath:"110059_6",spinePath:"NG_L3_L5",animation:"L3",skin:null,downAnimation:"",downAnimationTime:1,scale:2,aniScale:2},l[7]={picPath:"110059_7",spinePath:"NG_L3_L5",animation:"L4",skin:null,downAnimation:"",downAnimationTime:1,scale:2,aniScale:2},l[8]={picPath:"110059_8",spinePath:"NG_L3_L5",animation:"L5",skin:null,downAnimation:"",downAnimationTime:1,scale:2,aniScale:2},l[9]={picPath:"110059_9",spinePath:"NG_scatter",animation:"sc_zj",skin:null,downAnimation:"sc_luoxia",downAnimationTime:1,scale:2,aniScale:2},l[10]={picPath:"110059_10",spinePath:"BG_jinbi",animation:"reddi_zhongjiang",skin:null,downAnimation:"reddi_xialuo",downAnimationTime:1,scale:2,aniScale:1},l[11]={picPath:"110059_11",spinePath:"BG_jinbi",animation:"redkuang_zhongjiang",skin:null,downAnimation:"redkuang_xialuo",downAnimationTime:1,scale:2,aniScale:1},l[12]={picPath:"110059_12",spinePath:"BG_jinbi",animation:"da_purpleqiu_zhongjiang",skin:null,downAnimation:"da_purpleqiu_xialuo",downAnimationTime:1,scale:2,aniScale:1},l[13]={picPath:"110059_13",spinePath:"BG_jinbi",animation:"huzhua_zhongjiang",skin:null,downAnimation:"huzhua_xialuo",downAnimationTime:1,scale:2,aniScale:1},l[33]={picPath:"110059_33",spinePath:"BG_jinbi",animation:"bluedi_zhongjiang",skin:null,downAnimation:"bluedi_xialuo",downAnimationTime:1,scale:2,aniScale:1},l[34]={picPath:"110059_34",spinePath:"BG_jinbi",animation:"greendi_zhongjiang",skin:null,downAnimation:"greendi_xialuo",downAnimationTime:1,scale:2,aniScale:1},l),E={},b={},C={},v={},N={},L={},B={};for(var P in S)E[P]=S[P].picPath,b[P]=1/S[P].scale,C[P]=1/S[P].aniScale,v[P]=S[P].spinePath,N[P]=S[P].animation,L[P]=S[P].skin,B[P]=S[P].downAnimation;var A={InfoPageNum:6,CommonAudioPath:"sounds/",GameTypePrivate:c,jpName:["grand","major","minor","mini"],CellSize:p,columnBarWidth:6,distanceX:u,distanceY:h,frameBottomY:262,ColumnNum:5,RowNumTable:d,topLength:1,bottomLength:1,downReelLength:1,symbolUpperNumWidth:130,symbolUpperNumHeight:50,symbolColor:m,autoReelColorBackTime:.3,symbolUpperPosList:f,jpUpperScale:.5,jpMultiTextScale:1.2,symbolUpperNumScale:.8,performTimeList:{plusScaleMaxTime:.3,plusFlyTime:.5,plusDelayTime:0,collectJumpTime:.7,wheelSpinTime:5,wheelUpTime:.5,wheelDownTime:.5,wheelStopWait:.5,ballFlyTime:.5,multiRollDelayTime:.5,multiRollAddSpeedTime:1.5,multiRollReduceSpeedTime:1.5,multiRollEndWaitTime:0,multiPerformTime:.5,scratchMoveTime:.5,scratchStayTime:.5,scratchFadeOutTime:.5,tigerSymbolChangeTime:.5,performTime:2.5,delayAfterPerform:.5,towerMoveTime:.5,symbolWheelJumpTime:.5,symbolWheelMultiJumpTime:.5,towerHeadJumpTime:.3,collectFlyTime:.5,symbolCollectTime:.5,majorWheelJumpTime:.5},symbolNumBigScale:1.2,collectScale:1.5,multiWheelUpScale:1.2,multiWheelStopScale1:1.7,multiWheelStopScale2:1.5,multiWheelCollectScale:2,performMultiScaleSmall:.65,performMultiScale:1.5,majorWheelUpScale:1.2,reelType:_,mapStartPosList:[[1,7,13],[0,6,12],[2,8,14],[0,7,14],[2,7,12],[0,8,12],[2,6,14],[4,6,10],[4,8,10],[3,6,9],[4,7,10],[5,8,11],[0,2,12,14],[3,5,9,11],[3,6,7,9],[5,7,8,11],[0,4,10,12],[2,4,10,14],[1,4,10,13],[4,6,7,10],[4,7,8,10],[1,4,7,10,13],[0,3,6,9,12],[2,5,8,11,14],[0,2,7,12,14],[3,5,7,9,11],[3,4,6,9,10],[4,5,8,10,11]],ReelList:y,downType:{scatter:2,bg:4},expectType:{scatter:2,bg:void 0},effectPath:[96,97,null,101],effectType:{default:1,scatter:2,bg:4},LevelWeightList:{reelBar:1300,wildNode:1370,reelBack:1,expect_low:2,reel:10,symbol:100,state:1e3,winFrame:1e4,expect_up:1e4,expect_down:2,fg_board:9990},symbolStateList:{Spin:1,Stop:2,AnimationLoop:3,AnimationWin:5,AnimationDown:4},symbolUpperTypeList:g,fakeValueTable:T,symbolTypeList:{low:[6,7,8],high:[1,2,3,4,5],sc:[9],wild:[0],bg:[10,11,12,13,33,34]},symbolZOrderList:{low:1,high:2,wild:3,bg:4,sc:5},symbolInfoList:S,SymbolNormal:E,SymbolNormalScale:b,SymbolAniScale:C,SymbolSpinePath:v,SymbolAnimation:N,SymbolSpineSkin:L,SymbolDownAnimation:B,SymbolConfig:S,SymbolFast:s({},E),CommonPlistPath:"image/Common/",PlistPath:"plist/",ResFontPath:"font/",ResSpinePath:{Common:"spine/Common/",NG:"spine/ng/",FG:"spine/fg/",BG:"spine/bg/",POP:"spine/pop/",SYM:"spine/symbol/"},ResImagePath:{Common:"image/Common/",NG:"image/ng/",FG:"image/fg/",BG:"image/bg/",POP:"image/pop/",LANG:"lang_EN/"},WebMemCache:{}};o.Global=A,cc._RF.pop()},{}],GoldTiger:[function(e,t,o){"use strict";cc._RF.push(t,"76d64NZyolPTYT79A8tSey2","GoldTiger");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/Common_Base"),l=e("../Base/ThemeControlNew"),s=e("../Base/ThemeNew"),c=e("../Base/Tools"),p=e("./Common"),u=e("./Enum"),h=e("./GameLayer"),d=e("./Global"),m=(d.Global.ColumnNum,d.Global.distanceX,d.Global.distanceY,d.Global.RowNumTable),f=(d.Global.ResImagePath,cc._decorator),_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.themeControl=null,t.gameLayer=null,t.avg_bet=0,t.totalBet=0,t.cancelEnableSpinAfterEnterTheme=!1,t.visibleSize=null,t.centerX=0,t.centerY=0,t.isFakeSpinning=void 0,t.isStopped=void 0,t.mathType=void 0,t.processThemeChoiceResult=void 0,t.HideBetLabel=void 0,t.stopLinePerform=void 0,t.fgNetworkReconnect=void 0,t}var o;return i(t,e),o=t,t.getRowNum=function(e){return m[e]},t.prototype.onLoad=function(){this.themeControl.getComponent(l.default).init(this,this.node),this.init(),e.prototype.onLoad.call(this)},t.prototype.init=function(){e.prototype.init.call(this,o.themeId),o.theme=this,this.ClassName=o.theme,o.setBetState(0),o.isChangingStrip=null,o.adjustThemeFlag=!1,this.themeid=this.ClassName.themeId,this.themeFreeType=r.THEME_FG_TYPE.STEP,this.themeBonusType=r.THEME_BG_TYPE.STEP,o.funcAfterGameLayerCreateList=[],o.lastState=null,o.initFlag=!1,o.firstpowermodeopen=null},t.prototype.initResList=function(){},t.prototype.initGameLayer=function(){o.M1=Math.floor(9*Math.random()+1),this.visibleSize=cc.winSize,this.gameLayer=(new cc.Node).addComponent(h.default);var e=90*o.theme.ctl.footer.node.scaleY+o.theme.ctl.footer.node.position.y,t=70*o.theme.ctl.header.node.scaleY-o.theme.ctl.header.node.position.y,n=this.visibleSize.width/this.visibleSize.height;o.screenState={footerHeight:e,headerHeight:t};var i,a,r,l="wide",s=0;n>=2?l="long":n<=1120/720&&(l="wide");var c=(this.visibleSize.height-e-t)/560,p=this.visibleSize.width/1280;i=Math.min(c,p),a=e-(this.visibleSize.height/2-270*i),r=this.visibleSize.height/2-290*i-t,this.gameLayer.node.scale=i,this.gameLayer.layerScale=i,this.gameLayer.screenType=l,this.gameLayer.distanceYToFooter=a,this.gameLayer.distanceYToHeader=r,this.gameLayer.node.position=cc.v3(0,this.gameLayer.node.position.y+s),this.gameLayer.moveDistance=s,this.ClassName.gameLayer=this.gameLayer,this.node.addChild(this.gameLayer.node),this.gameLayer.init(this.node),this.gameLayer.createDone=!0;for(var u=1;u<=o.funcAfterGameLayerCreateList.length;u++)o.funcAfterGameLayerCreateList[u-1]()},t.prototype.canSpin=function(){if(o.betState<1)return!1;if(o.isChangingStrip)return!1;if(l.THEME_GAME_TYPE.MAIN==this.ctl.getGameType()){if(this.gameLayer.spinLayer.state==u.SpinLayerState.Idle||this.gameLayer.spinLayer.state==u.SpinLayerState.Show)return this.gameLayer.spinLayer.effectLayer.stopShow();if(this.gameLayer.spinLayer.state==u.SpinLayerState.Rolling)return!1}else{if(l.THEME_GAME_TYPE.FREE==this.ctl.getGameType()){if(this.dealMusic_TouchBtnSpinMusic(),this.gameLayer.spinLayer.state==u.SpinLayerState.Idle||this.gameLayer.spinLayer.state==u.SpinLayerState.Show)this.gameLayer.spinLayer.effectLayer.stopShow();else if(this.gameLayer.spinLayer.state==u.SpinLayerState.Rolling)return!1;return!1}if(l.THEME_GAME_TYPE.BONUS==this.ctl.getGameType()){if(this.dealMusic_TouchBtnSpinMusic(),this.gameLayer.spinLayer.state==u.SpinLayerState.Idle||this.gameLayer.spinLayer.state==u.SpinLayerState.Show)this.gameLayer.spinLayer.effectLayer.stopShow();else if(this.gameLayer.spinLayer.state==u.SpinLayerState.Rolling)return!1;return!1}}},t.prototype.canStop=function(){return!(!this.gameLayer.spinLayer.getReceiveData()||this.gameLayer.extendSpin||(this.gameLayer.spinLayer.spinTable.shouldExpecting?this.gameLayer.isExpecting||(this.gameLayer.spinLayer.stopAllExpect(),this.gameLayer.spinLayer.stopSpinTable(),0):(this.gameLayer.spinLayer.stopSpinTable(),0)))},t.clearReconnectFlagList=function(){for(var e in o.reconnectFlagList)o.reconnectFlagList[e]=!1},t.checkReconnectFlag=function(){for(var e in o.reconnectFlagList)if(o.reconnectFlagList[e])return!0;return!1},t.prototype.adjustTheme=function(e){var t=this;o.adjustThemeFlag=!0;var n=e.startPos;if(o.QuickStartReelOrders=n,o.clearReconnectFlagList(),o.theme.avg_bet=e.enter_theme_info.reconnection_data.avg_bet,o.theme.avg_bet||c.showErrorPop("\u6ca1\u6709avg_bet"),e.enter_theme_info&&e.enter_theme_info.reconnection_data){var i=e.enter_theme_info.reconnection_data;i.pick_rec&&(i.pick_rest_round||0)>0?(o.reduceBetState(),o.reconnectFlagList.FG=!0):i.bg_result&&(i.bg_rest_round||0)>0&&1==(i.bg_type||0)?(o.reduceBetState(),o.reconnectFlagList.BG_NG=!0):i.bg_result&&(i.bg_rest_round||0)>0&&2==(i.bg_type||0)&&(o.reduceBetState(),o.reconnectFlagList.BG_MAP=!0)}var a=function(){var n=e.enter_theme_info.reconnection_data.collect_info,i=n.wild_collect/n.aim*100;if(e.enter_theme_info.reconnection_data.map_percent=i,t.gameLayer.spinLayer.spinTable.countBar.reconnect(e.enter_theme_info.reconnection_data.map_percent||0),o.reconnectFlagList.FG){var a=e.enter_theme_info.reconnection_data;t.gameLayer.FGReconnect(a)}else o.reconnectFlagList.BG_NG?(a=e.enter_theme_info.reconnection_data,t.gameLayer.BG_NGReconnect(a)):o.reconnectFlagList.BG_MAP&&(a=e.enter_theme_info.reconnection_data,t.gameLayer.BG_MAPReconnect(a));o.initFlag=!0};t.gameLayer&&t.gameLayer.createDone?a():o.funcAfterGameLayerCreateList.push(a)},t.prototype.onShow=function(){o.theme.ctl.footer.setLabelDescription("Clear"),o.checkReconnectFlag()?o.theme.ctl.disableSpinAndOtherBtns():(c.funcDelay(function(){c.playRandomVoice("enterTheme",[p.Common.s_sound.Open1,p.Common.s_sound.Open2])},.5),o.theme.ctl.enableSpinAndOtherBtns(),this.gameLayer.checkGameFever())},t.prototype.dealAboutBetChange=function(){o.theme.totalBet=o.theme.ctl.getCurTotalBet(),o.betState<1&&o.addBetState()},t.setBetState=function(e){o.betState=e},t.reduceBetState=function(){o.setBetState(o.betState-1)},t.addBetState=function(){o.setBetState(o.betState+1)},t.prototype.dealKeepAlive=function(e,t){void 0===t&&(t=null);var n=this,i=function(){o.betState<1?(o.addBetState(),1==o.betState&&(o.isChangingStrip=!1,o.checkReconnectFlag()?n.ctl.disableSpinAndOtherBtns():n.ctl.enableSpinAndOtherBtns())):(o.isChangingStrip=!1,n.ctl.enableSpinAndOtherBtns())};e.BoxPage&&(n.gameLayer&&n.gameLayer.createDone?i():o.funcAfterGameLayerCreateList.push(i))},t.prototype.refreshLanguage=function(){},t.prototype.stopWinRollByTouchBet=function(){return this.gameLayer.spinLayer.effectLayer.state!=u.WinShowState.SymbolLineAnimation||(this.gameLayer.spinLayer.effectLayer.stopSymbolLineAnimation(),this.gameLayer.spinLayer.effectLayer.stopPerformUnit(),!1)},t.prototype.paytableBackCallback=function(){},t.themeId=110059,t.InfoPageMedalIndex=6,t.WinPossibilities=1024,t.theme=null,t.betState=0,t.lastState=null,t.firstpowermodeopen=null,t.isChangingStrip=!1,t.M1=0,t.screenState={},t.funcAfterGameLayerCreateList=[],t.adjustThemeFlag=!1,t.initFlag=!1,t.reconnectFlagList={FG:!1,BG_NG:!1,BG_FG:!1,BG_MAP:!1,MAP:!1,BG:void 0},t.QuickStartReelOrders=null,t.RowNum=3,a([y(cc.Node)],t.prototype,"themeControl",void 0),o=a([_],t)}(s.default);o.default=g,cc._RF.pop()},{"../Base/Common_Base":"Common_Base","../Base/ThemeControlNew":"ThemeControlNew","../Base/ThemeNew":"ThemeNew","../Base/Tools":"Tools","./Common":"Common","./Enum":"Enum","./GameLayer":"GameLayer","./Global":"Global"}],Header:[function(e,t,o){"use strict";cc._RF.push(t,"c6a96rDtmdC84DoiNAkTDX8","Header");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Game/Global").Global.ResSpinePath,l=e("./Tools"),s=e("./User"),c=cc._decorator,p=c.ccclass,u=c.property,h=null,d=!0,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.themeCtl=null,t.nodeUserCoin=null,t.userCoinNode=null,t.bg=null,t.coinsFrame=null,t.spCoin=null,t.scale=1,t.animationScaleX=1,t.animationScaleY=1,t.isLowPhone=!1,t}return i(t,e),t.prototype.isPopupValid=function(){},t.prototype.init=function(e,t){h=l.getHeaderAtlas();var o=this;o.themeCtl=t,o.animationScaleX=1,o.animationScaleY=1,d=e||!1,o.animationScaleX=1,o.animationScaleY=.85,o.isLowPhone=!1,o.bg=o.node.getChildByName("background"),o.coinsFrame=o.node.getChildByName("coins_frame"),o.node.getChildByName("back")&&(o.node.getChildByName("back").active=!1),cc.winSize,o.scale=1,o.adjustHeaderPanel(),d||o.buildMultiNode(),s.default.getInstance().setCoins(s.default.getInstance().getCoins(),0),o.spCoin=l.createAni(r.Common+"Lobby_money_coin").getComponent(sp.Skeleton),cc.tween(o.spCoin.node).call(function(){o.spCoin.setAnimation(0,"coin",!0)}).start(),o.node.getChildByName("coin_icon").addChild(o.spCoin.node),o.checkBuyButtonAnimation(),o.CheckCatStatus(null,!0)},t.prototype.onLoad=function(){},t.prototype.onDestroy=function(){},t.prototype.onExit=function(){},t.prototype.getIsLowPhone=function(){return!1},t.prototype.adjustHeaderPanel=function(){for(var e=cc.winSize,t=[-79,-57,-57,-57,-30,-30,-30,27,27,45,45,66,79],o=[this.node.getChildByName("lobby"),this.node.getChildByName("coin_icon"),this.node.getChildByName("coin_root"),this.node.getChildByName("coins_frame"),this.node.getChildByName("ingot_icon"),this.node.getChildByName("ingots_frame"),this.node.getChildByName("club_progress_root"),this.node.getChildByName("feedback"),this.node.getChildByName("cat_node"),this.node.getChildByName("floating_label_node"),this.node.getChildByName("level"),this.node.getChildByName("multi_node"),this.node.getChildByName("settings")],n=1;n<=o.length;n++){var i=t[n-1]/280*(e.width-1280);o[n-1].position=cc.v3(o[n-1].position.x+i,o[n-1].position.y)}},t.prototype.updateUserRedDot=function(){},t.prototype.buildMultiNode=function(){},t.prototype.showRedDot=function(){},t.prototype.updateAvatarTexture=function(){},t.prototype.updateUserRedDotInLive=function(){},t.prototype.updateHeaderLevelBar=function(){},t.prototype.whenHide=function(){},t.prototype.whenShow=function(){},t.prototype.updateMoreItems=function(){},t.prototype.showBackBtn=function(){},t.prototype.hideBackBtn=function(){},t.prototype.showBuyBtn=function(){},t.prototype.showBuySaleBtns=function(){},t.prototype.isBuySale=function(){return!1},t.prototype.updateBuySaleBtns=function(){},t.prototype.shineOnce=function(){},t.prototype.KeepShine=function(){},t.prototype.showBonus=function(){},t.prototype.switchShine=function(){},t.prototype.ShutShine=function(){},t.prototype.CheckCatStatus=function(){},t.prototype.updateBonus=function(){},t.prototype.initBuyAnimation=function(){},t.prototype.canClickBtnLobby=function(){return this.themeCtl.isThemeIdle()||this.themeCtl.checkForceEnableToLobby()},t.prototype.update=function(){},t.prototype.checkBuyButtonAnimation=function(){},t.prototype.updateAdsState=function(){},t.prototype.getUserCoinNodeWorldPos=function(){return this.spCoin.node.parent.convertToWorldSpaceAR(this.spCoin.node.position)},t.prototype.getUserDiamondNodeWorldPos=function(){return cc.v3(0,0)},t.prototype.playCoinCollect=function(e){this.spCoin&&(0==e?this.spCoin.setAnimation(0,"coin_collect1",!1):1==e&&this.spCoin.setAnimation(0,"coin_collect2",!1),this.spCoin.addAnimation(0,"coin",!0))},t.prototype.playIngotCollect=function(){},t.prototype.addToMsgLevelNode=function(){},t.prototype.updateUserHeader=function(){},t.prototype.enterTheme=function(){},t.prototype.beforeQuitTheme=function(){},t.prototype.toLobbyScene=function(e,t,o,n){void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null)},t.prototype.toVideo=function(){},t.prototype.setLevelAndExpPercentage=function(){},t.prototype.adjustMoreBoard=function(){},t.prototype.changeLanguage=function(){},t.prototype.showAdNode=function(){},t.prototype.setLobbyBtn=function(){},t.prototype.changeUI=function(){this.bg.getComponent(cc.Sprite).spriteFrame=h.getSpriteFrame("header/res/board_header_purple.png"),this.coinsFrame.getComponent(cc.Button).hoverSprite=h.getSpriteFrame("header/res/board_coin_purple.png"),this.coinsFrame.getComponent(cc.Button).normalSprite=h.getSpriteFrame("header/res/board_coin_purple.png"),this.coinsFrame.getComponent(cc.Button).pressedSprite=h.getSpriteFrame("header/res/board_coin_purple.png"),this.coinsFrame.getComponent(cc.Button).disabledSprite=h.getSpriteFrame("header/res/board_coin_purple.png")},t.prototype.activityClicked=function(){},t.prototype.updateActivityCenterEntrance=function(){},t.prototype.setReturnLobbyBlack=function(){},t.prototype.setReturnLobbyLight=function(){},t.prototype.hide=function(){this.node.active=!1},t.prototype.show=function(){this.node.active=!0},t.prototype.showCoinsTapTip=function(){},a([u(cc.Node)],t.prototype,"nodeUserCoin",void 0),a([p],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../Game/Global":"Global","./Tools":"Tools","./User":"User"}],Help:[function(e,t,o){"use strict";cc._RF.push(t,"f9062+r6GhOpqoV45mzYohG","Help");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Game/Common"),l=e("../Game/MusicManager"),s=cc._decorator,c=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_PageView=null,t.m_BtnArrowLeft=null,t.m_BtnArrowRight=null,t.m_BtnBack=null,t.m_CurrentPage=0,t}return i(t,e),t.prototype.onEnable=function(){l.default.getInstance().playEffect(r.Common.s_sound.InfoOpen,!1,!0)},t.prototype.onScrollEvent=function(e,t){t==cc.ScrollView.EventType.SCROLL_TO_RIGHT?this.m_CurrentPage=this.m_CurrentPage+1:t==cc.ScrollView.EventType.SCROLL_TO_LEFT&&(this.m_CurrentPage=this.m_CurrentPage-1)},t.prototype.onArrowLeft=function(){this.m_CurrentPage--,this.m_CurrentPage<0&&(this.m_CurrentPage=0),this.m_PageView.scrollToPage(this.m_CurrentPage,.3),l.default.getInstance().playEffect(r.Common.s_sound.InfoScroll,!1,!0)},t.prototype.onArrowRight=function(){this.m_CurrentPage++,this.m_CurrentPage>4&&(this.m_CurrentPage=4),this.m_PageView.scrollToPage(this.m_CurrentPage,.3),l.default.getInstance().playEffect(r.Common.s_sound.InfoScroll,!1,!0)},t.prototype.onBack=function(){l.default.getInstance().playEffect(r.Common.s_sound.InfoClose,!1,!0),this.node.active=!1},a([p(cc.PageView)],t.prototype,"m_PageView",void 0),a([p(cc.Button)],t.prototype,"m_BtnArrowLeft",void 0),a([p(cc.Button)],t.prototype,"m_BtnArrowRight",void 0),a([p(cc.Button)],t.prototype,"m_BtnBack",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Game/Common":"Common","../Game/MusicManager":"MusicManager"}],HttpClient:[function(e,t,o){"use strict";cc._RF.push(t,"05685nAHW9IBLQJgBRWen5d","HttpClient");var n=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,r=(i.property,e("./NetTrans")),l=e("./Popup"),s=function(){function e(){this.loadingRes=!1}var t;return t=e,e.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance.loadingRes||null!=t._instance.dialg||(t._instance.loadingRes=!0,cc.resources.load("Prefab/PopOut",cc.Prefab,function(e,o){if(e)console.error(e);else{var n=cc.instantiate(o);cc.director.getScene().getChildByName("Canvas").addChild(n,1e4),n.active=!1,t._instance.dialg=n.getComponent(l.default)}})),t._instance},e.prototype.ServerConnect=function(e){var t=this,o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==this.readyState)if(this.status>=200&&this.status<400){var e=this.responseText;this.responseText.includes("<")&&(e=this.responseText.slice(0,this.responseText.indexOf("<")));var o=JSON.parse(e);"error"==o.responseEvent?null!=t.dialg&&t.dialg.show(o.serverResponse):t.ResponseController(o)}else 404==this.status&&null!=t.dialg&&t.dialg.show("Please check your internet connection, and refresh your page")},o.addEventListener("error",function(){null!=t.dialg&&t.dialg.show("Please check your internet connection, and refresh your page")});var n=JSON.stringify(e);o.timeout=55e3,o.open("POST","https://api.gamerbuild.co/game/CelestialTigerJW/server?token="+localStorage.getItem('game_token'),!0),o.setRequestHeader("Content-Type","application/json; charset=utf-8"),o.send(n)},e.prototype.ResponseController=function(e){r.NetTrans.onCommand(e)},e.prototype.resetDialog=function(){t._instance.dialg=null,t._instance.loadingRes=!1},e._instance=null,t=n([a],e)}();o.default=s,cc._RF.pop()},{"./NetTrans":"NetTrans","./Popup":"Popup"}],InterludeNode:[function(e,t,o){"use strict";cc._RF.push(t,"4e9f2+LHZFGkoAl+PHTo453","InterludeNode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/Tools"),l=e("./Common"),s=e("./Enum"),c=e("./Global").Global.ResSpinePath,p=e("./GoldTiger"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deleteInterludeList=[],t.root=null,t}return i(t,e),t.prototype.onLoad=function(){this.root=new cc.Node,this.node.addChild(this.root)},t.prototype.deleteInterlude=function(e){this.deleteInterludeList[e]&&(this.deleteInterludeList[e](),this.deleteInterludeList[e]=null)},t.prototype.createInterlude=function(e){var t,o=this,n=(t={},t[s.InterludeType.FGEntry]={path:c.FG+"NG_pickBounsGC",loadList:[c.FG+"NG_pickBounsGC"],animation:"guochang",scale:p.default.theme.gameLayer.bgScale,effect:[{path:l.Common.s_sound.PickTransition,delay:0}],cutTime:2.16,allTime:3.13,level:2,upperHeadFooter:!0},t[s.InterludeType.FGExit]={path:c.FG+"NG_pickBounsGC",loadList:[c.FG+"NG_pickBounsGC"],animation:"guochang",scale:p.default.theme.gameLayer.bgScale,effect:[{path:l.Common.s_sound.PickTransition,delay:0}],cutTime:2.16,allTime:3.13,level:2,upperHeadFooter:!0},t[s.InterludeType.BGEntry]={path:c.BG+"NG_respinguochang",loadList:[c.BG+"NG_respinguochang",c.BG+"NG_respinguochang2"],animation_start:"kaishi",animation_idle:"xunhuan",animation_end:"jieshu",controlFlag:!0,effect:[{path:l.Common.s_sound.RespinTransition,delay:0}],voice:{},cutTime:2.16,allTime:3.13,level:2,blackLevel:230,blackDelayTime:1.33,upperHeadFooter:!0},t[s.InterludeType.FGBGEntry]={path:c.FG+"Pick_RespinGuoChang",animation:"guochang",effect:[{path:l.Common.s_sound.PickRespin,delay:0}],voice:{},cutTime:2.16,allTime:4.33,level:2,blackLevel:230,blackDelayTime:1.33,upperHeadFooter:!0,ignoreBlackLayer:!0},t[s.InterludeType.MapBGEntry]={path:c.FG+"NG_jinhu",loadList:[c.FG+"NG_jinhu"],animation:"gc",effect:[{path:l.Common.s_sound.MapTransition,delay:0}],cutTime:2.16,allTime:3.13,level:2,blackLevel:230,blackDelayTime:1.33,upperHeadFooter:!0},t[s.InterludeType.BGExit]={path:c.BG+"NG_respinguochang",loadList:[c.BG+"NG_respinguochang",c.BG+"NG_respinguochang2"],animation_start:"kaishi",animation_idle:"xunhuan",animation_end:"jieshu",controlFlag:!0,effect:[{path:l.Common.s_sound.RespinTransition,delay:0}],cutTime:2.16,allTime:3.13,level:2,upperHeadFooter:!0},t[s.InterludeType.FGBGExit]={path:c.BG+"NG_respinguochang",loadList:[c.BG+"NG_respinguochang",c.BG+"NG_respinguochang2"],animation_start:"kaishi",animation_idle:"xunhuan",animation_end:"jieshu",controlFlag:!0,effect:[{path:l.Common.s_sound.RespinTransition,delay:0}],cutTime:2.16,allTime:3.13,level:2,upperHeadFooter:!0},t[s.InterludeType.MapBGExit]={path:c.FG+"NG_jinhu",loadList:[c.FG+"NG_jinhu"],animation:"gc",effect:[{path:l.Common.s_sound.MapTransition,delay:0}],cutTime:2.16,allTime:3.13,level:2,upperHeadFooter:!0},t)[e],i=n.cutTime,a=n.allTime,u=function(e){var t=n.effect[e];r.funcDelay(function(){r.playEffect(t.path,!1)},t.delay)};for(var h in n.effect)u(h);if(n.voice){var d=function(e){var t=n.voice[e];r.funcDelay(function(){r.playVoice(t.path,!1)},t.delay)};for(var h in n.voice)d(h)}var m=n.path,f=n.animation||"animation",_=n.controlFlag||!1,y=n.animation_start,g=n.animation_idle,T=n.animation_end,S=cc.v3(0,0),E=n.ignoreBlackLayer||!1,b=n.level||1,C=n.scale||1,v=n.blackLevel||200,N=n.blackDelayTime||0,L=n.loadList||[];return p.default.theme.preloadImgResAsync(L,function(){}),function(){if(r.checkAniRes(m)){var t=r.createAni(m).getComponent(sp.Skeleton);t.node.setScale(C),t.node.setPosition(S.x,S.y);var i=n.upperHeadFooter?cc.director.getScene().getChildByName("Canvas"):o.root;if(n.upperHeadFooter?cc.director.getScene().getChildByName("Canvas").addChild(t.node,b):o.root.addChild(t.node,b),_){var l=[];cc.tween(t.node).call(function(){t.setAnimation(0,y,!1),t.addAnimation(0,g,!0)}).start(),l.push(function(){t.node.stopAllActions(),t.setAnimation(0,T,!1),cc.tween(t.node).delay(2).removeSelf().call(function(){p.default.theme.unloadImgRes(L)}).start()}),E||cc.tween(t.node).delay(N).call(function(){var e=r.createBlackLayer({fatherNode:i,zOrder:b-1,time:.5,opacity:v});l.push(function(){r.deleteBlackLayer(e,.5)})}).start(),o.deleteInterludeList[e]&&(r.showErrorPop(["createInterlude exist interludeDeleteFunc interludeType=",s.InterludeTypeTurn[e-1]]),o.deleteInterlude(e)),o.deleteInterludeList[e]=function(){for(var e in l)(0,l[e])()}}else cc.tween(t.node).call(function(){t.setAnimation(0,f,!1)}).delay(a).removeSelf().call(function(){p.default.theme.unloadImgRes(L)}).start(),E||r.funcDelay(function(){var e=r.createBlackLayer({fatherNode:i,zOrder:b-1,time:.5,opacity:v});r.funcDelay(function(){r.deleteBlackLayer(e,.5)},a-.5-N)},N)}}(),[i,a]},a([h],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../Base/Tools":"Tools","./Common":"Common","./Enum":"Enum","./Global":"Global","./GoldTiger":"GoldTiger"}],JackpotLayer:[function(e,t,o){"use strict";cc._RF.push(t,"9da179wOqdJS4+4jBAENuHZ","JackpotLayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/BetControl"),l=e("../Base/Common_Base"),s=e("../Base/EventCenter"),c=e("../Base/Tools"),p=e("./Common"),u=e("./Global"),h=u.Global.GameTypePrivate,d=u.Global.jpName,m=u.Global.ResImagePath,f=u.Global.ResSpinePath,_=e("./GoldTiger"),y=[!1,!1,!1,!1,!1],g={},T=null,S=[],E=cc._decorator,b=E.ccclass,C=(E.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tableFrameElementMap={},t.setJPFrameGrey=null,t.setJPFrameNormal=null,t}return i(t,e),t}(cc.Node)),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipNode=null,t}return i(t,e),t}(cc.Node),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.changeShape=null,t}return i(t,e),t}(cc.Node),L=function(e){function t(){var t=e.call(this)||this;t.TAG="theme.JackpotLayer",t.betBtn=[],t.jpCmdCallback=null,t.JPNum=0,t.JPInterval=10,t.jpLastSendTime=0,t.jpLastReceiveTime=0,t.jpName=[],t.jpConfig={},t.jpPosY=0,t.isMimicking=!1,t.mimicDuration=0,t.jackpotTargetList=[],t.jackpotLastTargetList=[],t.jackpotCurrentList=[],t.jackpotNumList=[],t.jackpotNumScaleList=[],t.jackpotLastList=[],t.mimicJpIndexes=[],t.mimicJpValues=[],t.mimicJpRealValues=[],t.mimicJpStartValues=[],t.mimicStartTime=0,t.state=0,t.root=null,t.frame=null,t.visibleSize=null,t.centerX=0,t.centerY=0;var o=t;return o.JPInterval=10,o.jpLastSendTime=0,o.jpLastReceiveTime=0,o.jpPosY=0,o.isMimicking=!1,o.mimicDuration=0,o.init(),t}return i(t,e),t.prototype.sendThemeJpCmd=function(){_.default.theme.ctl.sendThemeJpCmd()},t.prototype.addJPCmdCallback=function(e){this.jpCmdCallback=e},t.prototype.cleanJPCmdCallback=function(){this.jpCmdCallback=null},t.prototype.onJpCmd=function(e){for(var t=1;t<=this.JPNum;t++)this.jackpotNumList[t-1].string=p.num_with_commas(e.jp_value[t-1]),this.jackpotNumList[t-1].node.active=!0},t.prototype.init=function(){return!0},t.prototype.reset=function(e){this.jpLastSendTime=0;var t=e.splice();if(t&&!(t.length<this.JPNum)){for(var o=1;o<=t.length;o++)t[o-1]=t[o-1]*_.default.theme.ctl.getCurTotalBet();for(this.jackpotTargetList=t.splice(),this.jackpotLastTargetList=t.splice(),this.jackpotCurrentList=t,o=1;o<=this.JPNum;o++)this.jackpotNumList[o-1].node.active=!0}},t.prototype.assemble=function(){this.root=new cc.Node,this.node.addChild(this.root),this.root.setPosition(_.default.theme.gameLayer.getCenterPos()),this.jpName=[],this.jackpotNumList=[],this.jackpotNumScaleList=[],this.jackpotLastList=[],this.mimicJpIndexes=[],this.mimicJpValues=[],this.mimicJpRealValues=[],this.mimicJpStartValues=[],this.JPNum=d.length;for(var e=1;e<=this.JPNum;e++)this.jackpotNumList[e-1]=c.createFont("jp"),this.jackpotNumList[e-1].fontSize=2*this.jackpotNumList[e-1].fontSize,this.jackpotNumScaleList[e-1]=new cc.Node,this.jackpotNumScaleList[e-1].addChild(this.jackpotNumList[e-1].node),this.root.addChild(this.jackpotNumScaleList[e-1],3);return this.createFrame(),this.createBetBtn(),this.updateJPState(),this.resetForMimic(),s.default.registerEvent(l.EVT.SYSTEM.BET_CHANGE,this.changeLockState,this),s.default.registerEvent(l.EVT.SYSTEM.CHANGE_LANG,this.translateJP,this),s.default.pushEvent(l.EVT.SYSTEM.CHANGE_LANG),!0},t.prototype.upadteJPFrame=function(e){var t=this.jpConfig[e];c.checkNodeExist(this.frame.tableFrameElementMap[d[e-1]])&&(this.frame.tableFrameElementMap[d[e-1]].setPosition(t.framePos),this.frame.tableFrameElementMap[d[e-1]].setScale(t.frameScale))},t.prototype.createFrame=function(){var e=this;e.frame=new C;var t=[],o=[cc.v3(-328.5,265),cc.v3(-107,265),cc.v3(114.5,265),cc.v3(336,265)],n=[{key:d[0],path:"jp_frame_"+d[0],pos:o[0],scaleX:1,scaleY:1,anchorPoint:null},{key:d[1],path:"jp_frame_"+d[1],pos:o[1],scaleX:1,scaleY:1},{key:d[2],path:"jp_frame_"+d[2],pos:o[2],scaleX:1,scaleY:1},{key:d[3],path:"jp_frame_"+d[3],pos:o[3],scaleX:1,scaleY:1}];e.frame.tableFrameElementMap={};for(var i=1;i<=n.length;i++){var a=c.addImage(m.NG+n[i-1].path);a.setAnchorPoint(n[i-1].anchorPoint||cc.v3(.5,.5)),a.setPosition(n[i-1].pos),a.setScale(n[i-1].scaleX,n[i-1].scaleY),n[i-1].key&&(e.frame.tableFrameElementMap[n[i-1].key]=a),t.push(a)}for(i=1;i<=t.length;i++)e.frame.addChild(t[i-1]);e.frame.setPosition(0,0),e.frame.setJPFrameGrey=function(t){c.setTexture(e.frame.tableFrameElementMap[d[t-1]].getComponent(cc.Sprite),m.NG+"jp_frame_"+d[t-1]+"_lock")},e.frame.setJPFrameNormal=function(t){c.setTexture(e.frame.tableFrameElementMap[d[t-1]].getComponent(cc.Sprite),m.NG+"jp_frame_"+d[t-1])},e.root.addChild(e.frame)},t.prototype.getNamePath=function(e){var t=d[e-1];return y[e-1]?l.translateImage("jp_name_"+t+"_lock"):l.translateImage("jp_name_"+t)},t.prototype.createJpName=function(e){var t,o=this;y[e-1],(t=c.addImage(o.getNamePath(e))).translateSelf=function(){c.setTexture(t.getComponent(cc.Sprite),o.getNamePath(e))},o.root.addChild(t,4),c.checkNodeExist(o.jpName[e-1])&&(o.jpName[e-1].removeFromParent(),o.jpName[e-1]=null),o.jpName[e-1]=t},t.prototype.deleteJPName=function(e){var t=this.jpName[e-1];c.checkNodeExist(t)&&t.removeFromParent(),this.jpName[e-1]=null},t.prototype.updateJpName=function(e){var t=this.jpName[e-1];c.checkNodeExist(t)?"animation"==t.nodeType?y[e-1]?(t.removeFromParent(),this.jpName[e-1]=null,this.createJpName(e)):t.translateSelf():(y[e-1],t.translateSelf()):this.createJpName(e);var o=this.jpConfig[e];c.checkNodeExist(this.jpName[e-1])&&(this.jpName[e-1].setPosition(o.namePos),this.jpName[e-1].setScale(o.nameScale))},t.prototype.translateJP=function(){for(var e=1;e<=this.JPNum;e++)this.updateJpName(e)},t.prototype.updateJPState=function(){var e,t,o=_.default.theme.gameLayer.getGameTypePrivate();if(this.state=o,o==h.FG){var n=0;this.jpConfig=((e={})[1]={namePos:cc.v3(-469.5,240),numPos:cc.v3(-467.5,216+n),nameScale:.95,numScale:.95,numWidth:185,numHeight:30,framePos:cc.v3(-469,222),frameScale:.95},e[2]={namePos:cc.v3(-260.5,240),numPos:cc.v3(-258.5,216+n),nameScale:.95,numScale:.95,numWidth:185,numHeight:30,framePos:cc.v3(-259.5,222),frameScale:.95},e[3]={namePos:cc.v3(-50.5,240),numPos:cc.v3(-48.5,216+n),nameScale:.95,numScale:.95,numWidth:185,numHeight:30,framePos:cc.v3(-50.5,222),frameScale:.95},e[4]={namePos:cc.v3(159.5,240),numPos:cc.v3(160.5,216+n),nameScale:.95,numScale:.95,numWidth:185,numHeight:30,framePos:cc.v3(159,222),frameScale:.95},e),c.changeFather(this.root,_.default.theme.gameLayer.spinLayer.effectLayer.pickNode.root,2),this.root.setPosition(0,0)}else n=0,this.jpConfig=((t={})[1]={namePos:cc.v3(-329.5,283),numPos:cc.v3(-327.5,257.5+n),nameScale:1,numScale:1,numWidth:185,numHeight:30,framePos:cc.v3(-328.5,265),frameScale:1},t[2]={namePos:cc.v3(-107.5,282.5),numPos:cc.v3(-106.5,257.5+n),nameScale:1,numScale:1,numWidth:185,numHeight:30,framePos:cc.v3(-107,265),frameScale:1},t[3]={namePos:cc.v3(113.5,282.5),numPos:cc.v3(115.5,257.5+n),nameScale:1,numScale:1,numWidth:185,numHeight:30,framePos:cc.v3(114.5,265),frameScale:1},t[4]={namePos:cc.v3(335.5,283),numPos:cc.v3(336.5,257.5+n),nameScale:1,numScale:1,numWidth:185,numHeight:30,framePos:cc.v3(336,265),frameScale:1},t),c.changeFather(this.root,this.node,0),this.root.setPosition(_.default.theme.gameLayer.getCenterPos());for(var i=1;i<=this.JPNum;i++){var a=this.jpConfig[i];this.deleteJPName(i),this.updateJpName(i),this.jackpotNumScaleList[i-1].setPosition(a.numPos),l.setLabelWidthHeight(this.jackpotNumList[i-1],a.numWidth/a.numScale,a.numHeight/a.numScale),this.upadteJPFrame(i)}},t.prototype.updateTargetJackpot=function(e){if(null!=e){if(_.default.theme.gameLayer.receivedJPData=!0,null==this.jackpotTargetList&&(this.jackpotTargetList=[]),null==this.jackpotLastTargetList)this.jackpotLastTargetList=[];else for(var t=1;t<=this.JPNum;t++)this.jackpotLastTargetList[t-1]=this.jackpotTargetList[t-1];for(t=1;t<=this.JPNum;t++)this.jackpotTargetList[t-1]=Number(e[t-1]||2^t);if(_.default.reconnectFlagList.BG)for(t=1;t<=this.JPNum;t++)this.jackpotLastTargetList[t-1]=this.jackpotTargetList[t-1];this.jpLastReceiveTime=Date.now()}},t.prototype.updateJackpotDisplay=function(){for(var e=1;e<=this.JPNum;e++)this.jackpotLastList[e-1]!=this.jackpotCurrentList[e-1]&&(this.jackpotLastList[e-1]=this.jackpotCurrentList[e-1],this.jackpotNumList[e-1].string=c.num_2_str(this.jackpotCurrentList[e-1])),this.jackpotNumList[e-1].node.active=!0},t.prototype.startMimic=function(e,t){this.isMimicking=!0,this.mimicJpIndexes[e-1]=!0,this.mimicJpValues[e-1]=t},t.prototype.setMimicDuration=function(e){this.mimicDuration=e,this.mimicStartTime=Date.now();for(var t=1;t<=this.JPNum;t++)this.jackpotCurrentList&&(this.mimicJpStartValues[t-1]=this.jackpotCurrentList[t-1])},t.prototype.stopMimic=function(){if(this.isMimicking){this.isMimicking=!1;for(var e=1;e<=this.JPNum;e++)1==this.mimicJpIndexes[e-1]&&(this.jackpotTargetList[e-1]=this.mimicJpRealValues[e-1]);this.resetForMimic()}},t.prototype.resetForMimic=function(){for(var e=1;e<=this.JPNum;e++)this.mimicJpIndexes[e-1]=!1,this.mimicJpValues[e-1]=-1,this.mimicJpRealValues[e-1]=-1,this.mimicJpStartValues[e-1]=0,this.mimicStartTime=null,this.mimicDuration=0},t.prototype.stopMimicByIndex=function(e){if(this.isMimicking&&1==this.mimicJpIndexes[e-1]){this.jackpotTargetList[e-1]=this.mimicJpRealValues[e-1],this.resetForMimicByIndex(e);for(var t=!0,o=1;o<=this.JPNum;o++)if(1==this.mimicJpIndexes[o-1]){t=!1;break}1==t&&this.stopMimic()}},t.prototype.resetForMimicByIndex=function(e){this.mimicJpIndexes[e-1]=!1,this.mimicJpValues[e-1]=-1,this.mimicJpRealValues[e-1]=-1,this.mimicJpStartValues[e-1]=0},t.prototype.setMimicJpValue=function(e,t){this.mimicJpValues[e-1]=t},t.prototype.hideJackpot=function(){this.node.active=!1},t.prototype.showJackpot=function(){this.node.active=!0},t.prototype.deleteBetTipBoard=function(){l.default.unscheduleFunc(this.deleteBetTipBoard,_.default.theme.gameLayer),c.checkNodeExist(T)&&(cc.tween(T).delay(1).removeSelf().start(),T.tipNode.stopAllActions(),T.tipNode.setScale(1),cc.tween(T.tipNode).to(.3,{scale:0}).start(),T=null)},t.prototype.createTipBoard=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var o=c.addImage(m.NG+"jp_tip_straight"),n=c.addImage(m.NG+"jp_tip_side"),i=c.addImage(m.NG+"jp_tip_point"),a=c.addImage(m.NG+"jp_tip_straight"),r=c.addImage(m.NG+"jp_tip_side"),l=new N;return l.addChild(n),l.addChild(r),l.addChild(o),l.addChild(a),l.addChild(i),l.changeShape=function(e,t){t>1?t=1:t<0&&(t=0);var l=e-25,s=l*t,c=l*(1-t);o.scaleX=s/56,o.setAnchorPoint(1,0),o.setPosition(-12.5,-62),n.setAnchorPoint(1,0),n.setPosition(-12.5-s,-62),i.setAnchorPoint(.5,0),i.setPosition(0,-62),a.scaleX=c/56,a.setAnchorPoint(0,0),a.setPosition(12.5,-62),r.scaleX=-1,r.setAnchorPoint(1,0),r.setPosition(12.5+c,-62)},e&&t&&l.changeShape(e,t),l},t.prototype.refreshTipBoard=function(e){this.deleteBetTipBoard(),T=new v;var t=this.createTipBoard(),o=c.addImage(c.transPng(1==e?"jp_tip_text_unlock":"jp_tip_text_lock")),n=o.getContentSize().width;t.changeShape(n,.5),o.position=cc.v3(o.position.x,-35),o.setAnchorPoint(.5,.5),T.setPosition(-328.5,220),this.root.addChild(T,6,"tipBoard"),c.changeFather(T,_.default.theme.gameLayer.spinLayer.spinTable.node,1e4),T.tipNode=new cc.Node,T.addChild(T.tipNode),T.tipNode.addChild(t),T.tipNode.addChild(o),T.tipNode.setPosition(0,25),T.tipNode.setScale(0),cc.tween(T.tipNode).to(.3,{scale:1}).start(),l.default.addCallFunc(this.deleteBetTipBoard,1.5,this,_.default.theme.gameLayer)},t.prototype.changeLockState=function(){var e=_.default.theme.ctl.getCurBet()>=r.default.getMinLargeBet();e?this.unLock(1):this.lock(1);var t=e?1:0;g&&_.default.initFlag,g!=t&&this.refreshTipBoard(t),g=t},t.prototype.lock=function(e){if(!y[e-1]){y[e-1]=!0,this.betBtn[e-1].interactable=!0,this.updateJpName(e),c.checkNodeExist(this.jackpotNumList[e-1])&&(this.jackpotNumList[e-1].node.color=cc.color(200,200,200));var t=c.createAni(f.NG+"NG_meter").getComponent(sp.Skeleton);t.node.setPosition(this.jpConfig[e].numPos.x+160,this.jpConfig[e].numPos.y),cc.tween(t.node).call(function(){t.setAnimation(0,"lock_jp",!1)}).delay(2).removeSelf().start(),this.root.addChild(t.node,10),this.frame.setJPFrameGrey(e)}},t.prototype.unLock=function(e){if(y[e-1]){y[e-1]=!1,this.betBtn[e-1].interactable=!1,this.updateJpName(e),c.checkNodeExist(this.jackpotNumList[e-1])&&(this.jackpotNumList[e-1].node.color=cc.color(255,255,255));var t=c.createAni(f.NG+"NG_meter").getComponent(sp.Skeleton);t.node.setPosition(this.jpConfig[e].numPos.x+160,this.jpConfig[e].numPos.y),cc.tween(t.node).call(function(){t.setAnimation(0,"unlock_jp",!1)}).delay(2).removeSelf().start(),this.root.addChild(t.node,10),this.frame.setJPFrameNormal(e)}},t.prototype.onClick=function(){var e=r.default.getMinLargeBet();_.default.theme.ctl.getCurBet()<e&&_.default.theme.ctl.getOtherBtnsEnableState()&&r.default.getMaxBet()>=e&&_.default.theme.ctl.betControl.changeToBet(e)},t.prototype.createBetBtn=function(){var e=this;e.betBtn=[];for(var t=[cc.size(233,76),cc.size(233,76),cc.size(233,76),cc.size(233,76)],o=[cc.v3(-328.5,265),cc.v3(-107,265),cc.v3(114.5,265),cc.v3(336,265)],n=1;n<=e.JPNum;n++){var i=c.createBtnWithSize(t[n-1],{handler:function(t){t.target.getComponent(cc.Button).interactable&&t.type==cc.Node.EventType.TOUCH_END&&e.onClick()},target:e});i.node.setPosition(o[n-1]),i.interactable=!1,e.root.addChild(i.node,4),i.node.name=n+"",e.betBtn[n-1]=i}},t.prototype.hideBetBtn=function(){for(var e in this.betBtn)this.betBtn[e].node.active=!1},t.prototype.showBetBtn=function(){for(var e in this.betBtn)this.betBtn[e].node.active=!0},t.prototype.hideLockAni=function(){for(var e=1;e<=this.JPNum;e++)c.checkNodeExist(S[e-1])&&S[e-1].setVisible(!1)},t.prototype.showLockAni=function(){for(var e=1;e<=this.JPNum;e++)c.checkNodeExist(S[e-1])&&S[e-1].setVisible(!0)},t.prototype.showWinFrame=function(e){var t=c.createAni(f.FG+"PICK_xian").getComponent(sp.Skeleton);cc.tween(t.node).call(function(){t.setAnimation(0,"xian",!0)}).start(),t.node.setPosition(this.jpConfig[e].framePos),this.root.addChild(t.node,5)},t.prototype.hideWinFrame=function(){},a([b],t)}(cc.Component);o.default=L,cc._RF.pop()},{"../Base/BetControl":"BetControl","../Base/Common_Base":"Common_Base","../Base/EventCenter":"EventCenter","../Base/Tools":"Tools","./Common":"Common","./Global":"Global","./GoldTiger":"GoldTiger"}],LabelNumRoll:[function(e,t,o){"use strict";cc._RF.push(t,"d470859kZ9F7JP+3grgqU1N","LabelNumRoll");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Game/Common"),l=e("../Game/Common"),s=cc._decorator,c=s.ccclass,p=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.exist=null,t.startRollCallback=null,t.nrCurValue=null,t.nrSecFrame=null,t.digitNum=null,t.deZero=null,t.nrStartValue=null,t.nrEndValue=null,t.nrStartTime=null,t.nrPlayDur=null,t.showCallback=null,t}return i(t,e),t.prototype.nrInit=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null),this.nrCurValue=e,this.nrSecFrame=t,this.digitNum=n||0},t.prototype.setDeZero=function(e){this.deZero=e},t.prototype.nrStartRoll=function(e,t,o){var n=this;e&&(n.nrCurValue=e),n.nrStartValue=n.nrCurValue,n.nrEndValue=t,n.nrStartTime=(new Date).getTime()/1e3,n.nrPlayDur=o,n.node.getActionByTag(10101010)||(cc.tween(n.node).tag(10101010).repeatForever(cc.tween().delay(1/n.nrSecFrame).call(function(){if(n.nrCurValue!=n.nrEndValue&&null!=n.nrEndValue){var e=(new Date).getTime()/1e3-n.nrStartTime;n.nrCurValue=n.nrStartValue+(n.nrEndValue-n.nrStartValue)*e/n.nrPlayDur,n.nrCurValue>=100?0==n.digitNum?(n.nrCurValue=Math.floor(n.nrCurValue*Math.pow(10,n.digitNum))/Math.pow(10,n.digitNum),n.nrCurValue=Math.floor(n.nrCurValue)):(n.nrCurValue=Math.floor(n.nrCurValue*(10^n.digitNum)),n.nrCurValue=n.nrCurValue*Math.pow(10,n.digitNum)/Math.pow(10,n.digitNum),n.nrCurValue=n.nrCurValue/(10^n.digitNum)):0==n.digitNum?n.nrCurValue=Math.floor(n.nrCurValue*Math.pow(10,n.digitNum))/Math.pow(10,n.digitNum):(n.nrCurValue=Math.floor(n.nrCurValue*(10^n.digitNum)),n.nrCurValue=n.nrCurValue*Math.pow(10,n.digitNum)/Math.pow(10,n.digitNum),n.nrCurValue=n.nrCurValue/(10^n.digitNum)),e>=n.nrPlayDur&&n.nrStopRoll(!0),n._showCurValue()}})).start(),n._showCurValue())},t.prototype.nrStopRoll=function(e){void 0===e&&(e=null),this.node.getActionByTag(10101010)&&(cc.Tween.stopAllByTag(10101010),e&&(this.nrCurValue=this.nrEndValue),this._showCurValue(!0))},t.prototype.nrGetCurValue=function(){return this.nrCurValue},t.prototype.nrGetEndValue=function(){return this.nrEndValue},t.prototype.nrSetCurValue=function(e){this.nrCurValue=e,this._showCurValue()},t.prototype._showCurValue=function(e){void 0===e&&(e=!1),this.deZero&&0==this.nrCurValue?this.string="":null!=this.nrCurValue&&null!=this.nrCurValue&&(this.string=e?l.addComma2Digits(this.nrCurValue):r.addComma2DigitsWithZero(this.nrCurValue)),this.showCallback&&this.showCallback()},t.prototype.setShowCallback=function(e){this.showCallback=e},a([c],t)}(cc.Label));o.default=p,cc._RF.pop()},{"../Game/Common":"Common"}],LanguageData:[function(e,t){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var o=e("polyglot.min"),n=null;function i(e){return window.i18n.languages[e]}function a(e){e&&(n?n.replace(e):n=new o({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),t.exports={init:function(e){if(e!==window.i18n.curLang){var t=i(e)||{};window.i18n.curLang=e,a(t),this.inst=n}},t:function(e,t){if(n)return n.t(e,t)},inst:n,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],o=0;o<e.length;++o){var n=e[o].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,n)}for(var i=0;i<t.length;++i){var a=t[i];a.node.active&&a.updateLabel()}for(var r=[],l=0;l<e.length;++l){var s=e[l].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(r,s)}for(var c=0;c<r.length;++c){var p=r[c];p.node.active&&p.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],Language:[function(e,t,o){"use strict";cc._RF.push(t,"68a5bFn/kJMjosr1oE9aZY5","Language");var n=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,r=(i.property,e("../../resources/i18n/i18n")),l=function(){function e(){}var t;return t=e,e.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},e.prototype.initLang=function(e){r.i18n.init(e)},e.prototype.getString=function(e){return r.i18n.t(e)},t=n([a],e)}();o.default=l,cc._RF.pop()},{"../../resources/i18n/i18n":void 0}],LineAnimator:[function(e,t,o){"use strict";cc._RF.push(t,"44a30uCQGJABq6EEmKq/EIM","LineAnimator");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GoldTiger"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TAG="ThemeGoldTigerLinAnimator",t.spinElementList=[],t}return i(t,e),t.prototype.destruct=function(){this.node.removeFromParent()},t.prototype.sync=function(){this.spinElementList=[];for(var e=r.default.theme.gameLayer.spinLayer.spinTable.getCellList(),t=1;t<=e.length;t++){for(var o=e[t-1].getVisibleCellsIndexList(),n=1;n<=r.default.RowNum-o.length;n++)this.spinElementList.push(null);for(n=1;n<=o.length;n++)this.spinElementList.push(o[n-1])}},t.prototype.getSpinElementList=function(){return this.spinElementList},t.prototype.performLineAnimation=function(e){for(var t=1;t<=this.spinElementList.length;t++)e[t-1]>0&&this.spinElementList[t-1]&&this.spinElementList[t-1].performLineAnimation()},t.prototype.performAnimation=function(e){for(var t=1;t<=this.spinElementList.length;t++)e[t-1]>0&&this.spinElementList[t-1]&&this.spinElementList[t-1].performAnimation(e[t-1])},t.prototype.stopLineAnimation=function(){for(var e=1;e<=this.spinElementList.length;e++)this.spinElementList[e-1]&&this.spinElementList[e-1].stopLineAnimation&&this.spinElementList[e-1].stopLineAnimation()},t.prototype.stopAnimation=function(e){void 0===e&&(e=null);for(var t=1;t<=this.spinElementList.length;t++)e&&e[t-1]>0||this.spinElementList[t-1]&&this.spinElementList[t-1].stopAnimation&&this.spinElementList[t-1].stopAnimation()},t.prototype.performAllLine=function(e){this.performLineAnimation(e),this.performAnimation(e)},t.prototype.checkSymbol=function(e,t){for(var o=1;o<=this.spinElementList.length;o++)if(t[o-1]>0&&this.spinElementList[o-1]&&this.spinElementList[o-1].getSymbolIndex()==e)return!0;return!1},t.prototype.performScatterAnimation=function(e){for(var t=1;t<=this.spinElementList.length;t++)e[t-1]>0&&this.spinElementList[t-1]&&this.spinElementList[t-1].performScatterAnimation(e[t-1])},t.prototype.performBGScatterAnimation=function(e){for(var t=1;t<=this.spinElementList.length;t++)e[t-1]>0&&this.spinElementList[t-1]&&this.spinElementList[t-1].performBGScatterAnimation(e[t-1])},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{"./GoldTiger":"GoldTiger"}],LoadingController:[function(e,t,o){"use strict";cc._RF.push(t,"4ba39k8hdNGEbBjQGmwWTKB","LoadingController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r,l=e("../Common/NodeDialog"),s=e("../Game/Global"),c=e("../Common/HttpClient"),p=s.Global.WebMemCache,u=s.Global.CommonPlistPath,h=s.Global.PlistPath,d=s.Global.ResImagePath,m=s.Global.ResFontPath,f=s.Global.ResSpinePath,_=[h+"pick_+1",h+"pick_down",h+"pick_top_1",h+"pick_top_2"],y=[[0,[u+"header",u+"game_footer",h+"symbol"]],[1,[d.LANG+"footer/btn_spin_fg_dis_EN",d.LANG+"footer/btn_spin_fg_EN",d.LANG+"footer/btn_spin_ng_dis_EN",d.LANG+"footer/btn_spin_ng_EN",d.LANG+"footer/btn_stop_auto_EN",d.LANG+"footer/btn_stop_dis_EN",d.LANG+"footer/btn_stop_EN",d.Common+"default_panel",d.NG+"background_NG",d.NG+"jp_frame_grand_lock",d.NG+"collect_bar_blue",d.NG+"collect_bar_frame",d.NG+"collect_bar_red",d.NG+"collect_bar_target_frame",d.NG+"collect_bar_tip_board",d.NG+"jp_frame_grand",d.NG+"jp_frame_major",d.NG+"jp_frame_mini",d.NG+"jp_frame_minor",d.NG+"jp_tip_point",d.NG+"jp_tip_side",d.NG+"jp_tip_straight",d.NG+"reel_back",d.NG+"table_bar",d.NG+"table_ear_left",d.NG+"table_ear_text",d.NG+"table_frame_l",d.FG+"background_FG",d.FG+"rock_2",d.FG+"fg_table_frame_left",d.FG+"fgCountBoard",d.FG+"fg_reel_back",d.FG+"fg_add_time_1",d.FG+"fg_add_time_board",d.BG+"background_BG",d.BG+"tower_head",d.BG+"table_bar_h",d.BG+"tower_body",d.BG+"multi_point",d.BG+"shapestencil",d.BG+"collect_bar",d.BG+"collect_hole",d.POP+"btn_collect",d.POP+"btn_collect_down",d.POP+"btn_frame",d.POP+"btn_start",d.POP+"btn_start_down",d.POP+"game_fever_board",d.POP+"game_fever_btn",d.POP+"game_fever_btn_down",d.LANG+"bg_times_EN",d.LANG+"bg_time_EN",d.LANG+"btn_collect_EN",d.LANG+"btn_start_EN",d.LANG+"collect_bar_tip_text_EN",d.LANG+"fg_add_time_pick_EN",d.LANG+"free_game_EN",d.LANG+"free_game_single_EN",d.LANG+"Info_01_EN",d.LANG+"Info_02_EN",d.LANG+"Info_03_EN",d.LANG+"Info_04_EN",d.LANG+"Info_05_EN",d.LANG+"Info_game_fever_01_EN",d.LANG+"Info_game_fever_02_EN",d.LANG+"Info_game_fever_03_EN",d.LANG+"jp_name_grand_EN",d.LANG+"jp_name_grand_lock_EN",d.LANG+"jp_name_major_EN",d.LANG+"jp_name_mini_EN",d.LANG+"jp_name_minor_EN",d.LANG+"jp_tip_text_lock_EN",d.LANG+"jp_tip_text_unlock_EN",d.LANG+"pop_award_EN",d.LANG+"pop_bg_in_fortune_respin_EN",d.LANG+"pop_game_fever_btn_text_EN",d.LANG+"pop_game_fever_text_EN",d.LANG+"pop_game_fever_text_golden_EN",d.LANG+"pop_map_in_super_respin_EN",d.LANG+"pop_you_won_EN",d.LANG+"symbol_upper_grand_EN",d.LANG+"symbol_upper_major_EN",d.LANG+"symbol_upper_mini_EN",d.LANG+"symbol_upper_minor_EN"]],[2,[m+"hall_winsz_0",m+"jp_multi",m+"jp",m+"symbol_num",m+"symbol_num_big",m+"pick_num",m+"pop_total"]],[3,[f.Common+"Lobby_money_coin",f.Common+"Slot_Bet_max",f.Common+"BigWin/BigWin",f.Common+"BigWin/SuperWin",f.Common+"BigWin/MegaWin",f.Common+"BigWin/EpicWin",f.Common+"BigWin/UltimateWin",f.Common+"BigWin/BigWin_glow",f.Common+"BigWin/BigWin_K",f.NG+"ngbg",f.NG+"NG_yfk",f.NG+"NG_tp",f.NG+"NG_respinguochang",f.NG+"NG_meter",f.NG+"NG_denglong",f.NG+"NG_dajiang",f.NG+"NG_Click",f.NG+"NG_bar_collect",f.SYM+"BG_jinbi",f.SYM+"NG_H1",f.SYM+"NG_H2",f.SYM+"NG_H3",f.SYM+"NG_L1",f.SYM+"NG_L2",f.SYM+"NG_L3_L5",f.SYM+"NG_scatter",f.SYM+"NG_wild",f.FG+"BG_yingfen",f.FG+"NG_jinhu",f.FG+"NG_pickBounsGC",f.FG+"PICK_jinbi",f.FG+"Pick_lvbaoshi",f.FG+"PICK_shitoulan",f.FG+"Pick_shuzilan",f.FG+"PICK_xian",f.FG+"Rick_beiguang",f.FG+"Pick_RespinGuoChang",f.FG+"Pick_bg",f.BG+"NG_respinguochang",f.BG+"Respin_chengbeiguang",f.BG+"Respin_dajiang",f.BG+"Respin_dyf",f.BG+"Respin_jishupai",f.BG+"Respin_shouji",f.BG+"Respin_tp",f.BG+"SuperRespin",f.BG+"Respin_bg",f.POP+"TC_TY_btn",f.POP+"TC_PickBonus_bg",f.POP+"TC_PickBonus_text",f.POP+"TC_PickBonus_title",f.POP+"TC_PickBonus_coinframe",f.POP+"TC_Respin_diban",f.POP+"TC_Respin_text",f.POP+"TC_Map_bg",f.POP+"TC_Map_text",f.POP+"TC_JP_bg",f.POP+"TC_JP_title"]],[4,_]],g=(r=0,y.forEach(function(e){r+=Object.keys(e[1]).length}),r),T=0,S=0,E=cc._decorator,b=E.ccclass,C=E.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_ProgressBar=null,t.m_dialog=null,t.m_loadingSnd=null,t.audio_played=!1,t.m_currentLoadingTime=0,t.m_maxLoadingTime=5,t.m_lastLoadingProgress=0,t}return i(t,e),t.prototype.start=function(){var e=this;this.m_ProgressBar.progress=0,this.audio_played=!1;var t=window.location.search;new URLSearchParams(t),c.default.getInstance().resetDialog(),cc.director.preloadScene("GameScene",function(t,o){S=o+g,T=t,e.m_lastLoadingProgress<T/(S>770?S:770)&&(e.m_ProgressBar.progress=T/(S>770?S:770),e.m_lastLoadingProgress=e.m_ProgressBar.progress)},function(){e.preloadResources()})},t.prototype.preloadResources=function(){var e=this,t=this,o=0,n=0,i=function(){if(o>=y.length)return e.m_currentLoadingTime=e.m_maxLoadingTime,e.m_ProgressBar.progress=1,void c.default.getInstance().ServerConnect({SlotEvent:"getSettings"});var a=y[o][1][n],r=y[o][0];++n>=Object.keys(y[o][1]).length&&(o++,n=0),a?cc.resources.load(a,0==r?cc.SpriteAtlas:1==r?cc.Texture2D:2==r?cc.Font:3==r?sp.SkeletonData:4==r?cc.ParticleAsset:cc.Texture2D,function(e,o){t.m_ProgressBar.progress=++T/S,e&&console.log(e),t.m_ProgressBar.progress>.8&&!t.audio_played&&(t.audio_played=!0,cc.audioEngine.playMusic(t.m_loadingSnd,!1)),p[a]=o,i()}):i()};i()},t.prototype.update=function(){},a([C(cc.ProgressBar)],t.prototype,"m_ProgressBar",void 0),a([C(l.default)],t.prototype,"m_dialog",void 0),a([C(cc.AudioClip)],t.prototype,"m_loadingSnd",void 0),a([b],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../Common/HttpClient":"HttpClient","../Common/NodeDialog":"NodeDialog","../Game/Global":"Global"}],LocalizedLabel:[function(e,t){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var o=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){o.inst||o.init(),cc.log("dataID: "+this.dataID+" value: "+o.t(this.dataID)),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?o.t(this.dataID)&&(this.label.string=o.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var o=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:o}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MapPrizeNode:[function(e,t,o){"use strict";cc._RF.push(t,"db855yQ2pdEb6GgI9gG/H6t","MapPrizeNode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/Tools"),l=e("./Global"),s=l.Global.distanceX,c=l.Global.distanceY,p=l.Global.mapStartPosList,u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configList=[],t.nowIndex=0,t.nowPage=null,t.autoFlag=!1,t}return i(t,e),t.prototype.init=function(){this.configList=p,this.nowIndex=Math.floor(Math.random()*this.configList.length)+1,this.showPage(this.nowIndex),this.autoFlag=!0,this.autoChangePage()},t.prototype.showPage=function(e){e=e||1,this.nowIndex=(e-1)%this.configList.length+1;var t=this.configList[this.nowIndex-1];this.deleteNowPage();for(var o=new cc.Node,n=1;n<=t.length;n++){var i=(Math.floor(t[n-1]/3)-2)*s,a=(1-t[n-1]%3)*c,l=new cc.Node;l.addComponent(cc.Sprite).spriteFrame=r.getSymbolAtlas().getSpriteFrame("110059_13"),l.scale=.5,l.position=cc.v3(i,a),o.addChild(l)}o.scale=.1,r.setColorWithFather(o),o.opacity=0,cc.tween(o).to(.3,{opacity:255}).start(),this.addChild(o),this.nowPage=o},t.prototype.deleteNowPage=function(){this.nowPage&&(this.nowPage.stopAllActions(),cc.tween(this.nowPage).to(.3,{opacity:0}).removeSelf().start(),this.nowPage=null)},t.prototype.createChangePageBtn=function(){var e=this,t=r.createBtnWithSize(cc.size(85,50),{handler:function(t){t.target.getComponent(cc.Button).interactable&&t.type==cc.Node.EventType.TOUCH_END&&e.onChangePage()},target:e});e.addChild(t.node)},t.prototype.onChangePage=function(){this.autoFlag&&(this.showPage(this.nowIndex+1),this.autoChangePage())},t.prototype.autoChangePage=function(){var e=this;cc.Tween.stopAllByTag(15243),cc.tween(e).tag(15243).repeatForever(cc.tween().delay(8).call(function(){e.autoFlag&&e.showPage(e.nowIndex+1)})).start()},t.prototype.lockToIndex=function(e){this.showPage(e),this.autoFlag=!1},t.prototype.unlockAuto=function(){this.autoFlag=!0},a([h],t)}(cc.Node));o.default=d,cc._RF.pop()},{"../Base/Tools":"Tools","./Global":"Global"}],MapTower:[function(e,t,o){"use strict";cc._RF.push(t,"ab493HrVMhInbs49fuVm8r3","MapTower");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/Tools"),l=e("./Global"),s=l.Global.jpName,c=l.Global.jpUpperScale,p=l.Global.performTimeList,u=l.Global.SymbolNormal,h=l.Global.symbolNumBigScale,d=l.Global.symbolUpperNumScale,m=l.Global.symbolUpperTypeList,f=e("./GoldTiger"),_=cc._decorator,y=_.ccclass,g=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveTime=null,t.allSymbolNum=null,t.reelOrder=[],t.topIdx=null,t.cellList=null,t.posYList=[],t}return i(t,e),t.prototype.init=function(e){this.moveTime=p.towerMoveTime;var t=e.reelOrder,o=e.headIndex,n=e.distanceY,i=e.allSymbolNum;this.allSymbolNum=i,this.reelOrder=t,this.topIdx=o-1;var a=-n/2,l=r.createQueue(),s=[];s[0]=a+n;for(var c=1;c<=this.allSymbolNum;c++){s[c]=a-(c-1)*n,this.topIdx=this.topIdx+1;var u=this.createSymbolWithIndex(this.reelOrder[this.topIdx-1]);u.position=cc.v3(0,s[c]),l.enQueue(u),this.node.addChild(u)}this.cellList=l,this.posYList=s},t.prototype.rollNext=function(){for(var e=1;e<=this.allSymbolNum;e++){var t=cc.v3(0,this.posYList[e-1]);cc.tween(this.cellList.getValue(e)).to(this.moveTime,{position:t}).start()}this.topIdx=this.topIdx+1;var o=this.cellList.deQueue();cc.tween(o).delay(this.moveTime).removeSelf().start();var n=this.createSymbolWithIndex(this.reelOrder[this.topIdx-1]);n.position=cc.v3(0,this.posYList[this.allSymbolNum]),this.cellList.enQueue(n),this.node.addChild(n)},t.prototype.createSymbolWithIndex=function(e){var t=new cc.Node;if(r.between(e,15,30)){var o=10,n=e;(y=(new cc.Node).addComponent(cc.Sprite)).spriteFrame=r.getSymbolAtlas().getSpriteFrame(u[o]),y.node.scale=.5;var i=m[n],a=i*f.default.theme.avg_bet,l="symbol_num",p=1;i>=5&&(p=h,l="symbol_num_big");var _=r.createFont(l);_.node.setScale(d*p),_.string=r.num_2_str(a),t.addChild(y.node),t.addChild(_.node)}else if(r.findElementInList([33,34],e)){var y;o=e,n=e,(y=(new cc.Node).addComponent(cc.Sprite)).spriteFrame=r.getSymbolAtlas().getSpriteFrame(u[o]),y.node.scale=.5;var g=m[n],T=r.addImage(r.transPng("symbol_upper_"+s[g-1]));T.scale=c,t.addChild(y.node),t.addChild(T)}return r.setColorWithFather(t),t},t.prototype.performSymbolScratch=function(e,t){cc.tween(this.cellList.getValue(e)).to(t,{opacity:0}).start()},a([y],t)}(cc.Component));o.default=g,cc._RF.pop()},{"../Base/Tools":"Tools","./Global":"Global","./GoldTiger":"GoldTiger"}],MusicManager:[function(e,t,o){"use strict";cc._RF.push(t,"5b7c6rcbTZJiLhV+qUjQMfU","MusicManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/ThemeControlNew"),l=e("./Common"),s=e("./GoldTiger"),c=cc._decorator,p=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundFiles=[],t.soundId=[],t.playingMusicID=0,t}var o;return i(t,e),o=t,t.prototype.loadSound=function(e){for(var t=0;t<e.length;t++)this.soundFiles[t]=e[t]},t.getInstance=function(){return null==o._instance&&(o._instance=new o),o._instance},t.prototype.playEffect=function(e,t,o){return void 0===t&&(t=!0),void 0===o&&(o=!0),null!=o&&1!=o||null!=this.soundId[e]&&cc.audioEngine.stopEffect(this.soundId[e]),null==t&&(t=!1),this.soundId[e]=cc.audioEngine.playEffect(this.soundFiles[e],t),this.soundId[e]},t.prototype.cleanFading=function(){s.default.theme.ctl.stopFadeMusicActionNode()},t.prototype.fadeMusic=function(e,t,o,n){s.default.theme.ctl.stopFadeMusicActionNode(),s.default.theme.ctl.fadeLoopMusic(e,t,o,n)},t.prototype.playNG_BGM=function(){s.default.theme.ctl.getGameType()==r.THEME_GAME_TYPE.MAIN&&(this.cleanFading(),this.playingMusicID==l.Common.s_sound.NgBGM&&cc.audioEngine.isMusicPlaying()||(this.playingMusicID=l.Common.s_sound.NgBGM,cc.audioEngine.playMusic(this.soundFiles[l.Common.s_sound.NgBGM],!0)))},t.prototype.fadeNG_BGM=function(){s.default.theme.ctl.getGameType()==r.THEME_GAME_TYPE.MAIN&&this.playingMusicID==l.Common.s_sound.NgBGM&&this.fadeMusic(3,2,1,0)},t.prototype.playFG_BGM=function(){this.cleanFading(),this.playingMusicID!=l.Common.s_sound.FgBGM&&(this.playingMusicID=l.Common.s_sound.FgBGM,cc.audioEngine.playMusic(this.soundFiles[l.Common.s_sound.FgBGM],!0))},t.prototype.playBG_BGM=function(){this.cleanFading(),this.playingMusicID!=l.Common.s_sound.BgBGM&&(this.playingMusicID=l.Common.s_sound.BgBGM,cc.audioEngine.playMusic(this.soundFiles[l.Common.s_sound.BgBGM],!0))},t._instance=null,o=a([p],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../Base/ThemeControlNew":"ThemeControlNew","./Common":"Common","./GoldTiger":"GoldTiger"}],NetTrans:[function(e,t,o){"use strict";cc._RF.push(t,"30aabTBGpVIL4lipUc3aXxS","NetTrans");var n=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.NetTrans=void 0;var i=e("../Common/DataManager"),a=e("./HttpClient"),r=cc._decorator,l=r.ccclass,s=(r.property,[]),c=function(){function e(){}var t;return t=e,e.onCommand=function(e){"getSettings"==e.responseType&&t.onGameSetting(e.serverResponse),s[e.responseType]&&s[e.responseType](e.responseType,e.serverResponse)},e.onGameSetting=function(e){i.DataManager.getInstance().initialResponse=e,cc.director.loadScene("GameScene"),a.default.getInstance().resetDialog()},e.sendGamePacket=function(e,t){a.default.getInstance().ServerConnect({SlotEvent:e,SlotData:t})},e.registerCmd=function(e,t){s[e]=t},e.unregisterCmd=function(e){s[e]=void 0},e.first=!0,e.waitFree=!1,t=n([l],e)}();o.NetTrans=c,cc._RF.pop()},{"../Common/DataManager":"DataManager","./HttpClient":"HttpClient"}],NodeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"6e744yAEidDVrpl3ajXq/B1","NodeDialog");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.message=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.show=function(e){this.message.string=e,this.node.active=!0},t.prototype.hide=function(){this.node.active=!1,this.message.string=""},a([s(cc.Label)],t.prototype,"message",void 0),a([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],PickNode:[function(e,t,o){"use strict";cc._RF.push(t,"9c71bBwhphFc6NFyBvl48+R","PickNode");var n,i,a,r,l,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});for(var u=e("../Base/Common_Base"),h=e("../Base/EventCenter"),d=e("../Base/Tools"),m=e("../Common/NetTrans"),f=e("./Common"),_=e("./Enum"),y=e("./Global"),g=y.Global.collectScale,T=y.Global.jpName,S=y.Global.jpUpperScale,E=y.Global.majorWheelUpScale,b=y.Global.multiWheelCollectScale,C=y.Global.multiWheelStopScale1,v=y.Global.multiWheelStopScale2,N=y.Global.performTimeList,L=y.Global.ResImagePath,B=y.Global.ResSpinePath,P=y.Global.symbolUpperNumScale,A=y.Global.symbolUpperPosList,w=y.Global.symbolUpperTypeList,G=e("./GoldTiger"),R=e("./MusicManager"),O=e("./SymbolWheel"),I=cc._decorator,F=I.ccclass,M=(I.property,[5,5,5]),x=cc.v3(-437,121),k=[],D=N,W=1;W<=3;W++)for(var U=1;U<=M[W-1];U++){var j=x.x+140*(U-1),V=x.y-134.3*(W-1);k[U-1]||(k[U-1]=[]),k[U-1][W-1]=cc.v3(j,V)}var H={idle:1,touch:2,win:3},Y={unInit:0,picked:1,unPicked:2,lost:3,wait:4,win:5},z=((i={})[10]="reddi_zhongjiang",i[11]="redkuang_zhongjiang",i[12]="jinhu_zhongjiang",i[33]="bluedi_zhongjiang",i[34]="greendi_zhongjiang",i),J=((a={})[10]="reddi_xialuo",a[11]="redkuang_xialuo",a[12]="jinhu_xialuo",a[33]="bluedi_xialuo",a[34]="greendi_xialuo",a),X=((r={})[10]="reddi_daiji",r[11]="redkuang_daiji",r[12]="jinhu_daiji",r[33]="bluedi_daiji",r[34]="greendi_daiji",r),K=((l={})[10]="reddi_jingzhen",l[11]="redkuang_jingzhen",l[12]="jinhu_jingzhen",l[33]="bluedi_jingzhen",l[34]="greendi_jingzhen",l),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=H.idle,t.performWin=null,t}return s(t,e),t}(sp.Skeleton),q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=0,t.performEnd=null,t}return s(t,e),t}(sp.Skeleton),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setNum=null,t.performAddNum=null,t.getNumWorldPos=null,t}return s(t,e),t}(cc.Node),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collectNum=0,t.reconnect=null,t.getFirePos=null,t.lightFire=null,t}return s(t,e),t}(cc.Node),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.performJump=null,t}return s(t,e),t}(cc.Node),te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.performWheelSpin=null,t.performWheelUp=null,t.performWheelDown=null,t}return s(t,e),t}(cc.Node),oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inSelectPerform=!1,t.init=null,t.reconnect=null,t.getPos=null,t.getState=null,t.getPrizeType=null,t.getPrizeUpperType=null,t.getEnableFlag=null,t.disableSelect=null,t.enableSelect=null,t.performSelect=null,t.performUnSelect=null,t.performPlus=null,t.performLight=null,t.performBigShake=null,t.performSmallShake=null,t.stopSmallShake=null,t.setPrizeAndUpperType=null,t.updatePlusNode=null,t.updatePrizeUpperNode=null,t.pos=null,t.prizeType=null,t.prizeUpperType=null,t.plusFlag=null,t.symbolIndex=null,t.state=Y.unInit,t.enableFlag=!1,t.bottleAni=null,t.prizeAniNode=null,t.prizeAni=null,t.prizeUpperNode=null,t.plusUpperNode=null,t}return s(t,e),t}(cc.Node),ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.root=null,t.tiger=null,t.blackLayer=null,t.tips=null,t.tableFrame=null,t.frameAni=null,t.textNode=null,t.fireNode=null,t.closeTipBtn=null,t.reSend=null,t.leftTime=0,t.bottleTable=[],t}return s(t,e),t.prototype.hide=function(){this.active=!1,cc.tween(this).delay(.5).removeSelf().start()},t.prototype.init=function(){var e=this;e.root=new cc.Node;var t=G.default.theme.gameLayer.getCenterPos();"wide"==G.default.theme.gameLayer.screenType&&(t=t.add(cc.v3(0,G.default.theme.gameLayer.distanceYToFooter/G.default.theme.gameLayer.layerScale))),e.root.position=cc.v3(t),e.root.scale=G.default.theme.gameLayer.bgScale,e.addChild(e.root);var o=d.addImage(L.FG+"rock_2");o.setPosition(370.5,-106),e.root.addChild(o);var n=d.createAni(B.FG+"NG_jinhu").getComponent(sp.Skeleton);e.tiger=(new cc.Node).addComponent(Q),d.copyAni(e.tiger,n),cc.tween(e.tiger.node).call(function(){e.tiger.setAnimation(0,"idle",!0)}).start(),e.tiger.node.position=cc.v3(0,0),e.root.addChild(e.tiger.node,1),e.tiger.state=H.idle;var i=d.createBtnWithSize(cc.size(343,382),{handler:e.onPickTiger,target:e});i.node.setPosition(464.5,60),e.root.addChild(i.node,1),e.tiger.performWin=function(){d.playEffect(f.Common.s_sound.PickAll),d.funcDelay(function(){d.playVoice(f.Common.s_sound.PickRes2)},.5),e.tiger.node.stopAllActions(),e.tiger.state=H.win,e.tiger.setAnimation(0,"win",!1),e.tiger.addAnimation(0,"idle",!0);var t=d.createAni(B.FG+"Rick_beiguang").getComponent(sp.Skeleton);cc.tween(t.node).call(function(){t.setAnimation(0,"bg_chuxian",!1),t.addAnimation(0,"bg_daiji",!0)}).start(),t.node.setPosition(0,0),e.root.addChild(t.node)};for(var a=new cc.Node,r=new cc.Node,l=[],s=[{path:L.FG+"fg_table_frame_left",pos:cc.v3(k[2][0].x,12),anchorPoint:cc.v2(1,.5),scaleX:1,scaleY:1},{path:L.FG+"fg_table_frame_left",pos:cc.v3(k[2][0].x,12),anchorPoint:cc.v2(1,.5),scaleX:-1,scaleY:1},{path:L.FG+"fg_reel_back",pos:cc.v3(-437.5,-12.5),scaleX:1,scaleY:1},{path:L.FG+"fg_reel_back",pos:cc.v3(-297.5,-12.5),scaleX:1,scaleY:1},{path:L.FG+"fg_reel_back",pos:cc.v3(-157.5,-12.5),scaleX:1,scaleY:1},{path:L.FG+"fg_reel_back",pos:cc.v3(-17.5,-12.5),scaleX:1,scaleY:1},{path:L.FG+"fg_reel_back",pos:cc.v3(122.5,-12.5),scaleX:1,scaleY:1}],c=1;c<=s.length;c++){var p=d.addImage(s[c-1].path);p.setAnchorPoint(s[c-1].anchorPoint||cc.v2(.5,.5)),p.setPosition(s[c-1].pos),p.setScale(s[c-1].scaleX,s[c-1].scaleY),l.push(p)}for(c=1;c<=l.length;c++)r.addChild(l[c-1]);d.setColorWithFather(r),a.addChild(r,0),e.tableFrame=r,e.root.addChild(a,1),e.leftTime=3,e.textNode=new Z;var m=d.createFont("pick_num");m.string=""+e.leftTime;var _=d.addImage(d.transPng("free_game"));m.node.setPosition(6,-245),_.setPosition(-184,-245),e.textNode.addChild(_),e.textNode.addChild(m.node),e.textNode.setNum=function(e){var t;m.string=e,t=e<=1?"free_game_single":"free_game",d.setTexture(_.getComponent(cc.Sprite),d.transPng(t))},e.textNode.performAddNum=function(){cc.tween(m.node).to(.2,{scale:.8}).call(function(){d.playEffect(f.Common.s_sound.PickAdd),e.leftTime=e.leftTime+1,e.textNode.setNum(e.leftTime);var t=d.createAni(B.FG+"Pick_shuzilan").getComponent(sp.Skeleton);t.node.setPosition(m.node.position),e.textNode.addChild(t.node,1),cc.tween(t.node).call(function(){t.setAnimation(0,"shuizilan",!1)}).delay(1).removeSelf().start()}).to(.2,{scale:1.25}).to(.1,{scale:1}).start()},e.textNode.getNumWorldPos=function(){return d.getWorldPos(m.node)},e.textNode.setNum(e.leftTime),e.root.addChild(e.textNode,2);var y=new $;y.collectNum=0;var g=[cc.v3(295,-204.5),cc.v3(376.5,-204.5),cc.v3(460.5,-204.5),cc.v3(425.5,-134),cc.v3(334.5,-134),cc.v3(381.5,-61.5),cc.v3(573.5,-147)],T=["huang_daiji","huang_daiji","huang_daiji","huang_daiji","huang_daiji","hong_daiji","huomiaojingzhen"],S=["huang_chuxian","huang_chuxian","huang_chuxian","huang_chuxian","huang_chuxian","hong_chuxian","huomiao"],E=[];y.reconnect=function(e){y.collectNum=e;for(var t=function(e){var t=d.createAni(B.FG+"PICK_shitoulan").getComponent(sp.Skeleton);cc.tween(t.node).call(function(){t.setAnimation(0,T[e-1],!0)}).start(),t.node.setPosition(g[e-1]),y.addChild(t.node),E[e-1]=t},o=1;o<=e;o++)t(o)},y.getFirePos=function(e){return e>6?e=6:e<1&&(e=1),g[e-1]},y.lightFire=function(t){if(t>6?t=6:t<1&&(t=1),d.checkNodeExist(E[t-1]))d.showErrorPop("repeat light fire "+t);else{y.collectNum>=t&&d.showErrorPop("fireNode.collectNum="+y.collectNum+" lightIndex="+t),y.collectNum=t;var o=d.createAni(B.FG+"PICK_shitoulan").getComponent(sp.Skeleton);if(cc.tween(o.node).call(function(){o.setAnimation(0,S[t-1],!1),o.addAnimation(0,T[t-1],!0)}).start(),o.node.setPosition(g[t-1]),y.addChild(o.node),E[t-1]=o,6==t){d.playEffect(f.Common.s_sound.PickRedBall),d.funcDelay(function(){e.tiger.performWin()},1);var n=d.createAni(B.FG+"PICK_shitoulan").getComponent(sp.Skeleton);cc.tween(n.node).call(function(){n.setAnimation(0,S[6],!1),n.addAnimation(0,T[6],!0)}).start(),n.node.setPosition(g[6]),y.addChild(n.node),E[6]=n}else d.playEffect(f.Common.s_sound.PickYelloBall)}},e.root.addChild(y,2),e.fireNode=y,e.bottleTable=[];for(var b=1;b<=3;b++)for(c=1;c<=M[b-1];c++){e.bottleTable[c-1]||(e.bottleTable[c-1]=[]);var C=e.createBottle(c,b);C.setPosition(k[c-1][b-1]),e.root.addChild(C,4)}h.default.registerEvent(u.EVT.SYSTEM.AFTER_THEME_RECONNECT,e.afterReconnectNetwork,e)},t.prototype.onPickTiger=function(e){var t=this;e.target.getComponent(cc.Button).interactable&&e.type==cc.Node.EventType.TOUCH_END&&t.tiger.state==H.idle&&(t.tiger.state=H.touch,d.playEffect(f.Common.s_sound.PickTiger),t.tiger.setAnimation(0,"dj",!1),t.tiger.addAnimation(0,"idle",!0),cc.tween(t.tiger.node).delay(2).call(function(){t.tiger.state=H.idle}).start())},t.prototype.afterReconnectNetwork=function(){this.reSend&&this.reSend()},t.prototype.flyPlusParticle=function(e){var t=D.plusFlyTime,o=new cc.Node;cc.tween(o).delay(3).removeSelf().start(),this.root.addChild(o,10);var n=o.convertToNodeSpaceAR(this.textNode.getNumWorldPos()),i=new cc.Node;o.addChild(i),i.position=e;var a=d.createParticle(y.Global.PlistPath+"pick_+1");return a.node.setPosition(0,0),i.addChild(a.node),cc.tween(i).to(t,{position:n}).delay(2).removeSelf().start(),d.playEffect(f.Common.s_sound.PickPlist),t},t.prototype.collectBall=function(e,t){var o=this,n=D.ballFlyTime,i=new cc.Node;cc.tween(i).delay(3).removeSelf().start(),o.root.addChild(i,10);var a=o.fireNode.getFirePos(t.pick_idx),r=new cc.Node;i.addChild(r),r.setPosition(e);var l=d.createParticle(y.Global.PlistPath+"pick_down"),s=d.createParticle(y.Global.PlistPath+"pick_top_1"),c=d.createParticle(y.Global.PlistPath+"pick_top_2");l.duration=n+.2,s.duration=n+.2,c.duration=n+.2,l.node.setPosition(0,0),s.node.setPosition(0,0),c.node.setPosition(0,0),r.addChild(l.node),r.addChild(s.node),r.addChild(c.node),d.playEffect(f.Common.s_sound.PickPlist),cc.tween(r).to(n,{position:a}).delay(2).removeSelf().start(),d.funcDelay(function(){o.fireNode.lightFire(t.pick_idx)},n)},t.prototype.createBottle=function(e,t){var o=this;o.bottleTable[e-1][t-1]=new oe;var n=o.bottleTable[e-1][t-1];n.pos={x:e,y:t},n.prizeType=null,n.prizeUpperType=null,n.plusFlag=null,n.symbolIndex=-1;var i=new cc.Node;n.addChild(i),n.bottleAni=d.createAni(B.FG+"Pick_lvbaoshi").getComponent(sp.Skeleton),cc.tween(n.bottleAni.node).call(function(){n.bottleAni.setAnimation(0,"daiji",!0)}).start(),i.addChild(n.bottleAni.node,1),n.bottleAni.node.active=!0,n.prizeAniNode=new cc.Node,i.addChild(n.prizeAniNode,2),n.prizeAniNode.active=!1,n.prizeAni=d.createAni(B.FG+"PICK_jinbi").getComponent(sp.Skeleton),n.prizeAniNode.addChild(n.prizeAni.node),n.prizeUpperNode=new te,n.prizeAniNode.addChild(n.prizeUpperNode),n.plusUpperNode=new ee,n.prizeAniNode.addChild(n.plusUpperNode),d.setColorWithFather(n.prizeAniNode),n.state=Y.unInit,n.enableFlag=!1;var a=d.createBtnWithSize(cc.size(135,134.3),{handler:function(e){if(e.target.getComponent(cc.Button).interactable&&e.type==cc.Node.EventType.TOUCH_END){var t=Math.floor(Number(e.currentTarget.name)/3),n=Number(e.currentTarget.name)%3,i=o.bottleTable[t][n];i.enableFlag&&(d.findElementInList([Y.unPicked],i.state)&&i.performSmallShake(),d.findElementInList([Y.unPicked,Y.wait],i.state)&&o.sendChoice(i.pos)),e.target.getComponent(cc.Button).interactable=!1}},target:o});return a.node.name=3*(e-1)+(t-1)+"",i.addChild(a.node,3),n.init=function(){this.state=Y.unPicked,this.bottleAni.node.color=cc.color(255,255,255),this.bottleAni.node.opacity=255,this.prizeAniNode.color=cc.color(255,255,255),this.prizeAniNode.opacity=255,this.prizeAni.node.color=cc.color(255,255,255),this.prizeUpperNode.children.forEach(function(e){e.color=cc.color(255,255,255)}),this.plusUpperNode.children.forEach(function(e){e.color=cc.color(255,255,255)}),this.bottleAni.node.stopAllActions(),this.prizeAniNode.stopAllActions(),this.bottleAni.node.active=!0,this.prizeAniNode.active=!1,this.bottleAni.setAnimation(0,"daiji",!0)}.bind(n),n.reconnect=function(e){if(e){this.setPrizeAndUpperType(Number(e)),this.updatePrizeUpperNode(),this.updatePlusNode(),this.state=Y.picked,this.bottleAni.node.active=!1,this.prizeAniNode.active=!0;var t=X[this.getPrizeType()];this.prizeAni.setAnimation(0,t,!0),this.disableSelect()}else this.state=Y.unPicked,this.bottleAni.node.active=!0,this.prizeAniNode.active=!1,this.bottleAni.setAnimation(0,"daiji",!0),this.enableSelect()}.bind(n),n.getPos=function(){return this.pos}.bind(n),n.getEnableFlag=function(){return this.enableFlag}.bind(n),n.disableSelect=function(){this.enableFlag=!1}.bind(n),n.enableSelect=function(){this.enableFlag=!0}.bind(n),n.getPrizeType=function(){return this.prizeType}.bind(n),n.getPrizeUpperType=function(){return this.prizeUpperType}.bind(n),n.performLight=function(e){if(this.state=Y.win,11==this.getPrizeType())this.prizeAni.setAnimation(0,"redkuang_qian",!1),this.prizeUpperNode.performWheelUp(e),d.funcDelay(function(){this.prizeAni.addAnimation(0,"redkuang_xunhuan",!0),this.prizeUpperNode.performWheelSpin(e),d.funcDelay(function(){var e=d.createAni(B.SYM+"BG_jinbi").getComponent(sp.Skeleton);this.prizeAniNode.addChild(e.node,1e4),cc.tween(e.node).call(function(){e.setAnimation(0,"shouji",!1)}).delay(2).removeSelf().start(),this.prizeAni.setAnimation(0,"redkuang_hou",!1),this.prizeUpperNode.performWheelDown();var t=K[this.getPrizeType()];this.prizeAni.addAnimation(0,t,!0)},D.wheelSpinTime+D.wheelStopWait)},D.wheelUpTime);else if(d.findElementInList([10,33,34],this.getPrizeType())){var t=z[this.getPrizeType()];this.prizeAni.setAnimation(0,t,!1);var o=K[this.getPrizeType()];this.prizeAni.addAnimation(0,o,!0);var n=d.createAni(B.SYM+"BG_jinbi").getComponent(sp.Skeleton);this.prizeAniNode.addChild(n.node,1e4),cc.tween(n.node).call(function(){n.setAnimation(0,"shouji",!1)}).delay(2).removeSelf().start(),cc.tween(this.plusUpperNode).to(2*N.symbolCollectTime/3,{scale:g}).to(1*N.symbolCollectTime/3,{scale:1}).start(),cc.tween(this.prizeUpperNode).to(2*N.symbolCollectTime/3,{scale:g}).to(1*N.symbolCollectTime/3,{scale:1}).start()}}.bind(n),n.performPlus=function(){d.funcDelay(function(){var e=0;this.plusUpperNode.performJump?e=this.plusUpperNode.performJump():d.showErrorPop('this.performPlus error no func "performJump"'),d.funcDelay(function(){o.textNode.performAddNum()},e)}.bind(this),D.plusDelayTime)}.bind(n),n.performSelect=function(e,t){if(this.state==Y.wait){this.stopSmallShake(),this.setPrizeAndUpperType(Number(e)),this.updatePrizeUpperNode(),this.updatePlusNode(),this.state=Y.picked,this.zIndex=5,this.getPrizeType(),d.playEffect(f.Common.s_sound.PickClick1);var i=J[this.getPrizeType()],a=X[this.getPrizeType()];this.bottleAni.setAnimation(0,"fanqian",!1),this.prizeAniNode.active=!0,this.prizeAni.setAnimation(0,i,!1),this.prizeAni.addAnimation(0,a,!0),this.inSelectPerform=!0,cc.tween(n).delay(0).call(function(){this.inSelectPerform=null}.bind(this)).start(),o.collectBall(k[this.pos.x-1][this.pos.y-1],t),this.plusFlag&&this.performPlus()}else d.showErrorPop("bottle x="+this.pos.x+" y="+this.pos.y+" error select state="+this.state)}.bind(n),n.performUnSelect=function(e){if(this.stopSmallShake(),this.state==Y.unPicked){this.state=Y.lost,this.zIndex=3,this.setPrizeAndUpperType(Number(e)),this.updatePrizeUpperNode(),this.updatePlusNode(),cc.tween(this.bottleAni.node).to(.3,{opacity:0}).start(),this.prizeAniNode.active=!0;var t=K[this.getPrizeType()];this.prizeAni.setAnimation(0,t,!1),this.prizeAniNode.opacity=0,cc.tween(this.prizeAniNode).to(.3,{opacity:255}).start(),cc.tween(this.prizeAni.node).to(.5,{color:cc.color(90,90,90)}).start(),this.prizeUpperNode.children.forEach(function(e){cc.tween(e).to(.5,{color:cc.color(90,90,90)}).start()}),this.plusUpperNode.children.forEach(function(e){cc.tween(e).to(.5,{color:cc.color(90,90,90)}).start()})}else d.showErrorPop("bottle x="+this.pos.x+" y="+this.pos.y+" error unSelect state="+this.state)}.bind(n),n.getState=function(){return this.state}.bind(n),n.performBigShake=function(){this.state=Y.wait,this.bottleAni.setAnimation(0,"dianji",!1)}.bind(n),n.stopSmallShake=function(){}.bind(n),n.performSmallShake=function(){this.stopSmallShake(),this.bottleAni.setAnimation(0,"dianjihuangdong",!1),this.bottleAni.addAnimation(0,"daiji",!0)}.bind(n),n.setPrizeAndUpperType=function(e){this.symbolIndex=e,e>100&&(this.plusFlag=!0,e-=100),d.between(e,15,30)?(this.prizeType=10,this.prizeUpperType=e):d.between(e,33,34)?(this.prizeType=e,this.prizeUpperType=e):d.findElementInList([11,12],e)&&(this.prizeType=e,this.prizeUpperType=e)}.bind(n),n.updatePlusNode=function(){if(this.plusUpperNode.removeAllChildren(),this.plusUpperNode.performJump=null,this.plusFlag){var e=new cc.Node;e.setPosition(0,-46),this.plusUpperNode.addChild(e);var t=d.addImage(L.FG+"fg_add_time_board");t.setPosition(0,-2);var o=d.addImage(L.FG+"fg_add_time_1");o.setPosition(-41,0);var n=d.addImage(d.transPng("fg_add_time_pick"));n.setPosition(19,0),e.addChild(t),e.addChild(o),e.addChild(n),this.plusUpperNode.performJump=function(){var t=D.plusScaleMaxTime;return e.stopAllActions(),cc.tween(e).to(t,{scale:1.6}).to(.3,{scale:1}).start(),t},d.setColorWithFather(this.plusUpperNode)}}.bind(n),n.updatePrizeUpperNode=function(){if(this.prizeUpperNode.removeAllChildren(),this.prizeUpperNode.performWheelSpin=null,this.prizeUpperNode.performWheelUp=null,this.prizeUpperNode.performWheelDown=null,d.between(this.prizeUpperType,15,30)){var e=w[this.prizeUpperType]*(n=G.default.theme.totalBet),t=d.createFont("symbol_num");t.string=d.num_2_str(e),t.node.setScale(.95*P),t.node.setPosition(A.num.mul(.95)),this.prizeUpperNode.addChild(t.node)}else if(d.findElementInList([11],this.prizeUpperType)){for(var o=[],n=G.default.theme.totalBet,i=[[1,2,3,4],[1,4,3,2],[2,1,4,3],[2,3,4,1]][Math.floor(4*Math.random()+1)-1],a=1;a<=i.length;a++)1==i[a-1]?o.push(4*n):2==i[a-1]?o.push(2):3==i[a-1]?o.push(10*n):4==i[a-1]&&o.push(2);var r=(cc.v3(-60,-32),cc.v3(60,-32),cc.v3(60,32),cc.v3(-60,32),(new cc.Node).addComponent(O.default));r.init({stencil:{width:120,height:64},reelOrder:o,distanceY:45}),r.node.scale=.95,d.setColorWithFather(r.node),this.prizeUpperNode.addChild(r.node),this.prizeUpperNode.performWheelSpin=function(e){var t=D.wheelSpinTime;d.playEffect(f.Common.s_sound.RespinWheel),r.performResult(e,t),cc.tween(r.node).delay(t).call(function(){d.playEffect(f.Common.s_sound.RespinStop),d.funcDelay(function(){d.checkNodeExist(r.node)&&(r.performLockScale(),cc.tween(r.node).to(1*N.majorWheelJumpTime/3,{scale:C}).to(1*N.majorWheelJumpTime/3,{scale:1}).to(1*N.majorWheelJumpTime/3,{scale:v}).start())},0)}).start()},this.prizeUpperNode.performWheelUp=function(){d.playEffect(f.Common.s_sound.WheelStart),cc.tween(r.node).to(.5,{scale:E}).start()},this.prizeUpperNode.performWheelDown=function(){cc.tween(r.node).to(2*N.symbolWheelMultiJumpTime/3,{scale:b}).to(1*N.symbolWheelMultiJumpTime/3,{scale:1}).start(),r.performLockScaleBack()}}else if(d.findElementInList([33,34],this.prizeUpperType)){var l=w[this.prizeUpperType],s=d.addImage(d.transPng("symbol_upper_"+T[l-1]));s.setScale(.95*S),this.prizeUpperNode.addChild(s)}}.bind(n),n},t.prototype.initBottle=function(){var e=this.getAllBottle();for(var t in e)e[t].init()},t.prototype.createTip=function(){var e=this,t=d.createAni(B.FG+"Pick_shuzilan").getComponent(sp.Skeleton);e.tips=(new cc.Node).addComponent(q),d.copyAni(e.tips,t);e.tips.state=1,e.tips.node.position=cc.v3(k[2][1]),e.tips.node.opacity=0,cc.tween(e).call(function(){e.tips.setAnimation(0,"wenanxiaoshi_idle_EN",!1),e.tips.addAnimation(0,"wenanxiaoshi_idle_EN",!0)}).start(),e.tips.performEnd=function(){1==e.tips.state&&(e.tips.state=0,e.tips.setAnimation(0,"wenanxiaoshi_EN",!1))},e.root.addChild(e.tips.node,7),e.blackLayer=new cc.Node,e.blackLayer.addComponent(cc.Sprite),e.blackLayer.getComponent(cc.Sprite).type=cc.Sprite.Type.SLICED,e.blackLayer.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,e.blackLayer.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(d.getImage(L.Common+"default_panel")),e.blackLayer.color=cc.Color.BLACK,e.blackLayer.width=700,e.blackLayer.height=3*134.3,e.blackLayer.position=cc.v3(k[2][1]),e.root.addChild(e.blackLayer,6),e.closeTipBtn=d.createBtnWithSize(cc.size(700,3*134.3),{handler:function(t){e.closeTipBtn.interactable&&t.type==cc.Node.EventType.TOUCH_END&&e.deleteTip()},target:e}),e.closeTipBtn.node.setPosition(k[2][1]),e.root.addChild(e.closeTipBtn.node,1e3),e.closeTipBtn.interactable=!1,e.showTips()},t.prototype.deleteTip=function(){d.playEffect(f.Common.s_sound.Popup),d.checkNodeExist(this.tips)&&(this.tips.node.stopAllActions(),this.tips.performEnd(),cc.tween(this.tips.node).delay(2).removeSelf().start(),this.tips=null),d.checkNodeExist(this.blackLayer)&&(this.blackLayer.stopAllActions(),cc.tween(this.blackLayer).to(.3,{opacity:0}).removeSelf().start(),this.blackLayer=null),d.checkNodeExist(this.closeTipBtn)&&(this.closeTipBtn.node.removeFromParent(),this.closeTipBtn=null),this.initPerform()},t.prototype.showTips=function(){var e=this;d.checkNodeExist(e.closeTipBtn)&&(e.closeTipBtn.interactable=!0),d.checkNodeExist(e.blackLayer)&&cc.tween(e.blackLayer).to(.3,{opacity:130}).start(),d.checkNodeExist(e.tips)&&(e.tips.node.stopAllActions(),cc.tween(e.tips.node).to(.3,{opacity:255}).delay(10).call(function(){e.deleteTip()}).start())},t.prototype.initPerform=function(){d.funcDelay(function(){},.3),d.playEffect(f.Common.s_sound.BigWinBegin),this.initBottle(),this.enableSelectAll(),this.beginRandomShaking()},t.prototype.getBottle=function(e){return this.bottleTable[e.x-1][e.y-1]},t.prototype.performUnSelect=function(e){for(var t=0,o=this.getAllBottle(),n=3-(15-e.length-3),i=[],a=1;a<=e.length;a++)i[a-1]=a;for(a=1;a<=n;a++){var r=Math.floor(Math.random()*i.length+1);e[i[r-1]-1]=e[i[r-1]-1]+100,i.splice(r-1,1)}for(var a in o){var l=o[a];if(l.getState()==Y.unPicked){var s=e[(t+=1)-1]||15;l.performUnSelect(s)}}d.playEffect(f.Common.s_sound.PickOpen),t!=e.length&&d.showErrorPop("#pick_pool="+e.length+" #bottleList="+t)},t.prototype.performSelect=function(e,t,o){var n=this.getBottle(e);n.disableSelect(),n.performSelect(t,o)},t.prototype.getAllBottle=function(){for(var e=[],t=1;t<=3;t++)for(var o=1;o<=M[t-1];o++){var n=this.getBottle({x:o,y:t});e.push(n)}return e},t.prototype.getAllBottleV=function(){for(var e=[],t=1;t<=5;t++)for(var o=1;o<=3;o++){var n=this.getBottle({x:t,y:o});e.push(n)}return e},t.prototype.getBottleWithColumnIndex=function(e){for(var t=[],o=1;o<=3;o++){var n=e,i=this.getBottle({x:n,y:o});t.push(i)}return t},t.prototype.getBottleWithRowIndex=function(e){for(var t=[],o=1;o<=M[e-1];o++){var n=this.getBottle({x:o,y:e});t.push(n)}return t},t.prototype.enableSelectAll=function(){var e=this.getAllBottle();for(var t in e)e[t].enableSelect()},t.prototype.disableSelectAll=function(){var e=this.getAllBottle();for(var t in e)e[t].disableSelect()},t.prototype.sendChoice=function(e){var t=this.getBottle(e);if(t.getEnableFlag()){d.playEffect(f.Common.s_sound.PickClick);var o=e.y-1+3*(e.x-1)+200;this.reSend||(this.reSend=function(){m.NetTrans.sendGamePacket("theme_choice",{feature_choice:o})}),this.reSend(),this.disableSelectAll(),t.enableSelect(),t.performBigShake()}},t.prototype.deleteFrameAni=function(){d.checkNodeExist(this.frameAni)&&this.frameAni.node.removeFromParent()},t.prototype.performJPFrame=function(e){this.deleteFrameAni();var t=["Grand","Maxi","Major","Minor","Mini"][e-1],o=d.createAni(B.FG+"BG_JP_win").getComponent(sp.Skeleton);cc.tween(o.node).call(function(){o.setAnimation(0,t,!0)}).start(),o.node.position=cc.v3(0,439),this.tableFrame.addChild(o.node,1),this.frameAni=o},t.prototype.reconnect=function(e,t){void 0===t&&(t=null);var o=e.pick_rec,n=e.pick_rest_round,i=0;this.leftTime=n,this.textNode.setNum(this.leftTime),this.initBottle(),this.enableSelectAll();for(var a=1;a<=3;a++)for(var r=1;r<=M[a-1];r++){var l=o[3*(r-1)+a-1],s=l[0],c=this.getBottle({x:r,y:a});s>0?(i+=1,1==l[2]&&(s+=100),c.reconnect(s)):c.reconnect()}this.fireNode.reconnect(i),this.beginRandomShaking()},t.prototype.receiveData=function(e){var t=this;t.reSend=null;var o=e.choice-200,n={x:Math.floor((o-1)/3)+1,y:(o-1)%3+1},i=e.pos_result[0],a=0;if(1==(e.pos_result[2]||0)&&(i+=100,a=D.plusDelayTime),t.leftTime=t.leftTime-1,t.textNode.setNum(t.leftTime),t.performSelect(n,i,e),e.result_check&&e.pick_pool){t.disableSelectAll(),t.stopSmallShake();var r=e.pick_pool||[];cc.tween(t).delay(a).call(function(){d.funcDelay(function(){t.performUnSelect(r)},.5),d.funcDelay(function(){e.bg_start_pos?d.funcDelay(function(){G.default.theme.gameLayer.spinLayer.effectLayer.performFGToBG(e)},3):(cc.audioEngine.stopMusic(),d.playEffect(f.Common.s_sound.PickEnd),d.funcDelay(function(){t.performCollect(e)},1))},1.5)}).start()}else G.default.theme.gameLayer.jackpotLayer.sendThemeJpCmd(),d.funcDelay(function(){t.enableSelectAll()},a)},t.prototype.performCollect=function(e){R.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),.4),G.default.theme.gameLayer.spinLayer.effectLayer.winNumList[_.WinType.FG]=(e.total_win_check||0)-(e.jp_win||0),G.default.theme.gameLayer.spinLayer.effectLayer.winNumList[_.WinType.JP]=e.jp_win||0;var t=e.result_check,o=this.getAllBottleV(),n=d.createQueue();for(var i in o){var a=o[i];a.getState()==Y.picked&&d.findElementInList([10,11,33,34],a.getPrizeType())&&n.enQueue(a)}var r=e.bet_used,l=c({},e.jp_value),s=function(){if(n.isEmpty())G.default.theme.gameLayer.spinLayer.effectLayer.performFGToNG(e);else{var o=n.deQueue(),i=o.getPrizeType(),a=o.getPrizeUpperType();if(10==i){o.performLight();var c=w[a]*r;G.default.theme.gameLayer.spinLayer.effectLayer.performBGCollectParticle(d.getWorldPos(o)),d.funcDelay(function(){G.default.theme.gameLayer.spinLayer.effectLayer.performFGFooterAddValue(),G.default.theme.gameLayer.spinLayer.effectLayer.addFooterValue(_.WinType.FG,c)},D.collectFlyTime),d.funcDelay(function(){s()},D.collectJumpTime+D.collectFlyTime)}else if(11==i){var p=o.getPos(),u=p.y+3*(p.x-1),h=t[u-1][1],m=0;d.between(h,15,30)?(h=w[h]*r,m=h):32==h&&(m=l[(h=2)-1]),o.performLight(h),d.funcDelay(function(){G.default.theme.gameLayer.spinLayer.effectLayer.performBGCollectParticle(d.getWorldPos(o))},D.wheelUpTime+D.wheelSpinTime+D.wheelStopWait),d.funcDelay(function(){2==h?(G.default.theme.gameLayer.spinLayer.effectLayer.performPop({popType:_.PopupType.Jackpot,callback:function(){R.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),.4),s()},jpType:h,value:m}),G.default.theme.gameLayer.spinLayer.effectLayer.performFGFooterAddValue(),G.default.theme.gameLayer.spinLayer.effectLayer.addFooterValue(_.WinType.JP,m)):(G.default.theme.gameLayer.spinLayer.effectLayer.performFGFooterAddValue(),G.default.theme.gameLayer.spinLayer.effectLayer.addFooterValue(_.WinType.FG,m),s())},D.wheelUpTime+D.wheelSpinTime+D.wheelStopWait+D.collectFlyTime)}else if(d.findElementInList([33,34],i)){o.performLight();var f=w[a],y=l[f-1];G.default.theme.gameLayer.spinLayer.effectLayer.performBGCollectParticle(d.getWorldPos(o)),d.funcDelay(function(){G.default.theme.gameLayer.spinLayer.effectLayer.performFGFooterAddValue(),G.default.theme.gameLayer.spinLayer.effectLayer.addFooterValue(_.WinType.JP,y)},D.collectFlyTime),d.funcDelay(function(){G.default.theme.gameLayer.spinLayer.effectLayer.performPop({popType:_.PopupType.Jackpot,callback:function(){R.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),.4),s()},jpType:f,value:y})},D.collectJumpTime+D.collectFlyTime)}else s(),d.showErrorPop(["collectNext error bottle.getPrizeType()="+i])}};s()},t.prototype.stopSmallShake=function(){cc.Tween.stopAllByTag(541358784)},t.prototype.beginRandomShaking=function(){var e=this;cc.tween().repeatForever(cc.tween().delay(3).call(function(){var t=0,o=[],n=e.getAllBottle();for(var i in n){var a=n[i];a.getState()==Y.unPicked&&(o[(t+=1)-1]=a)}if(t>0){var r=Math.floor(t/3)+Math.floor(3*Math.random()-1);r<=0&&(r=1),r=Math.floor(r);for(var l=1;l<=r;l++){var s=Math.floor(Math.random()*o.length+1);o[s-1].performSmallShake(),o.splice(s-1,1)}}})),cc.Tween.stopAllByTag(541358784)},p([F],t)}(cc.Node);o.default=ne,cc._RF.pop()},{"../Base/Common_Base":"Common_Base","../Base/EventCenter":"EventCenter","../Base/Tools":"Tools","../Common/NetTrans":"NetTrans","./Common":"Common","./Enum":"Enum","./Global":"Global","./GoldTiger":"GoldTiger","./MusicManager":"MusicManager","./SymbolWheel":"SymbolWheel"}],PopOut:[function(e,t,o){"use strict";cc._RF.push(t,"539e5MOp4pEQ78bGy9nT5ad","PopOut");var n,i,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../Base/Common_Base"),s=e("../Base/LabelNumRoll"),c=e("../Base/Tools"),p=e("./Common"),u=e("./Enum"),h=e("./Global"),d=h.Global.ResFontPath,m=h.Global.ResImagePath,f=h.Global.ResSpinePath,_=e("./GoldTiger"),y=e("./MusicManager"),g=cc._decorator,T=g.ccclass,S=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hideAction=null,t}return a(t,e),t}(cc.Node)),E={sprite:1,animation:2,label:3,defaultButton:4,compositeNode:5,rollingLabel:6,button:7,horizontalNode:8,screenButton:9},b={},C={};for(var v in E)C[E[v]]={};var N=((i={})[E.horizontalNode]=function(e){var t=e.elementList,o=e.space||0,n=[];for(var i in t){var a=t[i],r=P(a);n.push(r)}return c.getHorizontalNode(n,o)},i[E.sprite]=function(e){var t,o=e.path,n=e.translateFlag,i=e.symmetricFlag,a=null;t=n?l.translateImage(o,_.default.themeId):o,(a=i?c.symmetricSpriteCreate(t,i):c.addImage(t)).setPosition(0,0),a.name=Date.now()+"",L(E.sprite,e.name||a.name,a);var r=new cc.Node;return r.addChild(a),r},i[E.animation]=function(e){var t=e.path,o=e.translateFlag,n=e.skin||"default",i=e.animation,a=i,r=!e.noLoopFlag,s=c.createAni(t).getComponent(sp.Skeleton);if(s.node.name=Date.now()+"",L(E.animation,e.name||s.node.name,s),o){a=l.translateAnimation(i,s);var p=s.node.name;b[p]=function(){c.checkNodeExist(s)?cc.tween(s.node).call(function(){s.setAnimation(0,l.translateAnimation(i,s),r)}).start():b[p]=null}}s.node.setPosition(0,0),s.setSkin(n),cc.tween(s.node).call(function(){s.setAnimation(0,a,r)}).start();var u=new cc.Node;return u.addChild(s.node),u},i[E.label]=function(e){var t=d+e.path,o=e.value||0,n=e.width||null,i=e.height||null,a=e.extraActionList,r=c.addFNT(t,o);if(r.name=Date.now()+"",L(E.label,e.name||r.name,r),r.setPosition(0,0),(n||i)&&l.setLabelWidthHeight(r.getComponent(cc.Label),n,i),a)for(var s=1;s<=a.length;s++)cc.tween(r).then(a[s-1]).start();r.name="label";var p=new cc.Node;return p.addChild(r),p},i[E.defaultButton]=function(e){var t=e.callback||function(){},o=e.btnType,n=e.opacity||255,i=e.enableClickFlag||function(){return!0},a=cc.v3(0,4),r=cc.v3(0,4),l={type:E.button,btnPath:m.POP+["btn_start","btn_collect"][o-1],btnDownPath:m.POP+["btn_start_down","btn_collect_down"][o-1],opacity:n,clickEffect:!0,enableClickFlag:i,began:function(){},ended:function(){},canceled:function(){},btnText:{type:E.compositeNode,pos:cc.v3(0,0),elementList:[{type:E.animation,path:f.POP+"TC_TY_btn",animation:"btn"},{type:E.sprite,path:["btn_start","btn_collect"][o-1],translateFlag:!0,pos:[a,r][o-1]}]},callback:t},s={type:E.sprite,path:m.POP+"btn_frame"};return P({type:E.compositeNode,elementList:[s,l]})},i[E.compositeNode]=function(e){var t=e.elementList,o=new cc.Node;for(var n in t){var i=P(t[n]);o.addChild(i)}return o},i[E.rollingLabel]=function(e){var t=e.translateFunc||p.num_with_commas,o=e.startValue||0,n=e.endValue,i=e.fps||60,a=e.duration||1,r=e.delay||!1;e.type=E.label;var l=P(e),c=l.getChildByName("label");return c.getComponent(cc.Label)&&c.removeComponent(cc.Label),c.getComponent(s.default).nrInit(o,i,t),r&&r>0?cc.tween(c).delay(r).call(function(e){e.nrStartRoll(null,n,a)}).start():c.addComponent(s.default).nrStartRoll(null,n,a),l},i[E.screenButton]=function(e){var t=e.callback||function(){},o=e.effectPath||p.Common.s_sound.AllButton,n=e.enableClickFlag||function(){return!0},i=c.createBtnWithSize(cc.size(1e4,1e4),{handler:function(e){e.type==cc.Node.EventType.TOUCH_END&&n()&&(c.playEffect(o),i.interactable=!1,t())},target:self});i.node.name=Date.now()+"",L(E.screenButton,e.name||i.node.name,i);var a=new cc.Node;return a.addChild(i.node),a},i[E.button]=function(e){var t=e.callback||function(){},o=e.btnPath||m.POP+"btn",n=e.btnDownPath||m.POP+"btn_down",i=e.effectPath||p.Common.s_sound.AllButton,a=e.opacity||255,r=e.clickEffect||!1,l=e.enableClickFlag||function(){return!0},s=e.began||function(){},u=e.moved||function(){},h=e.ended||function(){},d=e.canceled||function(){},f=e.btnText||null,_=new cc.Node;f&&(_=P(f),c.setColorWithFather(_));var y=(new cc.Node).addComponent(cc.Button);y.node.addComponent(cc.Sprite),y.transition=cc.Button.Transition.SPRITE,y.normalSprite=new cc.SpriteFrame(c.getImage(o)),y.pressedSprite=new cc.SpriteFrame(c.getImage(n)),y.disabledSprite=new cc.SpriteFrame(c.getImage(n)),y.node.name=Date.now()+"",L(E.button,e.name||y.node.name,y);var g=cc.color(120,120,120),T=function(e){e.target.getComponent(cc.Button).interactable&&l()&&(e.type==cc.Node.EventType.TOUCH_START?(r&&(_.color=g,y.node.color=g),s()):e.type==cc.Node.EventType.TOUCH_MOVE?u():e.type==cc.Node.EventType.TOUCH_CANCEL?(r&&(_.color=cc.color(255,255,255),y.node.color=cc.color(255,255,255)),d()):e.type==cc.Node.EventType.TOUCH_END&&(r&&(_.color=g,y.node.color=g),h(),c.playEffect(i),y.interactable=!1,t()))};y.node.on(cc.Node.EventType.TOUCH_START,T),y.node.on(cc.Node.EventType.TOUCH_MOVE,T),y.node.on(cc.Node.EventType.TOUCH_CANCEL,T),y.node.on(cc.Node.EventType.TOUCH_END,T),y.node.setPosition(0,0),y.name="btn",y.node.opacity=a;var S=new cc.Node;return S.addChild(y.node),S.addChild(_,1),S},i),L=function(e,t,o){null!=C[e]&&null!=C[e]||(C[e]=[]),C[e][t]=o},B=function(e){var t=C[e],o=[];for(var n in t){var i=t[n];c.checkNodeExist(i)?o.push(i):t[n]=null}return o},P=function(e){var t=new S;t.setPosition(e.pos||cc.v3(0,0));var o=N[e.type](e),n=e.scale||[1,1];return o.setScale(n[0],n[1]),o.setPosition(0,0),t.addChild(o),e.action&&(c.setColorWithFather(t),cc.tween(t).then(e.action).start(),e.action=null),t.name=Date.now()+"",L("element",e.elementName||t.name,t),t},A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hideType=null,t.loadList=[],t.backList=[],t.popList=[],t.root=null,t.blackRoot=null,t.popOutFunc=null,t.clickFunc=null,t.hideAction=null,t.noBlackLayer=!1,t.blackLevel=0,t.blackOutTime=0,t.blackLayerZOrder=0,t.blackLayer=null,t}return a(t,e),t.prototype.init=function(e,t){this.hideType=1,this.loadList=[],this.root=new cc.Node,this.node.addChild(this.root),this.blackRoot=new cc.Node,this.node.addChild(this.blackRoot,-1),this.popOutFunc=this.getPopFunc(e,t)},t.prototype.unloadRes=function(){for(var e in this.loadList);(this.loadList||[]).length>0&&_.default.theme.unloadImgRes(this.loadList)},t.prototype.popOutAfterAddToFather=function(){(this.loadList||[]).length>0?(_.default.theme.preloadImgResAsync(this.loadList,function(){}),this.popOutFunc()):this.popOutFunc()},t.prototype.refreshLanguage=function(){},t.prototype.popOut=function(e){this.blackLayerZOrder=9,this.popList=[];var t=e;for(var o in t.noBlackLayer&&(this.noBlackLayer=!0),t)if("object"==typeof(a=t[o])){var n=P(a);n.hideAction=a.hideAction,a.showIndex&&(this.popList[a.showIndex]||(this.popList[a.showIndex]=[]),this.popList[a.showIndex].push(n)),this.root.addChild(n)}this.backList=[];var i=c.createStack();for(var o in this.popList){var a=this.popList[o];i.push(a)}for(;!i.isEmpty();)this.backList.push(i.pop());i.release()},t.prototype.performPop=function(e,t){void 0===t&&(t=null);var o=this;for(var n in B(E.button)){var i=B(E.button)[n];c.checkNodeExist(i)&&(i.interactable=!1)}for(var n in B(E.screenButton))i=B(E.screenButton)[n],c.checkNodeExist(i)&&(i.interactable=!1);if(e==u.PopState.Expand){for(var n in o.popList)for(var a in o.popList[n])(i=o.popList[n][a])&&i.setScale(.01);var r=3;for(var n in o.popList){for(var a in o.popList[n])(i=o.popList[n][a])&&cc.tween(i).delay(.1*(Number(n)-1)).to(.33,{scale:1.2}).to(.17,{scale:.9}).to(.17,{scale:1}).start();r=Number(n)}cc.tween(o).delay(.1*r+.5).call(function(){for(var e in B(E.button)){var t=B(E.button)[e];c.checkNodeExist(t)&&(t.interactable=!0)}for(var e in B(E.screenButton))t=B(E.screenButton)[e],c.checkNodeExist(t)&&(t.interactable=!0)}).start(),o.noBlackLayer||(o.blackLayer=c.createBlackLayer({fatherNode:o.blackRoot,zOrder:o.blackLayerZOrder,time:.1*r+.5-.5,opacity:o.blackLevel||200}))}else if(e==u.PopState.Shrink){for(var n in B(E.button))i=B(E.button)[n],c.checkNodeExist(i)&&(i.interactable=!1);for(var n in B(E.screenButton))i=B(E.screenButton)[n],c.checkNodeExist(i)&&(i.interactable=!1);if(r=0,2==o.hideType){for(var n in o.backList)for(var a in o.backList[n])(i=o.backList[n][a])&&i.hideAction&&cc.tween(i).then(i.hideAction).start();var l=o.hideAction&&o.hideAction()||cc.tween().delay(.5).call(function(){t(),o.unloadRes()}).removeSelf();cc.tween(o).then(l).start()}else cc.tween(o.node).to(.1,{scale:1.1}).to(.23,{scale:1.2}).call(function(){c.playEffect(p.Common.s_sound.Popup)}).to(.17,{scale:0}).call(function(){t(),o.unloadRes()}).removeSelf().start();if(o.blackLayer){var s=.1*r+.5;o.blackOutTime&&(s=o.blackOutTime),c.deleteBlackLayer(o.blackLayer,s)}}},t.prototype.getPopFunc=function(e,t){var o,n=this,i=function(e){var t=function(){for(var o in l.default.unscheduleFunc(t,_.default.theme.gameLayer),B(E.label)){var i=B(E.label)[o];c.checkNodeExist(i)&&i.nrStopRoll&&i.nrStopRoll(!0)}n.clickFunc&&n.clickFunc(),_.default.theme.ctl.resumeFadeMusic(),n.performPop&&n.performPop(u.PopState.Shrink,e)};return t};return((o={})[u.PopupType.FGEntry]=function(e){var t=i(e.callback),o=[{type:E.animation,showIndex:1,path:f.POP+"TC_PickBonus_bg",animation:"bg",pos:cc.v3(.5,12.5)},{type:E.animation,showIndex:2,path:f.POP+"TC_PickBonus_text",animation:"title",translateFlag:!0,pos:cc.v3(-1,238)},{type:E.animation,showIndex:3,path:f.POP+"TC_PickBonus_text",animation:"text",translateFlag:!0,pos:cc.v3(1,61.5)},{type:E.sprite,showIndex:4,path:"pop_award",translateFlag:!0,pos:cc.v3(-6,-133.5)},{type:E.defaultButton,showIndex:5,callback:t,pos:cc.v3(-.5,-212.5),btnType:1}];return n.loadList.push(f.POP+"TC_PickBonus_bg"),n.loadList.push(f.POP+"TC_PickBonus_text"),n.loadList.push(f.POP+"TC_TY_btn"),function(){n.popOut(o),n.performPop(u.PopState.Expand),y.default.getInstance().fadeMusic(0,.3,1,0),c.playEffect(p.Common.s_sound.PickIn),c.funcDelay(function(){c.playVoice(p.Common.s_sound.Pick)},.5),l.default.addCallFunc(t,30,null,_.default.theme.gameLayer)}},o[u.PopupType.FGExit]=function(e){var t=i(e.callback),o=e.value,a=[{type:E.animation,showIndex:1,path:f.POP+"TC_PickBonus_bg",animation:"bg",pos:cc.v3(.5,12.5)},{type:E.animation,showIndex:2,path:f.POP+"TC_PickBonus_title",animation:"title",translateFlag:!0,pos:cc.v3(.5,189.5)},{type:E.compositeNode,showIndex:3,pos:cc.v3(1,-10.5),elementList:[{type:E.animation,path:f.POP+"TC_PickBonus_coinframe",animation:"coinframe"},{type:E.label,path:"pop_total",pos:cc.v3(0,35),width:760,height:125,value:p.num_with_commas(o)}]},{type:E.defaultButton,showIndex:4,callback:t,pos:cc.v3(-.5,-212.5),btnType:2}];return n.loadList.push(f.POP+"TC_PickBonus_bg"),n.loadList.push(f.POP+"TC_PickBonus_title"),n.loadList.push(f.POP+"TC_PickBonus_coinframe"),n.loadList.push(f.POP+"TC_TY_btn"),n.loadList.push(d+"pop_total"),function(){n.popOut(a),n.performPop(u.PopState.Expand),y.default.getInstance().fadeMusic(0,.3,1,0),c.playEffect(p.Common.s_sound.PickSet),c.funcDelay(function(){o>=20*_.default.theme.ctl.getCurTotalBet()?c.playRandomVoice("PopFGExit",[p.Common.s_sound.VoCongra,p.Common.s_sound.PickCongra]):c.playVoice(p.Common.s_sound.VoCongra)},.5),l.default.addCallFunc(t,30,null,_.default.theme.gameLayer)}},o[u.PopupType.BGEntry]=function(e){var t=i(e.callback),o=[{type:E.animation,showIndex:1,path:f.POP+"TC_Respin_diban",animation:"bg",pos:cc.v3(.5,12.5)},{type:E.animation,showIndex:2,path:f.POP+"TC_PickBonus_text",animation:"title",translateFlag:!0,pos:cc.v3(-1,238)},{type:E.animation,showIndex:3,path:f.POP+"TC_Respin_text",animation:"text",translateFlag:!0,pos:cc.v3(4,64)},{type:E.sprite,showIndex:4,path:"pop_award",translateFlag:!0,pos:cc.v3(-6,-117.5)},{type:E.defaultButton,showIndex:5,callback:t,pos:cc.v3(-.5,-212.5),btnType:1}];return n.loadList.push(f.POP+"TC_Respin_diban"),n.loadList.push(f.POP+"TC_PickBonus_text"),n.loadList.push(f.POP+"TC_Respin_text"),n.loadList.push(f.POP+"TC_TY_btn"),function(){n.popOut(o),n.performPop(u.PopState.Expand),y.default.getInstance().fadeMusic(0,.3,1,0),c.playEffect(p.Common.s_sound.RespinIn),c.funcDelay(function(){c.playRandomVoice("popBGEntry",[p.Common.s_sound.Respin1])},.5),l.default.addCallFunc(t,30,null,_.default.theme.gameLayer)}},o[u.PopupType.BGFGEntry]=function(e){var t=i(e.callback),o=[{type:E.animation,showIndex:1,path:f.POP+"TC_Respin_diban",animation:"bg",pos:cc.v3(.5,12.5)},{type:E.animation,showIndex:2,path:f.POP+"TC_PickBonus_text",animation:"title",translateFlag:!0,pos:cc.v3(-1,238)},{type:E.animation,showIndex:3,path:f.POP+"TC_Respin_text",animation:"text",translateFlag:!0,pos:cc.v3(4,64)},{type:E.sprite,showIndex:4,path:"pop_award",translateFlag:!0,pos:cc.v3(-6,-117.5)},{type:E.defaultButton,showIndex:5,callback:t,pos:cc.v3(-.5,-212.5),btnType:1}];return n.loadList.push(f.POP+"TC_Respin_diban"),n.loadList.push(f.POP+"TC_PickBonus_text"),n.loadList.push(f.POP+"TC_Respin_text"),n.loadList.push(f.POP+"TC_TY_btn"),function(){n.popOut(o),n.performPop(u.PopState.Expand),y.default.getInstance().fadeMusic(0,.3,1,0),c.playEffect(p.Common.s_sound.RespinIn),c.funcDelay(function(){c.playRandomVoice("popBGEntry",[p.Common.s_sound.Respin1])},.5),l.default.addCallFunc(t,30,null,_.default.theme.gameLayer)}},o[u.PopupType.BGMapEntry]=function(e){var t=i(e.callback),o=[{type:E.animation,showIndex:1,path:f.POP+"TC_Map_bg",animation:"bg",pos:cc.v3(4.5,12.5)},{type:E.animation,showIndex:2,path:f.POP+"TC_PickBonus_text",animation:"title",translateFlag:!0,pos:cc.v3(-1,238)},{type:E.animation,showIndex:3,path:f.POP+"TC_Map_text",animation:"text",translateFlag:!0,pos:cc.v3(-.5,68)},{type:E.sprite,showIndex:4,path:"pop_award",translateFlag:!0,pos:cc.v3(-5.5,-132)},{type:E.defaultButton,showIndex:5,callback:t,pos:cc.v3(-.5,-212.5),btnType:1}];return n.loadList.push(f.POP+"TC_Map_bg"),n.loadList.push(f.POP+"TC_PickBonus_text"),n.loadList.push(f.POP+"TC_Map_text"),n.loadList.push(f.POP+"TC_TY_btn"),function(){n.popOut(o),n.performPop(u.PopState.Expand),y.default.getInstance().fadeMusic(0,.3,1,0),c.playEffect(p.Common.s_sound.MapIn),c.funcDelay(function(){c.playRandomVoice("popBGMapEntry",[p.Common.s_sound.Map1,p.Common.s_sound.Map2])},.5),l.default.addCallFunc(t,30,null,_.default.theme.gameLayer)}},o[u.PopupType.BGExit]=function(e){var t=i(e.callback),o=e.value,a=[{type:E.animation,showIndex:1,path:f.POP+"TC_Respin_diban",animation:"bg",pos:cc.v3(.5,12.5)},{type:E.animation,showIndex:2,path:f.POP+"TC_PickBonus_text",animation:"title",translateFlag:!0,pos:cc.v3(-1,238)},{type:E.sprite,showIndex:3,path:"pop_you_won",translateFlag:!0,pos:cc.v3(-2.5,148.5)},{type:E.compositeNode,showIndex:4,pos:cc.v3(-2,-2),elementList:[{type:E.animation,path:f.POP+"TC_PickBonus_coinframe",animation:"coinframe"},{type:E.label,path:"pop_total",pos:cc.v3(0,35),width:760,height:125,value:p.num_with_commas(o)}]},{type:E.sprite,showIndex:5,path:"pop_bg_in_fortune_respin",translateFlag:!0,pos:cc.v3(-2.5,-143.5)},{type:E.defaultButton,showIndex:6,callback:t,pos:cc.v3(-.5,-212.5),btnType:2}];return n.loadList.push(f.POP+"TC_Respin_diban"),n.loadList.push(f.POP+"TC_PickBonus_text"),n.loadList.push(f.POP+"TC_PickBonus_coinframe"),n.loadList.push(f.POP+"TC_TY_btn"),n.loadList.push(d+"pop_total"),function(){n.popOut(a),n.performPop(u.PopState.Expand),y.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),0),c.playEffect(p.Common.s_sound.RespinSet),c.funcDelay(function(){o>=30*_.default.theme.ctl.getCurTotalBet()?c.playRandomVoice("PopHighBGExit",[p.Common.s_sound.VoCongra,p.Common.s_sound.VoRespinCongra1,p.Common.s_sound.VoRespinCongra2]):c.playRandomVoice("PopBGExit",[p.Common.s_sound.VoCongra,p.Common.s_sound.VoRespinCongra1])},.5),l.default.addCallFunc(t,30,null,_.default.theme.gameLayer)}},o[u.PopupType.BGFGExit]=function(e){var t=i(e.callback),o=e.value,a=[{type:E.animation,showIndex:1,path:f.POP+"TC_Respin_diban",animation:"bg",pos:cc.v3(.5,12.5)},{type:E.animation,showIndex:2,path:f.POP+"TC_PickBonus_text",animation:"title",translateFlag:!0,pos:cc.v3(-1,238)},{type:E.sprite,showIndex:3,path:"pop_you_won",translateFlag:!0,pos:cc.v3(-2.5,148.5)},{type:E.compositeNode,showIndex:4,pos:cc.v3(-2,-2),elementList:[{type:E.animation,path:f.POP+"TC_PickBonus_coinframe",animation:"coinframe"},{type:E.label,path:"pop_total",pos:cc.v3(0,35),width:760,height:125,value:p.num_with_commas(o)}]},{type:E.sprite,showIndex:5,path:"pop_bg_in_fortune_respin",translateFlag:!0,pos:cc.v3(-2.5,-143.5)},{type:E.defaultButton,showIndex:6,callback:t,pos:cc.v3(-.5,-212.5),btnType:2}];return n.loadList.push(f.POP+"TC_Respin_diban"),n.loadList.push(f.POP+"TC_PickBonus_text"),n.loadList.push(f.POP+"TC_PickBonus_coinframe"),n.loadList.push(f.POP+"TC_TY_btn"),n.loadList.push(d+"pop_total"),function(){n.popOut(a),n.performPop(u.PopState.Expand),y.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),0),c.playEffect(p.Common.s_sound.RespinSet),c.funcDelay(function(){o>=30*_.default.theme.ctl.getCurTotalBet()?c.playRandomVoice("PopHighBGExit",[p.Common.s_sound.VoCongra,p.Common.s_sound.VoRespinCongra1,p.Common.s_sound.VoRespinCongra2]):c.playRandomVoice("PopBGExit",[p.Common.s_sound.VoCongra,p.Common.s_sound.VoRespinCongra1])},.5),l.default.addCallFunc(t,30,null,_.default.theme.gameLayer)}},o[u.PopupType.BGMapExit]=function(e){var t=i(e.callback),o=e.value,a=[{type:E.animation,showIndex:1,path:f.POP+"TC_Map_bg",animation:"bg",pos:cc.v3(4.5,12.5)},{type:E.animation,showIndex:2,path:f.POP+"TC_PickBonus_text",animation:"title",translateFlag:!0,pos:cc.v3(-1,238)},{type:E.sprite,showIndex:3,path:"pop_you_won",translateFlag:!0,pos:cc.v3(-2.5,148.5)},{type:E.compositeNode,showIndex:4,pos:cc.v3(1,-.5),elementList:[{type:E.animation,path:f.POP+"TC_PickBonus_coinframe",animation:"coinframe"},{type:E.label,path:"pop_total",pos:cc.v3(0,35),width:760,height:125,value:p.num_with_commas(o)}]},{type:E.sprite,showIndex:5,path:"pop_map_in_super_respin",translateFlag:!0,pos:cc.v3(-2.5,-144.5)},{type:E.defaultButton,showIndex:6,callback:t,pos:cc.v3(-.5,-212.5),btnType:2}];return n.loadList.push(f.POP+"TC_Map_bg"),n.loadList.push(f.POP+"TC_PickBonus_text"),n.loadList.push(f.POP+"TC_PickBonus_coinframe"),n.loadList.push(f.POP+"TC_TY_btn"),n.loadList.push(d+"pop_total"),function(){n.popOut(a),n.performPop(u.PopState.Expand),y.default.getInstance().fadeMusic(0,.3,cc.audioEngine.getMusicVolume(),0),c.playEffect(p.Common.s_sound.MapSet),c.funcDelay(function(){o>=30*_.default.theme.ctl.getCurTotalBet()?c.playRandomVoice("PopHighBGExit",[p.Common.s_sound.VoCongra,p.Common.s_sound.VoRespinCongra1,p.Common.s_sound.VoRespinCongra2]):c.playRandomVoice("PopBGExit",[p.Common.s_sound.VoCongra,p.Common.s_sound.VoRespinCongra1])},.5),l.default.addCallFunc(t,30,null,_.default.theme.gameLayer)}},o[u.PopupType.Jackpot]=function(e){var t,o,a;n.clickFunc=e.clickFunc;var r=i(e.callback),s=e.jpType,h=e.value,m=e.multi||1,g=(t={},t[1]=cc.v3(.5,9.5),t[2]=cc.v3(.5,9.5),t[3]=cc.v3(.5,9.5),t[4]=cc.v3(.5,9.5),t)[s],T=(o={},o[1]="Grand",o[2]="Major",o[3]="Minor",o[4]="Mini",o)[s],S=(a={},a[1]="Grand",a[2]="Major",a[3]="Minor",a[4]="Mini",a)[s],b=[{type:E.animation,showIndex:1,path:f.POP+"TC_JP_bg",animation:T,pos:g},{type:E.animation,showIndex:2,path:f.POP+"TC_JP_title",animation:S,translateFlag:!0,pos:cc.v3(.5,192.5)},{type:E.compositeNode,showIndex:3,pos:cc.v3(-1,-10),elementList:[{type:E.animation,path:f.POP+"TC_PickBonus_coinframe",animation:"coinframe"},{type:E.label,path:"pop_total",pos:cc.v3(0,30),width:760,height:125,value:p.num_with_commas(h)}]},{type:E.defaultButton,showIndex:4,callback:r,pos:cc.v3(0,-210),btnType:2}];if(m>1){var C={type:E.label,path:"jp_multi",scale:[1.5,1.5],pos:cc.v3(350,150),value:"X"+m,width:-1,height:-1};b[2].elementList.push(C),n.loadList.push(d+"jp_multi")}return n.loadList.push(f.POP+"TC_JP_bg"),n.loadList.push(f.POP+"TC_JP_title"),n.loadList.push(f.POP+"TC_PickBonus_coinframe"),n.loadList.push(f.POP+"TC_TY_btn"),n.loadList.push(d+"pop_total"),function(){n.popOut(b),n.performPop(u.PopState.Expand),y.default.getInstance().fadeMusic(0,.3,1,0),1==s?c.playEffect(p.Common.s_sound.GrandTransition):c.playEffect(p.Common.s_sound.JpTransition),c.funcDelay(function(){var e,t=(e={},e[1]=p.Common.s_sound.VoGrand,e[2]=p.Common.s_sound.VoMajor,e[3]=p.Common.s_sound.VoMinor,e[4]=p.Common.s_sound.VoMini,e)[s];c.playVoice(t)},.5),l.default.addCallFunc(r,30,null,_.default.theme.gameLayer)}},o[u.PopupType.GameFever]=function(e){var t=i(e.callback),o=["pop_game_fever_text","pop_game_fever_text","pop_game_fever_text_golden"][e.gameFeverType-1],a=[{type:E.sprite,showIndex:1,path:m.POP+"game_fever_board",pos:cc.v3(0,4.5)},{type:E.sprite,showIndex:2,path:o,translateFlag:!0,pos:cc.v3(0,0)},{type:E.button,showIndex:3,btnPath:m.POP+"game_fever_btn",btnDownPath:m.POP+"game_fever_btn_down",opacity:255,clickEffect:!0,callback:t,pos:cc.v3(-.5,-212.5),btnText:{type:E.compositeNode,pos:cc.v3(0,0),elementList:[{type:E.animation,path:f.POP+"TC_TY_btn",animationName:"btn"},{type:E.sprite,path:"pop_game_fever_btn_text",translateFlag:!0}]}}];return n.loadList.push(f.POP+"TC_TY_btn"),function(){n.popOut(a),n.performPop(u.PopState.Expand),l.default.addCallFunc(t,30,null,_.default.theme.gameLayer)}},o)[e](t)},r([T],t)}(cc.Component);o.default=A,cc._RF.pop()},{"../Base/Common_Base":"Common_Base","../Base/LabelNumRoll":"LabelNumRoll","../Base/Tools":"Tools","./Common":"Common","./Enum":"Enum","./Global":"Global","./GoldTiger":"GoldTiger","./MusicManager":"MusicManager"}],Popup:[function(e,t,o){"use strict";cc._RF.push(t,"2f02fsDpxVHSYyR9/hEfl7Q","Popup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.message=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.show=function(e){this.message.string=e,this.node.active=!0},t.prototype.hide=function(){this.node.active=!1,this.message.string=""},a([s(cc.Label)],t.prototype,"message",void 0),a([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],SpinElement:[function(e,t,o){"use strict";cc._RF.push(t,"a00ddisSNJD0btMcOctd45U","SpinElement");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/Tools"),l=e("./SymbolWheel"),s=e("./GoldTiger"),c=e("./Global"),p=e("../Components/ClippingNode"),u=e("./Common"),h=c.Global.CellSize,d=c.Global.collectScale,m=c.Global.downType,f=c.Global.GameTypePrivate,_=c.Global.jpName,y=c.Global.jpUpperScale,g=c.Global.LevelWeightList,T=c.Global.majorWheelUpScale,S=c.Global.multiWheelCollectScale,E=c.Global.multiWheelStopScale1,b=c.Global.multiWheelStopScale2,C=c.Global.multiWheelUpScale,v=c.Global.performMultiScale,N=c.Global.performMultiScaleSmall,L=c.Global.performTimeList,B=(c.Global.PlistPath,c.Global.ResSpinePath),P=c.Global.SymbolAnimation,A=c.Global.SymbolAniScale,w=c.Global.SymbolConfig,G=c.Global.SymbolDownAnimation,R=c.Global.SymbolNormal,O=c.Global.SymbolNormalScale,I=c.Global.symbolNumBigScale,F=c.Global.SymbolSpinePath,M=c.Global.SymbolSpineSkin,x=c.Global.symbolStateList,k=c.Global.symbolTypeList,D=c.Global.symbolUpperNumScale,W=c.Global.symbolUpperPosList,U=c.Global.symbolUpperTypeList,j=c.Global.symbolZOrderList,V=function(e,t,o){return e>=t&&e<=o},H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reconnectMulti=null,t.performMulti=null,t.performCollect=null,t.multiText=null,t}return i(t,e),t}(cc.Node),Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reconnectMulti=null,t.performMulti=null,t.performCollect=null,t.baseBet=0,t.baseMulti=0,t}return i(t,e),t}(cc.Node),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.performWheel=null,t.performWheelUp=null,t.performWheelDown=null,t}return i(t,e),t}(cc.Node),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.forcePosition=!1,t.privatePos=cc.v3(0,0),t.ignoreOpacityUpdate=!1,t}return i(t,e),t}(cc.Node),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.visibleFlag=!1,t.forcePosition=!1,t.oppositeOpacity=!1,t}return i(t,e),t}(cc.Sprite),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.visibleFlag=!1,t.forceVisible=!1,t.forcePosition=!1,t}return i(t,e),t}(sp.Skeleton),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.performWheel=null,t.performWheelUp=null,t.performWheelDown=null,t}return i(t,e),t}(cc.Node),q=cc._decorator,Z=q.ccclass,$=(q.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cellNum=0,t.normalSprite=null,t.animation=null,t.frameSprite=null,t.fadeOutSprite=null,t.jpUpper=null,t.numUpper=null,t.multiUpper=null,t.wheelUpper=null,t.visibleFlag=!1,t.aboutToStopFlag=!1,t.upperType=0,t.downAni=!1,t.expect=!1,t.multi=0,t.multiTime=0,t.bet=0,t.symbolLinkListTable=null,t.symbolLinkListReel=null,t.reelIndex=null,t.reelPosX=null,t.reelPosY=null,t.clipNode=null,t.unClipSprite=null,t.unClipNode=null,t.symbolUpper=null,t.reelColorNodeList=null,t.reel=null,t.symbolPosX=null,t.symbolPosY=null,t.coinImg=null,t.symbolNodeLinkList=null,t.listNodeReel=[],t.symbolIndex=-1,t.chipIndex=-1,t.coinIndex=-1,t.state=1,t.movePos=cc.v3(0,0),t.colorNode=null,t}return i(t,e),t.prototype.init=function(e){this.visibleFlag=!0,this.symbolIndex=-1,this.chipIndex=-1,this.state=1,this.movePos=cc.v3(0,0),this.symbolLinkListTable=e.symbolLinkListTable,this.symbolLinkListReel=e.symbolLinkListReel,this.reelIndex=e.reelIndex,this.reelPosX=e.reelPosX,this.reelPosY=e.reelPosY,this.clipNode=e.clipNode,this.unClipNode=e.unClipNode,this.reelColorNodeList=e.reelColorNodeList,this.reel=e.reel,this.symbolPosX=null,this.symbolPosY=null,this.symbolNodeLinkList=r.createLinkList(),this.symbolIndex=1,this.refreshColorNode(),this.listNodeReel=this.symbolLinkListReel[this.getSymbolType()].addToHead(this)},t.prototype.releaseSelf=function(){this.getAllNodeInSymbol().forEach(function(e){e.removeFromParent()}),this.node.removeFromParent()},t.prototype.updateColor=function(){if(r.checkNodeExist(this.colorNode))for(var e=this.colorNode.color,t=this.colorNode.opacity,o=this.getAllNodeInSymbol(),n=1;n<=o.length;n++)o[n-1].ignoreOpacityUpdate||(o[n-1].oppositeOpacity?o[n-1].opacity=255-t:o[n-1].opacity=t),o[n-1].ignoreColorUpdate||(o[n-1].color=e)},t.prototype.refreshColorNode=function(){this.colorNode=this.reelColorNodeList[this.getSymbolIndex()]},t.prototype.getColorNode=function(){return this.colorNode},t.prototype.addNodeToSymbol=function(e){e.visibleFlag=!0,e.listNode=this.symbolNodeLinkList.addToHead(e),e.forceVisible?e.active=!0:e.active=this.visibleFlag},t.prototype.deleteNodeFromSymbol=function(e){e.listNode&&this.symbolNodeLinkList.removeNode(e.listNode)},t.prototype.updateSymbolOrderOfArrival=function(){for(var e=this.getAllNodeInSymbol(),t=1;t<=e.length;t++);},t.prototype.refreshAllSymbolNodePos=function(){for(var e=this.getAllNodeInSymbol(),t=1;t<=e.length;t++){var o=cc.v3(this.symbolPosX+(e[t-1].forcePosition,this.movePos.x)+((e[t-1].privatePos||{}).x||0),this.symbolPosY+(e[t-1].forcePosition,this.movePos.y)+((e[t-1].privatePos||{}).y||0));if(e[t-1].parent&&e[t-1].parent.parent&&e[t-1].parent.parent instanceof p.default){var n=e[t-1].parent.parent.convertToWorldSpaceAR(o),i=e[t-1].parent.convertToNodeSpaceAR(n);e[t-1].position=i}else e[t-1].position=o}},t.prototype.setSymbolPosition=function(e,t){this.symbolPosX=e,this.symbolPosY=t,this.refreshAllSymbolNodePos()},t.prototype.setSymbolPositionX=function(e){this.symbolPosX=e,this.refreshAllSymbolNodePos()},t.prototype.setSymbolPositionY=function(e){this.symbolPosY=e,this.refreshAllSymbolNodePos()},t.prototype.getParent=function(){return this.getDefaultFatherNode()},t.prototype.getPosition=function(){return this.getSymbolPosition()},t.prototype.getSymbolPositionX=function(){return this.symbolPosX},t.prototype.getSymbolPositionY=function(){return this.symbolPosY},t.prototype.getSymbolPosition=function(){return cc.v3(this.symbolPosX,this.symbolPosY)},t.prototype.getSymbolWorldPosition=function(){return this.getDefaultFatherNode().convertToWorldSpaceAR(this.getSymbolPosition())},t.prototype.getAllNodeInSymbol=function(){return this.symbolNodeLinkList.getAllData()},t.prototype.getContentSize=function(){return h},t.prototype.setAboutToStop=function(e){this.aboutToStopFlag=e},t.prototype.getSymbolZOrder=function(){return j[this.getSymbolType()]*g.symbol},t.prototype.getStateZOrder=function(e){return g.state*e},t.prototype.getReelZOrder=function(){return g.reel*this.reelIndex},t.prototype.getSymbolAndReelZOrder=function(){return this.getSymbolZOrder()+this.getReelZOrder()},t.prototype.getTotalZOrder=function(e){return this.getSymbolAndReelZOrder()+this.getStateZOrder(e)},t.prototype.getDefaultTotalZOrder=function(){return this.getTotalZOrder(this.state)},t.prototype.getWinFrameZOrder=function(){return g.winFrame},t.prototype.stateChangeTo=function(e){this.state=e,this.stopDownAnimationChangeState(),this.updateSymbolUpper(),e==x.Spin?(this.updateFadeOutSprite(),this.updateNormalSprite(),this.setNormalVisible(!0),this.deleteUnClipSprite(),this.deleteAnimation(),this.deleteFrame()):e==x.Stop?(this.setNormalVisible(!1),this.createUnClipSprite(),this.setUnClipVisible(!0),this.setAnimationVisible(!1),this.setFrameVisible(!1)):e==x.AnimationLoop?(this.setNormalVisible(!1),this.setUnClipVisible(!1),this.createAnimation(),this.setAnimationVisible(!0),this.setFrameVisible(!1)):e==x.AnimationWin?(this.setNormalVisible(!1),this.setUnClipVisible(!1),this.createAnimation(),this.setAnimationVisible(!0),this.createFrame(),this.setFrameVisible(!0)):e==x.AnimationDown&&(this.setNormalVisible(!1),this.setUnClipVisible(!1),this.createAnimation(),this.setAnimationVisible(!0),this.setFrameVisible(!1))},t.prototype.getFatherNode=function(e){var t;return e==x.Spin?t=this.clipNode:e==x.Stop?t=this.unClipNode:e==x.AnimationLoop?t=this.unClipNode:e==x.AnimationWin?t=this.unClipNode:e==x.AnimationDown&&(t=this.unClipNode),t},t.prototype.getDefaultFatherNode=function(){return this.getFatherNode(this.state)},t.prototype.stopDownAnimationChangeState=function(){r.checkNodeExist(this.animation)&&(cc.Tween.stopAllByTag(541358784),this.downAni=!1)},t.prototype.setNormalVisible=function(e){r.checkNodeExist(this.normalSprite)?(this.normalSprite.visibleFlag=e,this.visibleFlag&&(this.normalSprite.node.active=e)):(r.showErrorPop("normalSprite is not exist."),console.trace())},t.prototype.setUnClipVisible=function(e){r.checkNodeExist(this.unClipSprite)&&(this.unClipSprite.visibleFlag=e,this.visibleFlag&&(this.unClipSprite.node.active=e))},t.prototype.setAnimationVisible=function(e){r.checkNodeExist(this.animation)&&(this.animation.visibleFlag=e,this.visibleFlag&&(this.animation.node.active=e))},t.prototype.setFrameVisible=function(e){r.checkNodeExist(this.frameSprite)&&(this.frameSprite.visibleFlag=e,this.frameSprite.node.active=e)},t.prototype.createUnClipSprite=function(){this.deleteUnClipSprite(),this.unClipSprite=new cc.Node("ControllableSpriteNode").addComponent(X);var e=this.getDefaultTotalZOrder();console.log("createUnClipSprite",e);var t=this.getDefaultFatherNode();t instanceof p.default?t.AddChild(this.unClipSprite.node,e):t.addChild(this.unClipSprite.node,e),this.addNodeToSymbol(this.unClipSprite.node),this.refreshAllSymbolNodePos(),this.unClipSprite.spriteFrame=r.getSymbolAtlas().getSpriteFrame(R[this.getSymbolIndex()]),this.unClipSprite.node.scale=O[this.getSymbolIndex()]},t.prototype.deleteUnClipSprite=function(){r.checkNodeExist(this.unClipSprite)&&(this.deleteNodeFromSymbol(this.unClipSprite),this.unClipSprite.node.removeFromParent(),this.unClipSprite=null)},t.prototype.createAnimation=function(){if(r.checkNodeExist(this.animation))cc.Tween.stopAllByTag(10086),this.animation.node.opacity=255,this.animation.node.zIndex=this.getDefaultTotalZOrder();else if(F[this.getSymbolIndex()]){var e=B.SYM+F[this.getSymbolIndex()],t=r.createAni(e).getComponent(sp.Skeleton);this.animation=new cc.Node("ControllableAnimationNode"+this.reelIndex).addComponent(K),r.copyAni(this.animation,t),this.animation.node.scale=A[this.getSymbolIndex()];var o=this.getDefaultFatherNode();o instanceof p.default?o.AddChild(this.animation.node,this.getDefaultTotalZOrder()):o.addChild(this.animation.node,this.getDefaultTotalZOrder()),this.addNodeToSymbol(this.animation.node)}this.refreshAllSymbolNodePos(),this.setAniSkin()},t.prototype.setAniSkin=function(){if(r.checkNodeExist(this.animation)){var e=M[this.getSymbolIndex()]||"default";this.animation.setSkin(e)}},t.prototype.deleteAnimation=function(){r.checkNodeExist(this.animation)&&(this.deleteNodeFromSymbol(this.animation),this.animation.node.removeFromParent(),this.animation=null)},t.prototype.deleteFrame=function(){r.checkNodeExist(this.frameSprite)&&(this.deleteNodeFromSymbol(this.frameSprite),this.frameSprite.node.removeFromParent(),this.frameSprite=null)},t.prototype.createFrame=function(){if(r.checkNodeExist(this.frameSprite))this.frameSprite.node.zIndex=this.getWinFrameZOrder();else{var e=r.createAni(B.NG+"NG_yfk").getComponent(sp.Skeleton);this.frameSprite=new cc.Node("ControllableAnimationNode"+this.reelIndex).addComponent(K),r.copyAni(this.frameSprite,e),this.frameSprite.forceVisible=!0,this.frameSprite.forcePosition=!0,this.unClipNode.addChild(this.frameSprite.node,this.getWinFrameZOrder()),this.addNodeToSymbol(this.frameSprite.node)}this.refreshAllSymbolNodePos()},t.prototype.createNormalSprite=function(){if(r.checkNodeExist(this.normalSprite))this.normalSprite.node.zIndex=this.getDefaultTotalZOrder();else{this.normalSprite=new cc.Node("ControllableSpriteNode").addComponent(X);var e=this.getDefaultFatherNode();e instanceof p.default?e.AddChild(this.normalSprite.node,this.getDefaultTotalZOrder()):e.addChild(this.normalSprite.node,this.getDefaultTotalZOrder()),this.addNodeToSymbol(this.normalSprite.node)}this.refreshAllSymbolNodePos()},t.prototype.updateNormalSprite=function(){r.getSymbolAtlas().getSpriteFrame(R[this.getSymbolIndex()])?(this.createNormalSprite(),R[this.getSymbolIndex()]&&(this.normalSprite.spriteFrame=r.getSymbolAtlas().getSpriteFrame(R[this.getSymbolIndex()])),this.normalSprite.node.scale=O[this.getSymbolIndex()]):(r.showErrorPop("symbolIndex="+this.getSymbolIndex()+"("+R[this.getSymbolIndex()]+") is not exist."),console.trace())},t.prototype.createFadeOutSprite=function(){if(r.checkNodeExist(this.fadeOutSprite))this.fadeOutSprite.node.zIndex=this.getDefaultTotalZOrder();else{this.fadeOutSprite=new cc.Node("ControllableSpriteNode").addComponent(X);var e=this.getDefaultFatherNode();e instanceof p.default?e.AddChild(this.fadeOutSprite.node,this.getDefaultTotalZOrder()):e.addChild(this.fadeOutSprite.node,this.getDefaultTotalZOrder()),this.fadeOutSprite.forcePosition=!0,this.fadeOutSprite.oppositeOpacity=!0,this.addNodeToSymbol(this.fadeOutSprite.node)}this.refreshAllSymbolNodePos()},t.prototype.updateFadeOutSprite=function(){var e=w[this.getSymbolIndex()];if(e.fadeOutPicPath){var t=r.getSymbolAtlas().getSpriteFrame(e.fadeOutPicPath);t?(this.createFadeOutSprite(),this.fadeOutSprite.spriteFrame=t):(r.showErrorPop("symbolIndex="+this.getSymbolIndex()+"fadeOutPicPath is !exist."),console.trace())}},t.prototype.getUpperType=function(){return this.upperType},t.prototype.setSymbolIndex=function(e){this.setMulti(1),this.setMultiTime(0);var t=e.index;10!=t||e.upperType&&e.upperType!=U.none||(t=r.findElementInList([3,8,13],this.reelIndex)?r.findElementInList([f.BG_MAP],s.default.theme.gameLayer.getGameTypePrivate())?Math.floor(3*Math.random()+11):Math.floor(2*Math.random()+11):Math.floor(6*Math.random()+15)),V(t,15,30)?(e.upperType=t,t=10):11==t?e.upperType=t:12==t?e.upperType=t:33==t?e.upperType=t:34==t&&(e.upperType=t);var o=e.coinIndex||0,n=(e.rollingFlag,e.keepCoinFlag),i=e.upperType||U.none;if(this.upperType=i,null==t||null==t||!w[t])return console.log(e,t,w[t]),r.showErrorPop(t+" ooo"),void console.trace();this.bet=s.default.theme.totalBet,n||(this.coinIndex=o,this.createCoin(this.coinIndex)),this.symbolLinkListReel[this.getSymbolType()].removeNode(this.listNodeReel),this.symbolIndex=t,this.refreshColorNode(),this.movePos=w[this.symbolIndex].movePos||cc.v3(0,0);var a=this.symbolLinkListReel[this.getSymbolType()];this.listNodeReel=a.addToHead(this),this.deleteSymbolUpper(),this.stateChangeTo(x.Spin)},t.prototype.createCoin=function(e){this.deleteCoin(),e&&e>0&&console.error("createCoin",e),this.refreshAllSymbolNodePos()},t.prototype.deleteCoin=function(){r.checkNodeExist(this.coinImg)&&(this.deleteNodeFromSymbol(this.coinImg),this.coinImg.node.removeFromParent(),this.coinImg=null)},t.prototype.flyCoin=function(){r.checkNodeExist(this.coinImg)&&(this.coinImg.node.color=cc.color(255,255,255),this.coinIndex=null,this.deleteNodeFromSymbol(this.coinImg),this.coinImg=null)},t.prototype.updateCoin=function(){r.checkNodeExist(this.coinImg)&&this.createCoin(this.coinIndex)},t.prototype.upCoin=function(){r.checkNodeExist(this.coinImg)&&r.changeFather(this.coinImg.node,s.default.theme.gameLayer.spinLayer.spinTable.unClipNode,g.expect_up-1)},t.prototype.downCoin=function(){r.checkNodeExist(this.coinImg)&&this.createCoin(this.coinIndex)},t.prototype.createSymbolUpper=function(){var e=this.getDefaultFatherNode();r.checkNodeExist(this.symbolUpper)?this.symbolUpper.parent==e?this.symbolUpper.zIndex=this.getDefaultTotalZOrder()+1:(this.deleteSymbolUpper(),this.symbolUpper=new J("SymbolUpper"+this.reelIndex),e instanceof p.default?e.AddChild(this.symbolUpper,this.getDefaultTotalZOrder()+1):e.addChild(this.symbolUpper,this.getDefaultTotalZOrder()+1),this.addNodeToSymbol(this.symbolUpper)):(this.symbolUpper=new J("SymbolUpper"+this.reelIndex),e instanceof p.default?e.AddChild(this.symbolUpper,this.getDefaultTotalZOrder()+1):e.addChild(this.symbolUpper,this.getDefaultTotalZOrder()+1),this.addNodeToSymbol(this.symbolUpper)),this.refreshAllSymbolNodePos()},t.prototype.updateSymbolUpper=function(){var e=this;if(e.getSymbolIndex(),r.findElementInList([11],e.upperType))if(e.createSymbolUpper(),r.checkNodeExist(e.wheelUpper));else{e.symbolUpper.forcePosition=!0,e.symbolUpper.privatePos=cc.v3(0,0),e.wheelUpper=new z("WheelUpper");for(var t=[],o=s.default.theme.gameLayer.getGameTypePrivate()==f.BG_MAP&&s.default.theme.avg_bet||s.default.theme.totalBet,n=[[1,2,3,4],[1,4,3,2],[2,1,4,3],[2,3,4,1]][Math.floor(4*Math.random()+1)-1],i=1;i<=n.length;i++)1==n[i-1]?t.push(4*o):2==n[i-1]?t.push(2):3==n[i-1]?t.push(10*o):4==n[i-1]&&t.push(2);var a=(cc.v3(-60,-32),cc.v3(60,-32),cc.v3(60,32),cc.v3(-60,32),new cc.Node("wheelNode").addComponent(l.default));a.init({stencil:{width:120,height:64},reelOrder:t,distanceY:45}),e.wheelUpper.addChild(a.node),e.wheelUpper.performWheel=function(e,t){console.log("wheel.performWheel",e,t),r.playEffect(u.Common.s_sound.RespinWheel),a.performResult(e,t),cc.tween(a.node).delay(t).call(function(){r.playEffect(u.Common.s_sound.RespinStop),r.funcDelay(function(){r.checkNodeExist(a.node)&&(a.performLockScale(),cc.tween(a.node).to(1*L.majorWheelJumpTime/3,{scale:E}).to(1*L.majorWheelJumpTime/3,{scale:1}).to(1*L.majorWheelJumpTime/3,{scale:b}).start())},0)}).start()},e.wheelUpper.performWheelUp=function(){console.log("wheel.performWheelUp"),r.playEffect(u.Common.s_sound.WheelStart),cc.tween(a.node).to(.5,{scale:T}).start()},e.wheelUpper.performWheelDown=function(){console.log("wheel.performWheelDown"),cc.tween(a.node).to(2*L.symbolWheelMultiJumpTime/3,{scale:S}).to(1*L.symbolWheelMultiJumpTime/3,{scale:1}).start(),a.performLockScaleBack()},e.wheelUpper.position=W.wheel,e.symbolUpper.addChild(e.wheelUpper),r.setColorWithFather(e.symbolUpper)}else if(r.findElementInList([12],e.upperType))if(e.createSymbolUpper(),r.checkNodeExist(e.multiUpper));else{e.symbolUpper.forcePosition=!0,e.symbolUpper.privatePos=cc.v3(0,0),e.multiUpper=new Q("MultiUpperNode");var c=r.randomList([-5,-4,-3,-2]),p=new cc.Node("multiNode").addComponent(l.default);p.init({stencil:{width:102,height:102,type:cc.Mask.Type.ELLIPSE,segments:100},reelOrder:c,distanceY:60}),p.node.position=cc.v3(0,1.5),e.multiUpper.addChild(p.node),e.multiUpper.performWheel=function(e,t){console.log("multi.performWheel",e,t),r.playEffect(u.Common.s_sound.RespinWheel),p.performResult(e,t),cc.tween(p.node).delay(t).call(function(){r.playEffect(u.Common.s_sound.RespinStop),r.funcDelay(function(){r.checkNodeExist(p.node)&&(p.performLockScale(),cc.tween(p.node).to(1*L.symbolWheelJumpTime/3,{scale:E}).to(1*L.symbolWheelJumpTime/3,{scale:1}).to(1*L.symbolWheelJumpTime/3,{scale:b}).start())},0)}).start()},e.multiUpper.performWheelUp=function(){console.log("multi.performWheelUp"),r.playEffect(u.Common.s_sound.WheelStart),cc.tween(p.node).to(.5,{scale:C}).start()},e.multiUpper.performWheelDown=function(){console.log("multi.performWheelDown"),cc.tween(p.node).to(2*L.symbolWheelMultiJumpTime/3,{scale:S}).to(1*L.symbolWheelMultiJumpTime/3,{scale:1}).start(),p.performLockScaleBack()},e.multiUpper.position=W.multi,e.symbolUpper.addChild(e.multiUpper),r.setColorWithFather(e.symbolUpper)}else if(r.findElementInList([31,32,33,34],e.upperType))if(e.createSymbolUpper(),r.checkNodeExist(e.jpUpper));else{e.symbolUpper.forcePosition=!0,e.symbolUpper.privatePos=cc.v3(0,0),e.jpUpper=new H("JpUpperNode");var h=U[e.upperType],m=r.addImage(r.transPng("symbol_upper_"+_[h-1]));m.setScale(y),e.jpUpper.addChild(m),e.jpUpper.position=W.jp,e.symbolUpper.addChild(e.jpUpper,1),e.jpUpper.reconnectMulti=function(){var t=e.getMulti();if(t>1){if(r.checkNodeExist(e.jpUpper.multiText));else{var o=r.createFont("jp_multi");o.node.name="multiText",o.node.position=W.jpMultiText,e.jpUpper.addChild(o.node),e.jpUpper.multiText=o}m.position=W.jpMultiName,e.jpUpper.multiText.string="X"+t}else r.checkNodeExist(e.jpUpper.multiText)&&(e.jpUpper.multiText.node.removeFromParent(),e.jpUpper.multiText=null),m.position=cc.v3(0,0)},e.jpUpper.performMulti=function(){cc.tween(e.jpUpper).to(2*L.multiPerformTime/5,{scale:N}).to(2*L.multiPerformTime/5,{scale:v}).to(1*L.multiPerformTime/5,{scale:1}).call(function(){}).start();var t=e.getMulti();if(t>1){if(r.checkNodeExist(e.jpUpper.multiText));else{var o=r.createFont("jp_multi");o.node.name="multiText",o.node.position=W.jpMultiText,e.jpUpper.addChild(o.node),e.jpUpper.multiText=o}m.position=W.jpMultiName,e.jpUpper.multiText.string="X"+t}else r.checkNodeExist(e.jpUpper.multiText)&&(e.jpUpper.multiText.node.removeFromParent(),e.jpUpper.multiText=null),m.position=cc.v3(0,0)},e.jpUpper.performCollect=function(){cc.tween(e.jpUpper).to(2*L.symbolCollectTime/3,{scale:d}).to(1*L.symbolCollectTime/3,{scale:1}).start()},r.setColorWithFather(e.symbolUpper)}else if(V(e.upperType,15,30))if(e.createSymbolUpper(),r.checkNodeExist(e.numUpper));else{e.symbolUpper.forcePosition=!0,e.symbolUpper.privatePos=cc.v3(0,0),e.numUpper=new Y("NumUpperNode");var g=U[e.upperType],B=g*(o=s.default.theme.gameLayer.getGameTypePrivate()==f.BG_MAP&&s.default.theme.avg_bet||s.default.theme.totalBet),P="symbol_num",A=1;13==e.getSymbolIndex()&&g>=5&&(P="symbol_num_big",A=I);var w=r.createFont(P);w.name="numFont",w.node.setScale(D*A),w.string=r.num_2_str(B),e.numUpper.addChild(w.node),e.numUpper.baseBet=o,e.numUpper.baseMulti=g,e.numUpper.position=W.num,e.symbolUpper.addChild(e.numUpper),e.numUpper.performMulti=function(){cc.tween(e.numUpper).to(2*L.multiPerformTime/5,{scale:N}).to(2*L.multiPerformTime/5,{scale:v}).to(1*L.multiPerformTime/5,{scale:1}).call(function(){}).start();var t=e.getMulti()*B;w.string=r.num_2_str(t)},e.numUpper.reconnectMulti=function(){var t=e.getMulti()*B;w.string=r.num_2_str(t)},e.numUpper.performCollect=function(){cc.tween(e.numUpper).to(2*L.symbolCollectTime/3,{scale:d}).to(1*L.symbolCollectTime/3,{scale:1}).start()},r.setColorWithFather(e.symbolUpper)}else e.deleteSymbolUpper()},t.prototype.deleteSymbolUpper=function(){r.checkNodeExist(this.symbolUpper)&&(this.deleteNodeFromSymbol(this.symbolUpper),this.symbolUpper.removeFromParent(),this.symbolUpper=null),this.numUpper=null,this.jpUpper=null,this.multiUpper=null,this.wheelUpper=null},t.prototype.getSymbolIndex=function(){return this.symbolIndex},t.prototype.stopRolling=function(){},t.prototype.performIdleAni=function(){var e;if(this.checkSymbolType(k.sc)&&s.default.theme.gameLayer.getGameTypePrivate()==f.NG)this.stateChangeTo(x.AnimationLoop),r.checkNodeExist(this.animation)&&(this.expect?this.animation.setAnimation(0,"sc_tp",!0):this.animation.setAnimation(0,"sc_daiji",!0));else if(this.checkSymbolType(k.bg)&&r.findElementInList([10,11,12,13,33,34],this.getSymbolIndex())){if(this.stateChangeTo(x.AnimationLoop),r.checkNodeExist(this.animation)){var t=this.getSymbolIndex();if(10==t){var o=((e={})[0]="red",e[1]="purple",e[2]="pink",e[3]="jin",e)[this.getMultiTime()];this.animation.setAnimation(0,o+"di_daiji",!0)}else 11==t?this.animation.setAnimation(0,"redkuang_daiji",!0):12==t?this.animation.setAnimation(0,"da_purpleqiu_daiji",!0):13==t?this.animation.setAnimation(0,"huzhua_daiji",!0):33==t?this.animation.setAnimation(0,"bluedi_daiji",!0):34==t&&this.animation.setAnimation(0,"greendi_daiji",!0)}}else this.checkSymbolType(k.wild)&&s.default.theme.gameLayer.getGameTypePrivate()==f.NG&&(this.stateChangeTo(x.AnimationLoop),r.checkNodeExist(this.animation)&&(this.expect,this.animation.setAnimation(0,"wild_idle",!0)))},t.prototype.performDownAnimation=function(e){var t=this;if(s.default.theme.gameLayer.spinLayer.spinTable.registerDown(e,t),t.stateChangeTo(x.AnimationDown),r.checkNodeExist(t.animation)){t.animation.setAnimation(0,G[t.getSymbolIndex()],!1);var o=w[t.getSymbolIndex()].downAnimationTime;t.downAni=!0,cc.tween(t.animation.node).tag(541358784).delay(o).call(function(){t.downAni=!1,e==e.scatter&&t.checkSymbolType(k.sc)?t.performIdleAni():e==e.bg&&t.checkSymbolType(k.bg)&&r.findElementInList([10,11,12,13,33,34],t.getSymbolIndex())?t.performIdleAni():t.stateChangeTo(x.Stop)}).start()}},t.prototype.stopDown=function(){},t.prototype.performAnimation=function(e){void 0===e&&(e=null),this.stateChangeTo(x.AnimationWin),r.checkNodeExist(this.animation)&&(this.checkSymbolType(k.sc),this.animation.setAnimation(0,P[this.getSymbolIndex()],!0))},t.prototype.performLineAnimation=function(){this.stateChangeTo(x.AnimationWin),this.frameSprite.setAnimation(0,"animation",!0)},t.prototype.stopLineAnimation=function(){this.setFrameVisible(!1)},t.prototype.symbolDown=function(){this.stateChangeTo(x.Spin),this.setSymbolVisible(!0),this.downCoin()},t.prototype.symbolUp=function(){this.performIdleAni()},t.prototype.performDown=function(e){this.upCoin(),this.checkSymbolType(k.sc)&&e[m.scatter]?this.performDownAnimation(m.scatter):this.checkSymbolType(k.bg)&&e[m.bg]?this.performDownAnimation(m.bg):(this.checkSymbolType(k.sc)||this.checkSymbolType(k.bg)||this.checkSymbolType(k.wild))&&this.performIdleAni()},t.prototype.checkSymbolType=function(e){if(e&&"object"==typeof e){var t=!1;return r.findElementInList(e,this.getSymbolIndex())&&(t=!0),t}r.showErrorPop("symbolType is not exist."),console.trace()},t.prototype.getSymbolType=function(){for(var e in k)if(this.checkSymbolType(k[e]))return e;return null},t.prototype.stopAnimation=function(){s.default.theme.gameLayer.getGameTypePrivate()==f.NG&&(this.symbolDown(),this.symbolUp())},t.prototype.setSymbolVisible=function(e){this.visibleFlag=e;for(var t=this.getAllNodeInSymbol(),o=1;o<=t.length;o++)t[o-1].forceVisible?t[o-1].active=t[o-1].visibleFlag:t[o-1].active=e?t[o-1].visibleFlag:e},t.prototype.performBGScatterAnimation=function(e){void 0===e&&(e=null),this.checkSymbolType(k.bg)&&(this.stateChangeTo(x.AnimationWin),r.checkNodeExist(this.animation)&&this.animation.setAnimation(0,P[this.getSymbolIndex()],!0))},t.prototype.performScatterAnimation=function(e){void 0===e&&(e=null),this.checkSymbolType(k.sc)&&(this.stateChangeTo(x.AnimationWin),r.checkNodeExist(this.animation)&&this.animation.setAnimation(0,P[this.getSymbolIndex()],!0))},t.prototype.performSCExpect=function(){this.expect=!0,this.downAni||this.performIdleAni()},t.prototype.stopPerformSCExpect=function(){this.expect=!1,this.downAni||this.performIdleAni()},t.prototype.performBGExpect=function(){this.expect=!0,this.downAni,this.performIdleAni()},t.prototype.stopPerformBGExpect=function(){this.expect=!1,this.downAni||this.performIdleAni()},t.prototype.getMulti=function(){return this.multi},t.prototype.setMulti=function(e){this.multi=e},t.prototype.getMultiTime=function(){return this.multiTime},t.prototype.setMultiTime=function(e){this.multiTime=e},t.prototype.performCollect=function(){var e,t;if(r.findElementInList([33,34],this.getSymbolIndex())){var o=void 0;o=33==this.getSymbolIndex()?"blue":"green",r.checkNodeExist(this.animation)&&this.animation.setAnimation(0,o+"di_jingzhen",!0);var n=r.createAni(B.SYM+"BG_jinbi").getComponent(sp.Skeleton);n.node.position=cc.v3(this.getSymbolPosition()),this.unClipNode.addChild(n.node,1e4),cc.tween(n.node).call(function(){n.setAnimation(0,"shouji",!1)}).delay(2).removeSelf().start(),this.jpUpper.performCollect()}else if(10==this.getSymbolIndex()){o=((e={})[0]="red",e[1]="purple",e[2]="pink",e[3]="jin",e)[this.getMultiTime()],r.checkNodeExist(this.animation)&&this.animation.setAnimation(0,o+"di_jingzhen",!0);var i=r.createAni(B.SYM+"BG_jinbi").getComponent(sp.Skeleton);i.node.position=this.getSymbolPosition(),this.unClipNode.addChild(i.node,1e4),cc.tween(i.node).call(function(){i.setAnimation(0,"shouji",!1)}).delay(2).removeSelf().start(),this.numUpper.performCollect()}else if(13==this.getSymbolIndex()){o=((t={})[0]="jin",t[1]="purple",t[2]="pink",t[3]="red",t)[this.getMultiTime()],r.checkNodeExist(this.animation)&&this.animation.setAnimation(0,o+"qiu_jingzhen",!0);var a=r.createAni(B.SYM+"BG_jinbi").getComponent(sp.Skeleton);a.node.position=this.getSymbolPosition(),this.unClipNode.addChild(a.node,1e4),cc.tween(a.node).call(function(){a.setAnimation(0,"shouji",!1)}).delay(2).removeSelf().start(),r.checkNodeExist(this.jpUpper)?this.jpUpper.performCollect():r.checkNodeExist(this.numUpper)&&this.numUpper.performCollect()}else r.showErrorPop("collect wrong symbolIndex"+this.getSymbolIndex())},t.prototype.turnDark=function(){var e=new cc.Node("tempColorNode");cc.tween(e).to(.5,{color:cc.color(150,150,150)}).removeSelf().start(),this.clipNode.AddChild(e),this.colorNode=e},t.prototype.performWheelDown=function(){var e=this;11==e.getSymbolIndex()?(r.checkNodeExist(e.animation)&&(e.animation.setAnimation(0,"redkuang_hou",!1),e.animation.addAnimation(0,"redkuang_jingzhen",!0),e.animation.node.zIndex=e.getDefaultTotalZOrder(),e.symbolUpper.zIndex=e.getDefaultTotalZOrder()+1),e.wheelUpper.performWheelDown()):12==e.getSymbolIndex()?(r.checkNodeExist(e.animation)&&(e.animation.setAnimation(0,"da_purplekuang_jieshu",!1),e.animation.addAnimation(0,"da_purpleqiu_jingzhen",!0)),r.funcDelay(function(){r.checkNodeExist(e.animation)&&(e.animation.node.zIndex=e.getDefaultTotalZOrder()),r.checkNodeExist(e.symbolUpper)&&(e.symbolUpper.zIndex=e.getDefaultTotalZOrder()+1)},L.multiPerformTime),e.multiUpper.performWheelDown(),r.funcDelay(function(){e&&e.turnDark()},1)):r.showErrorPop("perform wheel down wrong symbolIndex"+e.getSymbolIndex())},t.prototype.performWheelSpin=function(e){11==this.getSymbolIndex()?(this.wheelUpper.performWheel(e,L.wheelSpinTime),r.checkNodeExist(this.animation)&&this.animation.addAnimation(0,"redkuang_xunhuan",!0)):12==this.getSymbolIndex()?(this.multiUpper.performWheel(e,L.wheelSpinTime),r.checkNodeExist(this.animation)&&this.animation.addAnimation(0,"da_purplekuang_xunhuan",!0)):r.showErrorPop("perform wheel spin wrong symbolIndex"+this.getSymbolIndex())},t.prototype.performWheelUp=function(){11==this.getSymbolIndex()?(r.checkNodeExist(this.animation)&&(this.animation.node.zIndex=this.getWinFrameZOrder(),this.symbolUpper.zIndex=this.getWinFrameZOrder()+1,this.animation.setAnimation(0,"redkuang_hou",!1)),this.wheelUpper.performWheelUp()):12==this.getSymbolIndex()?(r.checkNodeExist(this.animation)?(this.animation.node.zIndex=this.getWinFrameZOrder(),this.symbolUpper.zIndex=this.getWinFrameZOrder()+1,this.animation.setAnimation(0,"da_purpleqiu_fangda",!1)):r.showErrorPop("symbolIndex="+this.getSymbolIndex()+" animation is null"),this.multiUpper.performWheelUp()):r.showErrorPop("perform wheel up wrong symbolIndex"+this.getSymbolIndex())},t.prototype.reconnectGameFeverMulti=function(e){this.setMulti(this.getMulti()*e),13==this.getSymbolIndex()?V(this.getUpperType(),15,30)?this.numUpper.reconnectMulti():r.findElementInList([33,34],this.getUpperType())&&this.jpUpper.reconnectMulti():r.showErrorPop("collect wrong symbolIndex"+this.getSymbolIndex())},t.prototype.performGameFeverMulti=function(e){this.setMulti(this.getMulti()*e),13==this.getSymbolIndex()?V(this.getUpperType(),15,30)?this.numUpper.performMulti():r.findElementInList([33,34],this.getUpperType())&&this.jpUpper.performMulti():r.showErrorPop("collect wrong symbolIndex"+this.getSymbolIndex())},t.prototype.performMulti=function(e){var t,o;if(this.setMulti(this.getMulti()*e),this.setMultiTime(this.getMultiTime()+1),r.findElementInList([33,34],this.getSymbolIndex()))this.jpUpper.performMulti();else if(10==this.getSymbolIndex()){this.numUpper.performMulti();var n=((t={})[0]="red",t[1]="purple",t[2]="pink",t[3]="jin",t)[this.getMultiTime()];this.animation&&(this.animation.setAnimation(0,n+"di_beichengbei",!1),this.animation.addAnimation(0,n+"di_daiji",!0))}else 13==this.getSymbolIndex()?(n=((o={})[0]="jin",o[1]="purple",o[2]="pink",o[3]="red",o)[this.getMultiTime()],r.checkNodeExist(this.animation)&&(this.animation.setAnimation(0,n+"qiu_beichengbei",!1),this.animation.addAnimation(0,n+"qiu_daiji",!0)),V(this.getUpperType(),15,30)?this.numUpper.performMulti():r.findElementInList([33,34],this.getUpperType())&&this.jpUpper.performMulti()):r.showErrorPop("collect wrong symbolIndex"+this.getSymbolIndex())},t.prototype.performMapChange=function(e){var t=this;13==t.getSymbolIndex()?V(e,15,30)||r.findElementInList([33,34],e)?(t.upperType=e,t.updateSymbolUpper(),t.symbolUpper.ignoreOpacityUpdate=!0,t.symbolUpper.opacity=0,cc.tween(t.symbolUpper).delay(.3).to(.3,{opacity:255}).call(function(){t.symbolUpper.ignoreOpacityUpdate=null}).start(),r.checkNodeExist(t.animation)?(r.playEffect(u.Common.s_sound.MapChange),t.animation.setAnimation(0,"huzhua_bian_qiu",!1),t.animation.addAnimation(0,"jinqiu_daiji",!0)):r.showErrorPop("symbolIndex="+t.getSymbolIndex()+" animation is null")):r.showErrorPop("performMapChange wrong upperType"+e):r.showErrorPop("performMapChange wrong symbolIndex"+t.getSymbolIndex())},t.prototype.reconnectMapChange=function(e){13==this.getSymbolIndex()?V(e,15,30)||r.findElementInList([33,34],e)?(this.upperType=e,this.updateSymbolUpper(),r.checkNodeExist(this.animation)?this.animation.setAnimation(0,"jinqiu_daiji",!0):r.showErrorPop("symbolIndex="+this.getSymbolIndex()+" animation is null")):r.showErrorPop("performMapChange wrong upperType"+e):r.showErrorPop("performMapChange wrong symbolIndex"+this.getSymbolIndex())},t.prototype.performH1Collect=function(){1==this.getSymbolIndex()&&(this.stateChangeTo(x.AnimationWin),r.checkNodeExist(this.animation)&&this.animation.setAnimation(0,"collect",!1))},a([Z],t)}(cc.Component));o.default=$,cc._RF.pop()},{"../Base/Tools":"Tools","../Components/ClippingNode":"ClippingNode","./Common":"Common","./Global":"Global","./GoldTiger":"GoldTiger","./SymbolWheel":"SymbolWheel"}],SpinLayer:[function(e,t,o){"use strict";cc._RF.push(t,"f75fboOrjpGprSPZu0wLQ8Z","SpinLayer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/Common_Base"),l=e("../Base/EventCenter"),s=e("../Base/ThemeControlNew"),c=e("../Base/Tools"),p=e("./CountWinLine"),u=e("./EffectLayer"),h=e("./Enum"),d=e("./Global"),m=d.Global.CellSize,f=(d.Global.ColumnNum,d.Global.distanceX,d.Global.distanceY),_=d.Global.frameBottomY,y=d.Global.GameTypePrivate,g=e("./GoldTiger"),T=e("./SpinTable"),S=cc._decorator,E=S.ccclass,b=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spinTable=null,t.effectLayer=null,t.root=null,t.root1=null,t._spinListenNode=null,t.extraSpinListenNodeList=[],t.spinResult=null,t.receiveData=!1,t.autoAvailable=!1,t.tableCenterPos=null,t.centerX=0,t.centerY=0,t.state=h.SpinLayerState.Uninitialized,t}return i(t,e),t.prototype.onLoad=function(){this.state=h.SpinLayerState.Uninitialized,this.autoAvailable=!0;var e=_-1.5*m.height;this.tableCenterPos=cc.v3(this.centerX,this.centerY-e),this.spinTable=(new cc.Node).addComponent(T.default),this.root=new cc.Node,this.node.addChild(this.root),this.root.zIndex=2,this.root.setPosition(this.centerX,this.centerY),this.root1=new cc.Node,this.root1.setPosition(-this.centerX,-this.centerY),this.root.addChild(this.root1),this.root1.addChild(this.spinTable.node),this._initComponents(),this.effectLayer=(new cc.Node).addComponent(u.default),this.node.addChild(this.effectLayer.node)},t.prototype._initComponents=function(){this.extraSpinListenNodeList=[],this._spinListenNode=new cc.Node,this.root1.addChild(this._spinListenNode),this._spinListenNode.setPosition(this.centerX,this.centerY-_+(g.default.RowNum-.5)*f),g.default.RowNum,g.default.RowNum},t.prototype.checkPosInSpinArea=function(){var e=!1;return c.findElementInList([y.FG],g.default.theme.gameLayer.getGameTypePrivate())&&(e=!1),e},t.prototype.changeTouchSpinConfig=function(){for(var e in this.extraSpinListenNodeList){var t=this.extraSpinListenNodeList[e];c.checkNodeExist(t)&&t.removeFromParent()}this.extraSpinListenNodeList=[];var o=g.default.theme.gameLayer.getGameTypePrivate();c.findElementInList([y.BG_NG,y.BG_FG,y.BG_MAP],o)?(this._spinListenNode.setPosition(this.centerX,this.centerY-_+(3*g.default.RowNum-.5)*f),g.default.RowNum,g.default.RowNum):(this._spinListenNode.setPosition(this.centerX,this.centerY-_+(g.default.RowNum-.5)*f),g.default.RowNum,g.default.RowNum)},t.prototype.update=function(){if(this.state==h.SpinLayerState.Uninitialized){if(!this.tableTurnToIdle())return;this.stateChangeTo(h.SpinLayerState.Idle),this.node.active=!0}this.state==h.SpinLayerState.Idle&&this.tableTurnToRolling()&&this.stateChangeTo(h.SpinLayerState.Rolling),this.state==h.SpinLayerState.Rolling&&this.tableTurnToIdle()&&this.isRollingEffectFinished()&&(g.default.theme.gameLayer.spinLayer.setReceiveData(!1),g.default.theme.ctl.getGameType()!=s.THEME_GAME_TYPE.MAIN&&g.default.theme.ctl.getGameType()!=s.THEME_GAME_TYPE.FREE&&g.default.theme.ctl.getGameType()!=s.THEME_GAME_TYPE.BONUS||(g.default.theme.ctl.reelsStopped(),g.default.theme.ctl.footer.setLabelDescription("Clear"),g.default.theme.ctl.getGameType(),s.THEME_GAME_TYPE.MAIN,this.stateChangeTo(h.SpinLayerState.Show),this.performWinShow())),this.state==h.SpinLayerState.Show&&this.effectLayer.state==h.WinShowState.Idle&&(this.stateChangeTo(h.SpinLayerState.Idle),this.setReceiveData(!1),g.default.theme.ctl.getGameType()==s.THEME_GAME_TYPE.MAIN?(g.default.theme.gameLayer.jackpotLayer.stopMimic(),g.default.theme.ctl.ngPerformOver(),l.default.pushEvent(r.EVT.SYSTEM.BET_CHANGE),g.default.theme.totalBet!=g.default.theme.ctl.getCurTotalBet()&&(g.default.theme.totalBet=g.default.theme.ctl.getCurTotalBet())):g.default.theme.ctl.getGameType()==s.THEME_GAME_TYPE.FREE&&(g.default.theme.gameLayer.freeSpinIndex=(this.spinResult||{}).fg_idx||g.default.theme.gameLayer.freeSpinIndex,g.default.theme.gameLayer.freeSpinNum=(this.spinResult||{}).fg_total_round||g.default.theme.gameLayer.freeSpinNum,g.default.theme.gameLayer.refreshFGSpinTimes(g.default.theme.gameLayer.freeSpinIndex,g.default.theme.gameLayer.freeSpinNum))),this.state==h.SpinLayerState.Idle||this.autoAvailable||(this.autoAvailable=!0),this.state==h.SpinLayerState.Idle&&this.autoAvailable&&this.isRollingEffectFinished()&&(g.default.theme.ctl.getGameType()==s.THEME_GAME_TYPE.MAIN&&g.default.theme.ctl.getAutoStatus()?(this.autoAvailable=!1,this.stopShow(),g.default.theme.ctl.toSpin()?g.default.theme.ctl.footer.setLabelDescription("GoodLuck"):g.default.theme.ctl.enableAuto(!1)):g.default.theme.ctl.getGameType()==s.THEME_GAME_TYPE.BONUS&&g.default.theme.gameLayer.processNextRoundBonusGame())},t.prototype.isRollingEffectFinished=function(){return this.spinTable.isRollingEffectFinished()},t.prototype.tableTurnToRolling=function(){return this.spinTable.state==h.SpinTableState.Rolling},t.prototype.tableTurnToIdle=function(){return this.spinTable.state==h.SpinTableState.Idle},t.prototype.setReceiveData=function(e){this.receiveData=e},t.prototype.getReceiveData=function(){return this.receiveData},t.prototype.processSpinResult=function(e){if((null!=e||function(e){for(var t in e)if(null!=e[t])return!1;return!0}(e))&&!this.getReceiveData()){this.setReceiveData(!0),this.spinResult=e,g.default.M1=this.spinResult.mys_trans||g.default.M1,g.default.theme.avg_bet=this.spinResult.avg_bet,g.default.theme.avg_bet||c.showErrorPop("\u6ca1\u6709avg_bet");var t=this.spinResult.upper_reel,o=this.spinResult.item_list,n=this.spinResult.upper_list,i=this.spinResult.down_reel;if(g.default.theme.ctl.getGameType()==s.THEME_GAME_TYPE.BONUS){o=[],n=[],i=[];for(var a=1;a<=5;a++)for(var r=1;r<=3;r++)o[5*(r-1)+a-1]=[this.spinResult.bg_result[a-1][r-1]],n[5*(r-1)+a-1]=[Math.floor(5*Math.random()+1)],i[5*(r-1)+a-1]=[Math.floor(5*Math.random()+1)];this.spinResult.item_list=o,this.spinResult.upper_list=n,this.spinResult.down_reel=i,this.spinResult.jp_value}this.spinResult.award_notice=0,g.default.theme.ctl.getGameType()!=s.THEME_GAME_TYPE.BONUS&&(1==(this.spinResult.win_map||0)&&this.spinTable.countBar.lockToIndex(this.spinResult.map_pos_idx||1),this.dealWithWinLines()),this.spinTable.spinResult=this.spinResult.item_list,this.spinTable.rollingEndResult=this.spinResult.down_reel,this.spinTable.preRollResult=this.spinResult.upper_list||t,g.default.theme.ctl.getGameType()==s.THEME_GAME_TYPE.MAIN?this.spinTable.coinIndex=this.spinResult.puzzle_pos&&c.next(this.spinResult.puzzle_pos)&&this.spinResult.puzzle_pos||[]:this.spinTable.coinIndex=[],g.default.theme.ctl.getGameType()==s.THEME_GAME_TYPE.FREE?g.default.theme.gameLayer.cancelEnableStop||g.default.theme.ctl.enableStop():g.default.theme.ctl.getGameType()==s.THEME_GAME_TYPE.BONUS&&(g.default.theme.gameLayer.cancelEnableStop||g.default.theme.ctl.enableStop()),this.spinTable.spin()}},t.prototype.stopShow=function(e){return void 0===e&&(e=null),this.effectLayer.stopShow()},t.prototype.stopSpinTable=function(){this.spinTable.stop()},t.prototype.stopAllExpect=function(){this.spinTable.stopAllExpect()},t.prototype.dealWithWinLines=function(){for(var e=this.spinResult.win_lines,t=1;t<=e.length;t++){var o=e[t-1],n=p.getWinLine(o.line,o.count);e[t-1].hit_pos=n}},t.prototype.performWinShow=function(){this.effectLayer.perform(this.spinResult)},t.prototype.stateChangeTo=function(e,t){void 0===t&&(t=null),this.state=e},t.prototype.freshGameFever=function(){},a([E],t)}(cc.Component));o.default=b,cc._RF.pop()},{"../Base/Common_Base":"Common_Base","../Base/EventCenter":"EventCenter","../Base/ThemeControlNew":"ThemeControlNew","../Base/Tools":"Tools","./CountWinLine":"CountWinLine","./EffectLayer":"EffectLayer","./Enum":"Enum","./Global":"Global","./GoldTiger":"GoldTiger","./SpinTable":"SpinTable"}],SpinReel:[function(e,t,o){"use strict";cc._RF.push(t,"6150103qelOVaOeeJx0pa6B","SpinReel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/BetControl"),l=e("../Base/Tools"),s=e("./Common"),c=e("./Enum"),p=e("./Global"),u=p.Global.autoReelColorBackTime,h=p.Global.bottomLength,d=p.Global.CellSize,m=p.Global.ColumnNum,f=p.Global.distanceX,_=p.Global.distanceY,y=p.Global.downReelLength,g=p.Global.downType,T=p.Global.effectPath,S=p.Global.effectType,E=p.Global.fakeValueTable,b=p.Global.frameBottomY,C=p.Global.GameTypePrivate,v=p.Global.LevelWeightList,N=p.Global.reelType,L=p.Global.ResImagePath,B=p.Global.ResSpinePath,P=p.Global.symbolColor,A=p.Global.SymbolConfig,w=p.Global.symbolTypeList,G=p.Global.topLength,R=e("./GoldTiger"),O=e("./SpinElement"),I=cc._decorator,F=I.ccclass,M=(I.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.default=null,t.linkNodeReel=null,t}return i(t,e),t}(cc.Node)),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spinTable=null,t.cells=[],t.reelBackList=[],t.spinResult=null,t.speedPosNode=null,t.clipNode=null,t.unClipNode=null,t.topSymbolIndex=null,t.topSpriteIndex=0,t.topReelOrderIndex=0,t.reelIndex=0,t.visibleCellNum=0,t.topLength=0,t.bottomLength=0,t.downReelLength=0,t.realCellNum=0,t.reelPosX=0,t.reelPosY=0,t.reelOrderList=[],t.cellHeight=0,t.distanceX=0,t.distanceY=0,t.fakeValueConfig={},t.realCellStablePosYList={},t.nextPreRollResult=[],t.reelOrder=[],t.preRollResult=[],t.rollingEndResult=[],t.coinIndex=[],t.shouldPlayEffect=[],t.performDownFlag=[],t.stopDownFlag=[],t.bgNearWinExpectEffectId=0,t.expectAnimation_up=null,t.expectAnimation_up_bg=null,t.expectAnimation_up_bg_near_win=null,t.expectAnimation_down=null,t.firstResultSymbol=null,t.staticSymbolIndex=null,t.goldenWildReelType=!1,t.expecting=!1,t.realStart=!1,t.toStart=!1,t.toStop=!1,t.stopped=!1,t.notSpin=!1,t.autoColorBack=!1,t.reelType=0,t.duration=0,t.durationState1=-1,t.distanceState2=30,t.distanceState3=0,t.distanceState4=120,t.distanceForDuration=0,t.distanceToReduceSpeed=400,t.distanceToTargetPosY=0,t.startDelayTime=0,t.speedState1=2400,t.expectSpeed=7200,t.countDown=0,t.performWildMoveFlag=!1,t.wildMoveDown=!1,t.wildMoveUp=!1,t.wildMoveSpeed=0,t.wildMoveSpeedMax=750,t.wildMoveAboutToStop=!1,t.RollingWithResultIndex=-1,t.PreRollWithResultIndex=-1,t.state=c.SpinReelState.Uninitialized,t.delay_duration=0,t.nodeList=[],t.reelTypeStack=[],t.reelColorNodeList=[],t.symbolLinkListReel={reelBack:null},t.symbolLinkListTable={},t}return i(t,e),t.prototype.init=function(e){for(var t in this.spinTable=e.spinTable,this.reelColorNodeList=[],A)this.reelColorNodeList[t]=new cc.Node,this.spinTable.node.addChild(this.reelColorNodeList[t]),this.nodeList.push(this.reelColorNodeList[t]);for(var t in e.reelColorNodeList=this.reelColorNodeList,this.symbolLinkListReel={reelBack:null},w)this.symbolLinkListReel[t]=l.createLinkList();this.symbolLinkListReel.reelBack=l.createLinkList(),e.symbolLinkListReel=this.symbolLinkListReel,this.symbolLinkListTable=e.symbolLinkListTable,this.clipNode=e.clipNode,this.unClipNode=e.unClipNode,this.reelIndex=e.reelIndex,this.visibleCellNum=e.visibleCellNum,this.topLength=e.topLength||G,this.bottomLength=e.bottomLength||h,this.downReelLength=e.downReelLength||y,this.realCellNum=this.visibleCellNum+G+h,this.reelPosX=e.reelPosX,this.reelPosY=e.reelPosY,this.reelOrderList=e.reelOrderList,this.resetReelOrder(N.NG),this.cellHeight=e.cellHeight||d.height,this.distanceX=e.distanceX||f,this.distanceY=e.distanceY||_,e.reel=this,this.fakeValueConfig=E[(this.reelIndex-1)%m+1],this.cells=[];var o=(this.visibleCellNum+this.topLength+this.topLength-1)/2;for(this.realCellStablePosYList={},t=1;t<=this.realCellNum;t++)this.cells[t-1]=(new cc.Node).addComponent(O.default),this.cells[t-1].init(e),this.realCellStablePosYList[t-this.topLength]=this.reelPosY+(o-(t-1))*this.distanceY,this.cells[t-1].setSymbolPosition(this.reelPosX,this.realCellStablePosYList[t-this.topLength]);this.reelBackList=[];var n=new M,i=null;return(i=l.addImage(L.NG+"reel_back")).setAnchorPoint(cc.v3(.5,0)),n.addChild(i),n.default=i,n.scaleX=1,n.setPosition(this.reelPosX,R.default.theme.gameLayer.centerY-b),l.setColorWithFather(n),this.clipNode.AddChild(n,v.reelBack),this.nodeList.push(n),n.linkNodeReel=this.symbolLinkListReel.reelBack.addToHead(n),this.reelBackList.push(n),this.topSpriteIndex=1,this.speedPosNode=new cc.Node,this.spinTable.node.addChild(this.speedPosNode),this.nodeList.push(this.speedPosNode),this.topSymbolIndex=1,!0},t.prototype.getSymbolWorldPosition=function(e){return this.spinTable.node.convertToWorldSpaceAR(cc.v3(this.reelPosX,this.realCellStablePosYList[e]))},t.prototype.getReelPosition=function(){return cc.v3(this.reelPosX,this.reelPosY)},t.prototype.initReelPositions=function(e){this.nextPreRollResult=[],this.resetTopReelOrderIndexTo(e[0]);for(var t=this.realCellNum-this.topLength;t>=1-this.topLength;t--){var o=void 0;t<1?(this.moveTopReelOrderIndex(-1),o=this.reelOrder[this.topReelOrderIndex-1],this.nextPreRollResult.splice(0,0,o)):o=t>this.visibleCellNum?3:e[t-1],this.conversionCells(t).setSymbolIndex({index:o,upperType:this.getFakeSymbolUpper(o)}),this.topSymbolIndex=o}this.updateReelOrderOfArrival(),this.stateChangeTo(c.SpinReelState.Idle)},t.prototype.resetTopReelOrderIndexTo=function(e){for(var t=this.reelOrder.length,o=Math.floor(Math.random()*t+1),n=!1,i=o;i<=t;i++)if(this.reelOrder[i-1]==e){this.topReelOrderIndex=i,n=!0;break}if(!n)for(i=1;i<=o-1;i++)if(this.reelOrder[i-1]==e){this.topReelOrderIndex=i,n=!0;break}n||this.resetTopReelOrderIndexTo(this.reelOrder[0])},t.prototype.moveTopReelOrderIndex=function(e){this.topReelOrderIndex=(this.topReelOrderIndex-1+e+this.reelOrder.length)%this.reelOrder.length+1},t.prototype.updateSymbolColor=function(){for(var e=this.realCellNum-this.topLength;e>=1-this.topLength;e--)this.conversionCells(e).updateColor()},t.prototype.update=function(e){var t=this,o=t.speedPosNode.position.y;if(t.expecting&&(t.state!=c.SpinReelState.Rolling&&t.state!=c.SpinReelState.RollingWithResult&&t.state!=c.SpinReelState.AboutToStop&&t.state!=c.SpinReelState.PreRollWithResult||(o=t.expectSpeed)),t.toStart&&t.state==c.SpinReelState.Idle&&t.realStart)return t.staticSymbolIndex=null,t.toStart=!1,t.stopped=!1,t.firstResultSymbol=null,t.distanceToTargetPosY=0,t.distanceForDuration=0,t.preRollResult=t.nextPreRollResult.slice(),t.PreRollWithResultIndex=t.preRollResult.length-t.topLength,void t.stateChangeTo(c.SpinReelState.PreRollWithResult);if(!R.default.theme.gameLayer.extendSpin&&t.toStop&&(t.state==c.SpinReelState.Rolling||t.state==c.SpinReelState.RollingWithResult||t.state==c.SpinReelState.PreRollWithResult||t.state==c.SpinReelState.AboutToStop)){t.toStop=!1,t.setAboutToStop(!0),t.resetTopReelOrderIndexTo(t.nextPreRollResult[0]),t.stateChangeTo(c.SpinReelState.AboutToStop),t.countDown=0;for(var n=t.realCellNum-t.topLength;n>=1-t.topLength;n--){var i=0;t.conversionCells(n).setSymbolPositionY(t.realCellStablePosYList[n]);var a=void 0,r=0;n<1&&n>-t.nextPreRollResult.length?a=t.nextPreRollResult[t.nextPreRollResult.length+n-1]:n<=-t.nextPreRollResult.length?(t.moveTopReelOrderIndex(-1),a=t.reelOrder[t.topReelOrderIndex-1]):n>t.visibleCellNum&&n<=t.rollingEndResult.length+t.visibleCellNum?a=t.rollingEndResult[n-t.visibleCellNum-1]||1:n>t.rollingEndResult.length+t.visibleCellNum?a=3:(a=t.spinResult[n-1],r=(t.spinResult.symbol_upper_list||[])[n-1]||0,((t.coinIndex||[])[n-1]||-1)>0&&(i=t.coinIndex[n-1])),t.conversionCells(n).setSymbolIndex({index:a,rollingFlag:!0,coinIndex:i,upperType:r}),t.topSymbolIndex=a}t.autoColorBack&&(t.autoColorBack=!1,t.setSymbolColorNormal(u))}if(t.state==c.SpinReelState.Rolling||t.state==c.SpinReelState.AboutToStop||t.state==c.SpinReelState.BounceBack||t.state==c.SpinReelState.RollingWithResult||t.state==c.SpinReelState.BounceUp||t.state==c.SpinReelState.PreRollWithResult){var p=1;t.state==c.SpinReelState.AboutToStop&&(t.getDistanceToStop()||t.distanceToReduceSpeed)<t.distanceToReduceSpeed&&(p=Math.max(.4,Math.min(1,.3+t.getDistanceToStop()/(d.height+t.distanceState2))));var h=e*o*p;for(n=1-t.topLength;n<=t.realCellNum-t.topLength;n++)t.conversionCells(n).setSymbolPositionY(t.conversionCells(n).getSymbolPositionY()-h);c.SpinReelState.Rolling!=t.state&&c.SpinReelState.BounceUp!=t.state&&c.SpinReelState.PreRollWithResult!=t.state||R.default.theme.gameLayer.isFakeSpinning||R.default.theme.gameLayer.extendSpin||t.setDuration(t.getDuration()+e)}var m=function(e,o){for(var n=t.topSpriteIndex;o();){n=(n-1-1+t.realCellNum)%t.realCellNum+1;var i=t.cells[n-1].getSymbolPositionY();if(!(i<t.realCellStablePosYList[t.realCellNum-t.topLength]))break;i+=t.cellHeight*t.realCellNum,t.cells[n-1].setSymbolPositionY(i),t.topSpriteIndex=n,e()}};if(t.state==c.SpinReelState.PreRollWithResult&&(m(function(){var e=t.preRollResult[t.PreRollWithResultIndex-1];t.conversionCells(1-t.topLength).setSymbolIndex({index:e,upperType:t.getFakeSymbolUpper(e)}),t.topSymbolIndex=e,t.PreRollWithResultIndex=t.PreRollWithResultIndex-1},function(){return t.PreRollWithResultIndex>0}),t.PreRollWithResultIndex<=0&&t.stateChangeTo(c.SpinReelState.Rolling)),t.state==c.SpinReelState.Rolling&&m(function(){t.moveTopReelOrderIndex(-1);var e=t.reelOrder[t.topReelOrderIndex-1];t.staticSymbolIndex&&(e=t.staticSymbolIndex),t.conversionCells(1-t.topLength).setSymbolIndex({index:e,rollingFlag:!0,upperType:t.getFakeSymbolUpper(e)}),t.topSymbolIndex=e},function(){return!0}),t.state!=c.SpinReelState.Rolling&&t.state!=c.SpinReelState.PreRollWithResult||t.duration>t.durationState1&&!R.default.theme.gameLayer.isFakeSpinning&&!R.default.theme.gameLayer.extendSpin&&(t.stateChangeTo(c.SpinReelState.RollingWithResult),t.fillDownReel(),t.RollingWithResultIndex=t.rollingEndResult.length),t.state==c.SpinReelState.RollingWithResult&&(m(function(){var e=t.rollingEndResult[t.RollingWithResultIndex-1];t.staticSymbolIndex&&(e=t.staticSymbolIndex),t.conversionCells(1-t.topLength).setSymbolIndex({index:e,rollingFlag:!0,upperType:t.getFakeSymbolUpper(e)}),t.topSymbolIndex=e,t.RollingWithResultIndex=t.RollingWithResultIndex-1},function(){return t.RollingWithResultIndex>0}),t.RollingWithResultIndex<=0&&(t.setAboutToStop(!0),t.countDown=t.visibleCellNum+t.topLength,t.resetTopReelOrderIndexTo(t.nextPreRollResult[0]),t.stateChangeTo(c.SpinReelState.AboutToStop),t.autoColorBack&&(t.autoColorBack=!1,t.setSymbolColorNormal(u)))),t.state==c.SpinReelState.AboutToStop&&(m(function(){var e;t.countDown=t.countDown-1;var o=0,n=0;t.countDown<t.topLength?t.nextPreRollResult.length-t.topLength+t.countDown+1>0?e=t.nextPreRollResult[t.nextPreRollResult.length-t.topLength+t.countDown+1-1]:(t.moveTopReelOrderIndex(-1),e=t.reelOrder[t.topReelOrderIndex-1]):(t.firstResultSymbol||(t.firstResultSymbol=t.conversionCells(1-t.topLength)),e=t.spinResult[t.countDown-t.topLength+1-1],n=(t.spinResult.symbol_upper_list||[])[t.countDown-t.topLength+1-1]||0,((t.coinIndex||[])[t.countDown-t.topLength+1-1]||-1)>0&&(o=t.coinIndex[t.countDown-t.topLength+1-1])),t.conversionCells(1-t.topLength).setSymbolIndex({index:e,rollingFlag:!0,coinIndex:o,upperType:n}),t.topSymbolIndex=e},function(){return t.countDown>0}),t.updateReelOrderOfArrival(),0==t.countDown&&t.realCellStablePosYList[1-t.topLength]-t.distanceState2-t.conversionCells(1-t.topLength).getSymbolPositionY()>0)){for(n=1-t.topLength;n<=t.realCellNum-t.topLength;n++)t.conversionCells(n).setSymbolPositionY(t.realCellStablePosYList[n]-t.distanceState2);t.stateChangeTo(c.SpinReelState.BounceBack);var f=!1;if(l.findElementInList([C.BG_NG,C.BG_FG,C.BG_MAP],R.default.theme.gameLayer.getGameTypePrivate())&&(t.expecting&&(t.performDownFlag[g.bg]?l.playVoice(s.Common.s_sound.AllWin):0==R.default.theme.gameLayer.bonusLeftSpinTimes&&l.playVoice(s.Common.s_sound.AllLoss)),t.performDownFlag[g.bg]&&(f=R.default.theme.gameLayer.resetBGSpinTimes(),t.notSpin=!0,t.spinTable.checkBGExpect())),f=!1,t.spinTable.checkFastStop()){for(n=1;n<=T.length;n++)if(t.spinTable.shouldPlayEffect[n]&&t.shouldPlayEffect[n])if(n==S.scatter)t.spinTable.shouldPlayEffect[n]=!1,l.playEffect(T[n-1]+(t.spinTable.scatterTotalDropNum-1),!1);else if(n==S.bg){if(!f){var _=!1;for(var y in t.spinTable.hasTigerSymbolState)if(t.spinTable.hasTigerSymbolState[y]){_=!0;break}for(var y in t.spinTable.hasWheelSymbolState)if(t.spinTable.hasWheelSymbolState[y])break;_?l.playEffect(s.Common.s_sound.ReelTear,!1):l.playEffect(T[n-1],!1),t.spinTable.shouldPlayEffect[n]=!1}}else t.spinTable.shouldPlayEffect[n]=!1,l.playEffect(T[n-1],!1)}else for(n=1;n<=T.length;n++)t.shouldPlayEffect[n]&&(n==S.scatter?(t.spinTable.scatterDropNum=t.spinTable.scatterDropNum+1,l.playEffect(T[n-1]+(t.spinTable.scatterDropNum-1),!1)):n==S.bg?f||(t.spinTable.hasWheelSymbolState[t.reelIndex-1],(_=t.spinTable.hasTigerSymbolState[t.reelIndex-1])?l.playEffect(s.Common.s_sound.ReelTear,!1):l.playEffect(T[n-1],!1)):l.playEffect(T[n-1],!1));for(t.spinTable.hasWheelSymbolState[t.reelIndex-1]=!1,t.spinTable.hasTigerSymbolState[t.reelIndex-1]=!1,n=1;n<=15;n++)t.conversionCells(n).cellNum=n,t.conversionCells(n).performDown(t.performDownFlag);for(n=1-t.topLength;n<=t.realCellNum-t.topLength;n++)t.conversionCells(n).stopRolling();for(var n in t.stopDownFlag)t.stopDownFlag[n]&&R.default.theme.gameLayer.spinLayer.spinTable.stopDown(n);t.goldenWildReelType&&(t.goldenWildReelType=!1,t.resetReelOrder(t.reelTypeStack.pop())),t.playReelStopEffect()}if(t.state==c.SpinReelState.BounceBack&&t.realCellStablePosYList[1-t.topLength]-t.conversionCells(1-t.topLength).getSymbolPositionY()<0){for(n=1-t.topLength;n<=t.realCellNum-t.topLength;n++)t.conversionCells(n).setSymbolPositionY(t.realCellStablePosYList[n]);t.stateChangeTo(c.SpinReelState.Idle),t.stopped=!0}t.updateSymbolColor()},t.prototype.getDistanceToStop=function(){return this.firstResultSymbol?this.firstResultSymbol.getSymbolPositionY()-this.realCellStablePosYList[this.visibleCellNum]+this.distanceState2:null},t.prototype.fillDownReel=function(){for(var e=this.rollingEndResult.length+1,t=this.downReelLength,o=e;o<=t;o++)this.rollingEndResult[o-1]=Math.floor(5*Math.random()+1)},t.prototype.updateReelOrderOfArrival=function(){for(var e=1-this.topLength;e<=this.realCellNum-this.topLength;e++)this.conversionCells(e).updateSymbolOrderOfArrival()},t.prototype.performReelDownExpecting=function(){},t.prototype.performExpecting=function(){console.log("performExpecting");var e=this;e.reelTypeStack.push(e.reelType),e.resetReelOrder(N.ExpectSC),l.checkNodeExist(e.expectAnimation_up)||(e.expectAnimation_up=l.createAni(B.NG+"NG_tp").getComponent(sp.Skeleton),cc.tween(e.expectAnimation_up.node).call(function(){e.expectAnimation_up.setAnimation(0,"animation",!0)}).start(),e.unClipNode.addChild(e.expectAnimation_up.node,v.expect_up),e.nodeList.push(e.expectAnimation_up.node),e.expectAnimation_up.node.setPosition(e.reelPosX,e.reelPosY))},t.prototype.stopExpecting=function(){this.resetReelOrder(this.reelTypeStack.pop()),l.checkNodeExist(this.expectAnimation_up)&&(this.expectAnimation_up.node.removeFromParent(),this.expectAnimation_up=null),l.checkNodeExist(this.expectAnimation_down)&&(this.expectAnimation_down.node.removeFromParent(),this.expectAnimation_down=null),this.expecting=null},t.prototype.performBGExpecting=function(){var e=this;e.reelTypeStack.push(e.reelType),e.resetReelOrder(N.ExpectBG),l.checkNodeExist(e.expectAnimation_up_bg)||(e.expectAnimation_up_bg=l.createAni(B.NG+"NG_tingpai").getComponent(sp.Skeleton),cc.tween(e.expectAnimation_up_bg.node).call(function(){e.expectAnimation_up_bg.setAnimation(0,"tingpai",!0)}).start(),e.unClipNode.addChild(e.expectAnimation_up_bg.node,v.expect_up),e.nodeList.push(e.expectAnimation_up_bg.node),e.expectAnimation_up_bg.node.setPosition(e.reelPosX,e.reelPosY))},t.prototype.stopBGExpecting=function(){this.resetReelOrder(this.reelTypeStack.pop()),l.checkNodeExist(this.expectAnimation_up_bg)&&(this.expectAnimation_up_bg.node.removeFromParent(),this.expectAnimation_up_bg=null),this.expecting=null},t.prototype.performBGNearWinExpect=function(){this.expecting||(this.reelTypeStack.push(this.reelType),this.resetReelOrder(N.ExpectBG_NearWin),l.checkNodeExist(this.expectAnimation_up_bg_near_win)||(this.expectAnimation_up_bg_near_win=l.createAni(B.BG+"Respin_tp").getComponent(sp.Skeleton),this.refreshBGNearWinExpect(),(l.findElementInList([c.SpinReelState.Rolling,c.SpinReelState.RollingWithResult],this.state)||this.state==c.SpinReelState.AboutToStop&&this.countDown>0)&&this.beginPlayNearWinEffect(),this.unClipNode.addChild(this.expectAnimation_up_bg_near_win.node,v.expect_up),this.nodeList.push(this.expectAnimation_up_bg_near_win.node),this.expectAnimation_up_bg_near_win.node.setPosition(this.reelPosX,this.reelPosY)),this.expecting=!0)},t.prototype.beginPlayNearWinEffect=function(){this.endPlayNearWinEffect(),this.bgNearWinExpectEffectId=l.playEffect(s.Common.s_sound.RespinFast)},t.prototype.endPlayNearWinEffect=function(){this.bgNearWinExpectEffectId&&(cc.audioEngine.stopEffect(this.bgNearWinExpectEffectId),this.bgNearWinExpectEffectId=null)},t.prototype.refreshBGNearWinExpect=function(){if(l.checkNodeExist(this.expectAnimation_up_bg_near_win))if(this.notSpin)this.stopBGNearWinExpect();else{var e=this.state==c.SpinReelState.Idle?"tp_daiji":"tp_kuosan";this.expectAnimation_up_bg_near_win.setAnimation(0,e,!0),this.state==c.SpinReelState.PreRollWithResult?this.beginPlayNearWinEffect():this.state==c.SpinReelState.BounceBack&&this.endPlayNearWinEffect()}},t.prototype.stopBGNearWinExpect=function(){l.checkNodeExist(this.expectAnimation_up_bg_near_win)&&(this.resetReelOrder(this.reelTypeStack.pop()),this.expectAnimation_up_bg_near_win.node.removeFromParent(),this.expectAnimation_up_bg_near_win=null),this.expecting=null},t.prototype.symbolDown=function(){for(var e=1-this.topLength;e<=this.realCellNum-this.topLength;e++)this.conversionCells(e).symbolDown()},t.prototype.setDurationState1=function(e){this.durationState1=e},t.prototype.getDurationState1=function(){return this.durationState1},t.prototype.setDuration=function(e){this.duration=e},t.prototype.getDuration=function(){return this.duration},t.prototype.setDelayDuration=function(e){this.delay_duration=e},t.prototype.getDelayDuration=function(){return this.delay_duration},t.prototype.isStarted=function(){return this.toStart||this.state!=c.SpinReelState.Idle},t.prototype.isStopped=function(){return this.toStop||this.state==c.SpinReelState.Idle},t.prototype.spin=function(){this.notSpin||this.isStarted()||(this.toStart=!0,this.toStop=!1,this.setAboutToStop(!1),this.realStart=!0,this.symbolDown(),this.duration=0,this.setDelayDuration(0))},t.prototype.stop=function(){this.isStopped()||(this.toStop=!0)},t.prototype.setAboutToStop=function(e){for(var t=1;t<=this.cells.length;t++)this.cells[t-1].setAboutToStop(e)},t.prototype.resetReelOrder=function(e){this.reelType=e;var t=e+(R.default.theme.ctl.getCurBet()>=r.default.getMinLargeBet()&&N.high||N.low);this.reelOrder=this.reelOrderList[t]},t.prototype.getVisibleCellsIndexList=function(){for(var e=[],t=1;t<=this.visibleCellNum;t++)e.push(this.conversionCells(t));return e},t.prototype.playReelStopEffect=function(){this.spinTable.playNormalStopEffect(this.reelIndex)},t.prototype.stateChangeTo=function(e){this.state=e,this.state==c.SpinReelState.Idle?(this.speedPosNode.stopAllActions(),this.speedPosNode.setPosition(cc.v3(0,0))):this.state==c.SpinReelState.Rolling?(this.speedPosNode.stopAllActions(),cc.tween(this.speedPosNode).to(.1,{position:cc.v3(0,this.speedState1)},{easing:"sineInOut"}).start()):this.state==c.SpinReelState.PreRollWithResult?(this.speedPosNode.stopAllActions(),this.speedPosNode.setPosition(cc.v3(0,0)),cc.tween(this.speedPosNode).to(.1,{position:cc.v3(0,this.speedState1)},{easing:"sineInOut"}).start()):this.state==c.SpinReelState.BounceBack&&(this.speedPosNode.stopAllActions(),this.speedPosNode.setPosition(cc.v3(0,-120))),l.findElementInList([C.BG_NG,C.BG_FG,C.BG_MAP],R.default.theme.gameLayer.getGameTypePrivate())&&this.refreshBGNearWinExpect()},t.prototype.conversionCells=function(e){return this.cells[this.conversion(e+this.topLength-1)-1]},t.prototype.conversion=function(e){return(this.topSpriteIndex+e-1+this.realCellNum)%this.realCellNum+1},t.prototype.setLockIdle=function(){for(var e=1;e<=R.default.RowNum;e++)this.conversionCells(e).deleteFrame()},t.prototype.loadReel=function(e){for(var t=1;t<=this.realCellNum;t++)this.conversionCells(t-this.topLength).setSymbolIndex(e[t-1]),this.conversionCells(t-this.topLength).setSymbolVisible(!0)},t.prototype.saveReel=function(e){for(var t=1;t<=this.realCellNum;t++)e[t-1]={index:this.conversionCells(t-this.topLength).getSymbolIndex(),upperType:this.conversionCells(t-this.topLength).getUpperType()}},t.prototype.setReelColor=function(e,t,o,n){for(var i=[],a=[],r=1;r<=e.length;r++){var s=e[r-1];if("reelBack"==s)for(var c=this.symbolLinkListReel[s].getAllData(),p=1;p<=c.length;p++)a.push(c[p-1]);else if("object"==typeof s&&Object.keys(s).length>0)for(p=1;p<=s.length;p++)i.push(this.getReelColorNode(s[p-1]));else i.push(this.getReelColorNode(s))}for(r=1;r<=i.length;r++)l.setColorTo(i[r-1],t,n);for(r=1;r<=a.length;r++)l.setColorTo(a[r-1],o,n)},t.prototype.setReelOpacity=function(e,t,o,n){for(var i=[],a=[],r=1;r<=e.length;r++){var s=e[r-1];if("reelBack"==s)for(var c=this.symbolLinkListReel[s].getAllData(),p=1;p<=c.length;p++)a.push(c[p-1]);else if("object"==typeof s&&Object.keys(s).length>0)for(p=1;p<=s.length;p++)i.push(this.getReelColorNode(s[p-1]));else i.push(this.getReelColorNode(s))}for(r=1;r<=i.length;r++)l.setOpacityTo(i[r-1],t,n);for(r=1;r<=a.length;r++)l.setOpacityTo(a[r-1],o,n)},t.prototype.setSymbolFadeOut=function(e,t){if(!t){for(var o in t=[],A)t.push(o);t.push("reelBack")}var n=t.slice();this.setReelOpacity(n,0,0,e)},t.prototype.setSymbolFadeIn=function(e,t){if(!t){for(var o in t=[],A)t.push(o);t.push("reelBack")}var n=t.slice();this.setReelOpacity(n,255,255,e)},t.prototype.setSymbolColorGrey=function(e,t){if(!t){for(var o in t=[],A)t.push(o);t.push("reelBack")}var n=t.slice(),i=P,a=P;this.setReelColor(n,i,a,e)},t.prototype.setSymbolColorNormal=function(e,t){if(void 0===t&&(t=null),!t){for(var o in t=[],A)t.push(o);t.push("reelBack")}var n=t.slice(),i=cc.color(255,255,255),a=cc.color(255,255,255);this.setReelColor(n,i,a,e)},t.prototype.getReelColorNode=function(e){return this.reelColorNodeList[e]},t.prototype.releaseSelf=function(){var e=this;for(var t in e.cells)e.cells[t].releaseSelf();for(var t in e.nodeList)l.checkNodeExist(e.nodeList[t])&&e.nodeList[t].removeFromParent();e=null},t.prototype.getExtraExpectTime=function(){return 0},t.prototype.getFakeSymbolUpper=function(e){var t=this.fakeValueConfig[e];return t?t[Math.floor(Math.random()*t.length+1)-1]:0},t.prototype.setReelToOneStaticSymbol=function(){},a([F],t)}(cc.Component);o.default=x,cc._RF.pop()},{"../Base/BetControl":"BetControl","../Base/Tools":"Tools","./Common":"Common","./Enum":"Enum","./Global":"Global","./GoldTiger":"GoldTiger","./SpinElement":"SpinElement"}],SpinTable:[function(e,t,o){"use strict";cc._RF.push(t,"ef8bcuI1LlHX5XgNFynLf8L","SpinTable");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/BetControl"),l=e("../Base/Common_Base"),s=e("../Base/EventCenter"),c=e("../Base/ThemeControlNew"),p=e("../Base/Tools"),u=e("../Components/ClippingNode"),h=e("./Common"),d=e("./Enum"),m=e("./Global"),f=m.Global.ColumnNum,_=m.Global.distanceX,y=m.Global.distanceY,g=m.Global.downType,T=m.Global.effectType,S=m.Global.expectType,E=m.Global.frameBottomY,b=m.Global.GameTypePrivate,C=m.Global.LevelWeightList,v=m.Global.ReelList,N=m.Global.reelType,L=m.Global.ResImagePath,B=m.Global.ResSpinePath,P=m.Global.symbolColor,A=m.Global.SymbolConfig,w=m.Global.symbolTypeList,G=e("./GoldTiger"),R=e("./MapPrizeNode"),O=e("./MusicManager"),I=e("./SpinReel"),F=cc._decorator,M=F.ccclass,x=(F.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.changeToNG=null,t.changeToFG=null,t.changeToBG=null,t}return i(t,e),t}(cc.Node)),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getTigerPos=null,t.deleteTip=null,t.performLock=null,t.performUnLock=null,t.checkLockState=null,t.moveStencil=null,t.getNowPercent=null,t.lockToIndex=null,t.performFull=null,t.performCollectTo=null,t.reconnect=null,t.changeToNG=null,t.changeToBG=null,t}return i(t,e),t}(cc.Node),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.linkNode=null,t}return i(t,e),t}(cc.Node),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TimerCallGroupID="SpinTable",t.stencil=null,t.blueBarAni=null,t.redBarAni=null,t.tigerNode=null,t.tigerAni=null,t.frame=null,t.clipNode=null,t.unClipNode=null,t.countBar=null,t.pauseUpdateFuncList=p.createQueue(),t.durationState1Base_NG=.03,t.durationState1Base_BG=1.5,t.durationDiv=.2,t.durationDivFG=.5,t.durationFast=.04,t.coinIndex=[],t.spinStartEffectEnded=!0,t.spinStopEffectEnded=!0,t.spinResult=null,t.state=d.SpinTableState.Uninitialized,t.togetherStop=!1,t.isForceStop=!1,t.firstExpect=!1,t.allDrop=!1,t.SCExpectCount=0,t.scatterTotalDropNum=0,t.getFirstStopReelDistance=null,t.highExpectColorBack=null,t.scatterDropNum=0,t.playNormalStopEffectInterval=.05,t.playNormalStopEffectLastTime=-1,t.hasScatter=null,t.hasScatterFromLeftNum=null,t.reelFastEffectLength=2.8,t.shouldExpectingCellList=[],t.shouldExpecting=!1,t.preRollResult=[],t.rollingEndResult=[],t.prepareConfig={},t.posX=[],t.hasSymbol=[],t.hasSymbolFromLeft=[],t.lastExpectReel=[],t.lastExpectReelIndex=0,t.symbolLinkListTable={reelBack:null,reelFrame:null,reelBar:null},t.scatterDownList={},t.wildDownList={},t.downList={},t.tableStack=[],t.shouldPlayEffect=[],t.hasTigerSymbolState=[],t.hasWheelSymbolState=[],t.bgDownVoiceList=[],t.resetConfig={},t.extraClipNodeList=[],t.centerX=0,t.centerY=0,t.cellList=[],t}return i(t,e),t.prototype.onLoad=function(){this.createConfigTable(),this.initResetFunc(),this.posX=[];for(var e=1;e<=f;e++)this.posX[e-1]=this.centerX+(e-1-(f-1)/2)*_;for(var t in this.symbolLinkListTable={reelBack:null,reelFrame:null,reelBar:null},w)this.symbolLinkListTable[t]=p.createLinkList();this.symbolLinkListTable.reelBack=p.createLinkList(),this.symbolLinkListTable.reelFrame=p.createLinkList(),this.symbolLinkListTable.reelBar=p.createLinkList();var o=_*f+50,n=y*G.default.RowNum;for(cc.v3(-o/2,0),cc.v3(o/2,0),cc.v3(o/2,n),cc.v3(-o/2,n),this.clipNode=new u.default("clipNode"),this.clipNode.AddStencil(o,n,cc.v3(this.centerX,this.centerY-E+n/2),null),this.node.addChild(this.clipNode,1),this.extraClipNodeList=[],this.unClipNode=new cc.Node("unClipNode"),this.node.addChild(this.unClipNode,6),this.frame=this.createTableFrame(),this.node.addChild(this.frame,-3),this.countBar=this.createCountBar(),this.node.addChild(this.countBar,2),this.cellList=[],e=1;e<=f;e++){var i=G.default.RowNum,a=this.posX[e-1],r=this.centerY-E+i/2*y;this.cellList[e-1]=(new cc.Node).addComponent(I.default),this.cellList[e-1].init({visibleCellNum:i,reelOrderList:this.createReelOrderList(e),clipNode:this.clipNode,unClipNode:this.unClipNode,reelPosX:a,reelPosY:r,spinTable:this,symbolLinkListTable:this.symbolLinkListTable,reelIndex:e})}},t.prototype.onCreateTip=function(){},t.prototype.onDeleteTip=function(){},t.prototype.onClickCountBar=function(){var e=r.default.getMinLargeBet();G.default.theme.ctl.getCurBet()<e&&G.default.theme.ctl.getOtherBtnsEnableState()&&r.default.getMaxBet()>=e&&G.default.theme.ctl.betControl.changeToBet(e),console.log("onClickCountBar",G.default.theme.ctl.getCurBet(),e,G.default.theme.ctl.getOtherBtnsEnableState(),r.default.getMaxBet())},t.prototype.createCountBar=function(){var e=this,t=new k,o=G.default.theme.gameLayer.getCenterPos();t.position=cc.v3(o);var n=0,i=new cc.Node("barNode");t.addChild(i),i.setPosition(-44,216.5);var a=p.addImage(L.NG+"collect_bar_frame");i.addChild(a);var c=p.addImage(L.NG+"collect_bar_blue");i.addChild(c),e.blueBarAni=p.createAni(B.NG+"NG_meter").getComponent(sp.Skeleton),i.addChild(e.blueBarAni.node),cc.tween(e.blueBarAni.node).delay(5).call(function(){e.blueBarAni.setAnimation(0,"idle_blue",!0)}).start();var d=new u.default("barNode.clipNode");d.AddStencil(755,42),e.stencil=d.stencil,i.addChild(d,1);var m=p.addImage(L.NG+"collect_bar_red");d.AddChild(m),e.redBarAni=p.createAni(B.NG+"NG_meter").getComponent(sp.Skeleton),d.AddChild(e.redBarAni.node),cc.tween(e.redBarAni.node).call(function(){e.redBarAni.setAnimation(0,"idle_yellow",!0)}).start(),e.tigerNode=new cc.Node("tigerNode"),e.node.addChild(e.tigerNode,7),e.tigerNode.setPosition(G.default.theme.gameLayer.getCenterPos().add(cc.v3(-410,214))),e.tigerAni=p.createAni(B.NG+"NG_bar_collect").getComponent(sp.Skeleton),e.tigerNode.addChild(e.tigerAni.node),cc.tween(e.tigerAni.node).call(function(){e.tigerAni.setAnimation(0,"idle",!0)}).start(),t.getTigerPos=function(){return cc.v3(e.tigerNode.getPosition())};var y=new cc.Node("showPrizeNode");t.addChild(y),y.setPosition(385,216.5);var g=p.addImage(L.NG+"collect_bar_target_frame");y.addChild(g);for(var T=new cc.Node("tableBarNode"),S=1;S<=4;S++){var E=new cc.Node("tableBarNode.barElement"+S);E.setPosition((S-f/2)*_,0);var C=p.addImage(L.NG+"table_bar");E.addChild(C),T.addChild(E)}T.setScale(.1),y.addChild(T);var v=new R.default;y.addChild(v),v.init();var N=null,P=null,A=function(){p.checkNodeExist(N)?(N.stopAllActions(),N.setScale(1),cc.tween(N).to(.3,{scale:0}).delay(.2).removeSelf().start(),N=null):p.showErrorPop("delete tipNode while tipNode !exist"),p.checkNodeExist(P)&&(P.node.removeFromParent(),P=null)};e.onDeleteTip=A,e.onCreateTip=function(){p.checkNodeExist(N)&&(p.showErrorPop("create tipNode while tipNode exist"),A()),N=new cc.Node("tipNode");var t=p.addImage(L.NG+"collect_bar_tip_board"),o=p.addImage(p.transPng("collect_bar_tip_text"));t.position=cc.v3(-368,-66.5),o.position=cc.v3(-368,-71.5),N.addChild(t),N.addChild(o),N.setScale(0),N.position=cc.v3(368,196).add(G.default.theme.gameLayer.getCenterPos()),cc.tween(N).to(.3,{scale:1}).start(),e.node.addChild(N,8),P=p.createBtnWithSize(cc.size(1e4,1e4),{handler:function(t){t.target.getComponent(cc.Button).interactable&&t.type==cc.Node.EventType.TOUCH_END&&e.onDeleteTip()},target:e}),G.default.theme.gameLayer.node.addChild(P.node,1e3)};var w=p.createBtnWithSize(cc.size(926,52),{handler:function(t){t.target.getComponent(cc.Button).interactable&&t.type==cc.Node.EventType.TOUCH_END&&e.onCreateTip()},target:e});w.node.position=cc.v3(0,216),t.addChild(w.node,3),t.deleteTip=function(){p.checkNodeExist(N)&&A()};var O,I=null;t.performLock=function(){p.checkNodeExist(I)?p.showErrorPop("create  lock while lock exist"):(t.deleteTip(),e.blueBarAni.node.active=!1,e.redBarAni.node.active=!1,e.tigerAni.setAnimation(0,"idle",!1),null==e.countBar?cc.tween(e.tigerNode).delay(.5).call(function(){p.changeFather(e.tigerNode,e.countBar,0)}).start():p.changeFather(e.tigerNode,e.countBar,0),(I=p.createAni(B.NG+"NG_meter").getComponent(sp.Skeleton)).node.position=cc.v3(-7,222),t.addChild(I.node,2),G.default.initFlag&&p.playEffect(h.Common.s_sound.MapLock),cc.tween(I.node).call(function(){I.setAnimation(0,l.translateAnimation("lock_bar"),!1)}).start()),p.checkNodeExist(O)?p.showErrorPop("create countBarBtn while countBarBtn exist"):((O=p.createBtnWithSize(cc.size(926,52),{handler:function(t){t.target.getComponent(cc.Button).interactable&&t.type==cc.Node.EventType.TOUCH_END&&e.onClickCountBar()},target:e})).node.position=cc.v3(0,216),t.addChild(O.node,3))},t.performUnLock=function(){p.checkNodeExist(I)?(e.blueBarAni.node.active=!0,e.redBarAni.node.active=!0,e.tigerAni.setAnimation(0,"idle",!0),p.changeFather(e.tigerNode,e.node,7),G.default.initFlag?(p.playEffect(h.Common.s_sound.MapUnlock),I.setAnimation(0,l.translateAnimation("unlock_bar",I),!1),cc.tween(I.node).delay(2).removeSelf().start()):I.node.removeFromParent(),I=null):p.showErrorPop("delete lock while lock !exist"),p.checkNodeExist(O)?(O.node.removeFromParent(),O=null):p.showErrorPop("delete countBarBtn while countBarBtn !exist")};var F=1;return t.checkLockState=function(){var e=G.default.theme.ctl.getCurBet()>=r.default.getMinLargeBet()?1:0;F!=e&&(1==e?t.performUnLock():t.performLock()),F=e},t.checkLockState(),s.default.registerEvent(l.EVT.SYSTEM.BET_CHANGE,t.checkLockState,t),t.moveStencil=function(t,o){t>100?t=100:t<0&&(t=0),n=t,cc.Tween.stopAllByTag(14235);var a=0,r=0;n/100>.05?(a=1,r=(n/100-.05)/.95):a=n/100/.05;var l=75.5*a+679.5*r-755,s=cc.v3(l,0);if((o||0)>0){e.stencil.parent.MoveStencil(s,o);var c=e.stencil.position.x+377.5,u=s.x+377.5,h=p.createAni(B.NG+"NG_meter").getComponent(sp.Skeleton);h.node.position=cc.v3(c,0),cc.tween(h.node).call(function(){h.setAnimation(0,"rise",!1)}).to(o,{position:cc.v3(u,0)}).delay(2).removeSelf().start(),i.addChild(h.node,2)}else e.stencil.parent.MoveStencil(s)},t.getNowPercent=function(){return n},t.lockToIndex=function(e){v.lockToIndex(e)},t.performFull=function(o){e.tigerAni.setAnimation(0,"full",!1),e.tigerAni.addAnimation(0,"idle",!0),v.lockToIndex(o);var n=p.createAni(B.NG+"NG_meter").getComponent(sp.Skeleton);n.node.position=cc.v3(-44,216.5),cc.tween(n.node).call(function(){n.setAnimation(0,"full_bottom",!1)}).delay(2).removeSelf().start();var i=p.createAni(B.NG+"NG_meter").getComponent(sp.Skeleton);i.node.position=cc.v3(-44,216.5),cc.tween(i.node).call(function(){i.setAnimation(0,"full_top",!1)}).delay(2).removeSelf().start(),t.addChild(n.node,-1),t.addChild(i.node,1)},t.performCollectTo=function(o){t.moveStencil(o,.5),e.tigerAni.setAnimation(0,"collect",!1),e.tigerAni.addAnimation(0,"idle",!0)},t.reconnect=function(e){t.moveStencil(e)},t.changeToBG=function(){p.checkNodeExist(N)&&A(),e.tigerNode.active=!1,t.active=!1,p.findElementInList([b.BG_MAP],G.default.theme.gameLayer.getGameTypePrivate())&&t.reconnect(0)},t.changeToNG=function(){e.tigerNode.active=!0,t.active=!0,v.unlockAuto()},t},t.prototype.createTableFrame=function(e){void 0===e&&(e=null);var t=(e=e||{}).defaultPos||cc.v3(this.centerX,this.centerY),o=e.clipNode||this.clipNode,n=new x;n.position=cc.v3(t);for(var i=new D,a=[],r=[{key:"lantern",type:"ani",path:B.NG+"NG_denglong",pos:cc.v3(0,0),scaleX:1,scaleY:1,action:function(e){return cc.tween().call(function(){e.setAnimation(0,"ngdenglong",!0)})}},{key:"tableFrame_l",path:"table_frame_l",pos:cc.v3(0,-.5),anchorPoint:cc.v3(1,.5),scaleX:1,scaleY:1},{key:"tableFrame_r",path:"table_frame_l",pos:cc.v3(0,-.5),anchorPoint:cc.v3(1,.5),scaleX:-1,scaleY:1},{key:"tableFrameLight",type:"ani",path:B.NG+"NG_denglong",pos:cc.v3(0,0),scaleX:1,scaleY:1,action:function(e){return cc.tween().repeatForever(cc.tween().delay(3).call(function(){e.setAnimation(0,"qipansaoguang",!1)}))}},{key:"tableLeftEar",path:"table_ear_left",pos:cc.v3(-455.5,-40.5),scaleX:1,scaleY:1},{key:"tableLeftEarText",path:"table_ear_text",pos:cc.v3(-447.5,-38),scaleX:1,scaleY:1},{key:"tableRightEar",path:"table_ear_left",pos:cc.v3(454.5,-40.5),scaleX:-1,scaleY:1},{key:"tableRightEarText",path:"table_ear_text",pos:cc.v3(447,-38),scaleX:1,scaleY:1}],l={},s=1;s<=r.length;s++){var c=null;if("ani"==(r[s-1].type||"")){c=p.createAni(r[s-1].path).getComponent(sp.Skeleton);var u=r[s-1].action(c);cc.tween(c.node).then(u).start()}else(c=p.addImage(L.NG+r[s-1].path).getComponent(cc.Sprite)).node.setAnchorPoint(r[s-1].anchorPoint||cc.v3(.5,.5));c.node.position=cc.v3(r[s-1].pos),c.node.scaleX=r[s-1].scaleX,c.node.scaleY=r[s-1].scaleY,r[s-1].key&&(l[r[s-1].key]=c.node),a.push(c.node)}for(s=1;s<=a.length;s++)i.addChild(a[s-1]);i.position=cc.v3(0,0),p.setColorWithFather(i),i.linkNode=this.symbolLinkListTable.reelFrame.addToHead(i),n.addChild(i,0);var h=new D,d=[],m=[{path:"table_bar",pos:cc.v3(-267,70.5),scaleX:1,scaleY:1},{path:"table_bar",pos:cc.v3(-127,-12),scaleX:1,scaleY:1},{path:"table_bar",pos:cc.v3(13,-12),scaleX:1,scaleY:1},{path:"table_bar",pos:cc.v3(153,-12),scaleX:1,scaleY:1}];for(s=1;s<=m.length;s++){var g=new cc.Node("reelBarNode.barElement"+s);g.position=cc.v3((s-f/2)*_,-E);var T=p.addImage(L.NG+"table_bar");T.setAnchorPoint(.5,0),g.addChild(T),d.push(g)}for(s=1;s<=d.length;s++)h.addChild(d[s-1]);h.position=cc.v3(t),p.setColorWithFather(h),h.linkNode=this.symbolLinkListTable.reelBar.addToHead(h),o.addChild(h,C.reelBar),p.setColorWithFather(n);var S=function(e){l.tableLeftEar.active=e,l.tableLeftEarText.active=e,l.tableRightEar.active=e,l.tableRightEarText.active=e};n.changeToFG=function(){};var b=[];return n.changeToBG=function(){for(var e=1;e<=2;e++){var t=p.addImage(L.BG+"table_bar_h");t.position=cc.v3(0,e*y-E),h.addChild(t),b.push(t)}S(!1)},n.changeToNG=function(){for(var e in b)b[e].removeFromParent();l.lantern.getComponent(sp.Skeleton).setAnimation(0,"ngdenglong",!0),S(!0)},n},t.prototype.shakeTable=function(e){var t=p.createShakeAction(this.frame,{duration:e,shakeRange:1,initPos:cc.v3(this.frame.getPosition())});cc.tween(this.frame).tag(54321).then(t).start();var o=p.createShakeAction(this.clipNode,{duration:e,shakeRange:1,initPos:cc.v3(this.clipNode.getPosition())});cc.tween(this.clipNode).tag(54321).then(o).start();var n=p.createShakeAction(this.unClipNode,{duration:e,shakeRange:1,initPos:cc.v3(this.clipNode.getPosition())});cc.tween(this.unClipNode).tag(54321).then(n).start()},t.prototype.createReelOrderList=function(e){var t=e,o=[];for(var n in v){var i=v[n];o[n]=i[(t-1)%i.length+1-1]}return o},t.prototype.getCellList=function(){return this.cellList},t.prototype.checkCellsInit=function(){if(G.default.QuickStartReelOrders){for(var e=!0,t=1;t<=f;t++){if(this.cellList[t-1].state==d.SpinReelState.Uninitialized){var o=G.default.QuickStartReelOrders[t-1];this.cellList[t-1].initReelPositions(o)}this.cellList[t-1].state!=d.SpinReelState.Idle&&(e=!1)}e&&this.stateChangeTo(d.SpinTableState.Idle),this.allSymbolUp()}},t.prototype.update=function(e){if(this.pauseUpdateFuncList.isEmpty()){for(var t=1;t<=this.cellList.length;t++)this.cellList[t-1].update(e);if(this.state!=d.SpinTableState.Uninitialized){var o=!0;if(c.THEME_GAME_TYPE.MAIN==G.default.theme.ctl.getGameType()){for(t=1;t<=this.cellList.length;t++)if(this.cellList[t-1].state!=d.SpinReelState.Idle){o=!1;break}}else if(c.THEME_GAME_TYPE.FREE==G.default.theme.ctl.getGameType()){for(t=1;t<=this.cellList.length;t++)if(this.cellList[t-1].state!=d.SpinReelState.Idle){o=!1;break}}else if(c.THEME_GAME_TYPE.BONUS==G.default.theme.ctl.getGameType())for(t=1;t<=this.cellList.length;t++)if(this.cellList[t-1].state!=d.SpinReelState.Idle){o=!1;break}o&&this.state==d.SpinTableState.Rolling?(this.stateChangeTo(d.SpinTableState.Idle),G.default.theme.gameLayer.expectEnd()):o||this.state!=d.SpinTableState.Idle||(this.stateChangeTo(d.SpinTableState.Rolling),O.default.getInstance().playNG_BGM());var n=this.unClipNode.children,i=[];n.forEach(function(e){var t=e.name,o=e.position;i.push([t,o])})}else this.checkCellsInit()}else this.pauseUpdateFuncList.deQueue()()},t.prototype.cleanForSpin=function(){for(var e in this.togetherStop=!1,this.getFirstStopReelDistance=null,this.highExpectColorBack=null,this.isForceStop=null,this.firstExpect=!0,this.SCExpectCount=0,this.scatterDropNum=0,this.scatterTotalDropNum=0,this.hasWheelSymbolState=[],this.hasTigerSymbolState=[],this.bgDownVoiceList=[],this.allDrop=!1,this.shouldPlayEffect=[],T)this.shouldPlayEffect[T[e]]=!1;this.shouldPlayEffect[T.default]=!0;for(var t=1;t<=this.cellList.length;t++)this.cellList[t-1].shouldPlayEffect=[],p.findElementInList([b.BG_NG,b.BG_FG,b.BG_MAP],G.default.theme.gameLayer.getGameTypePrivate())||(this.cellList[t-1].shouldPlayEffect[T.default]=!0);if(p.findElementInList([b.BG_NG,b.BG_FG,b.BG_MAP],G.default.theme.gameLayer.getGameTypePrivate()))for(e=1;e<=5;e++)for(var o=!1,n=1;n<=3;n++){var i=e+5*(n-1);this.cellList[i-1].notSpin||o||(this.cellList[i-1].shouldPlayEffect[T.default]=!0,o=!0)}for(this.shouldExpecting=!1,this.shouldExpectingCellList=[],this.hasSymbol=[],this.hasSymbolFromLeft=[],this.lastExpectReel=[],this.lastExpectReelIndex=0,t=1;t<=this.cellList.length;t++)this.shouldExpectingCellList[t-1]={};for(t=1;t<=this.cellList.length;t++){for(var e in this.hasSymbol[t-1]=[],this.hasSymbolFromLeft[t-1]=[],g){var a=g[e];this.hasSymbol[t-1][a]=0}this.cellList[t-1].stopDownFlag=[],this.cellList[t-1].performDownFlag=[]}for(var e in g)a=g[e],this.hasSymbolFromLeft[0][a]=0},t.prototype.createConfigTable=function(){for(var e,t=((e={})[9]=function(){return[g.scatter]},e[10]=function(){return[g.bg]},e),o=11;o<=34;o++)t[o]=function(){return[g.bg]};this.prepareConfig=t},t.prototype.prepareForExpecting=function(){var e={};for(var t in g)e[r=g[t]]=!0;for(var o=1;o<=this.cellList.length;o++){for(var n=1;n<=15;n++){var i=this.cellList[o-1].spinResult[n-1];if(i&&(this.cellList[o-1].notSpin||(p.findElementInList([11,12],i)?this.hasWheelSymbolState[o-1]=!0:13==i&&(this.hasTigerSymbolState[o-1]=!0)),this.prepareConfig[i])){var a=this.prepareConfig[i]();for(var t in a){var r=a[t];this.hasSymbol[o-1][r]=this.hasSymbol[o-1][r]+1}}}if(this.hasSymbolFromLeft[o+1-1])for(var t in g)(r=g[t])==g.bg?this.hasSymbolFromLeft[o+1-1][r]=this.hasSymbolFromLeft[o-1][r]+this.hasSymbol[o-1][r]:this.hasSymbolFromLeft[o+1-1][r]=this.hasSymbolFromLeft[o-1][r]+(this.hasSymbol[o-1][r]>0?1:0);G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.MAIN&&this.hasSymbolFromLeft[o-1][g.scatter]>=2&&p.findElementInList([4],o)&&(this.shouldExpectingCellList[o-1][S.scatter]=!0,this.lastExpectReel[S.scatter]=o,this.lastExpectReelIndex=o,this.shouldExpecting=!0),p.findElementInList([2,3,4],o)&&(this.hasSymbol[o-1][g.scatter]>0&&f-1+1-o+this.hasSymbolFromLeft[o-1][g.scatter]>=3?this.cellList[o-1].performDownFlag[g.scatter]=!0:e[g.scatter]&&(this.cellList[o-1].stopDownFlag[g.scatter]=!0,e[g.scatter]=!1)),p.findElementInList([b.BG_NG,b.BG_FG,b.BG_MAP],G.default.theme.gameLayer.getGameTypePrivate())?this.cellList[o-1].notSpin||this.hasSymbol[o-1][g.bg]>0&&(this.cellList[o-1].performDownFlag[g.bg]=!0):this.hasSymbol[o-1][g.bg]>0&&3*(f+1-o)+this.hasSymbolFromLeft[o-1][g.bg]>=6&&(this.cellList[o-1].performDownFlag[g.bg]=!0),this.cellList[o-1].performDownFlag[T.scatter]&&(this.cellList[o-1].shouldPlayEffect[T.scatter]=!0,this.cellList[o-1].shouldPlayEffect[T.default]=!1,this.shouldPlayEffect[T.scatter]=!0,this.scatterTotalDropNum=this.scatterTotalDropNum+1),p.findElementInList([b.BG_NG,b.BG_FG,b.BG_MAP],G.default.theme.gameLayer.getGameTypePrivate())||this.cellList[o-1].performDownFlag[T.bg]&&(this.cellList[o-1].shouldPlayEffect[T.bg]=!0,this.cellList[o-1].shouldPlayEffect[T.default]=!1,this.shouldPlayEffect[T.bg]=!0)}if(p.findElementInList([b.BG_NG,b.BG_FG,b.BG_MAP],G.default.theme.gameLayer.getGameTypePrivate()))for(o=1;o<=this.cellList.length;o++)if(this.cellList[o-1].performDownFlag[T.bg]&&!this.bgDownVoiceList[(o-1)%5+1-1]){this.bgDownVoiceList[(o-1)%5+1-1]=!0;var l=void 0,s=0;for(n=1;n<=3;n++){var u=(o-1)%5+1+5*(n-1);if(!this.cellList[u-1].notSpin){var h=1;this.hasTigerSymbolState[u-1]?h=3:this.hasWheelSymbolState[u-1]&&(h=2),s<h&&(s=h,l=u)}this.cellList[u-1].shouldPlayEffect[T.default]=!1}this.cellList[l-1].shouldPlayEffect[T.bg]=!0,this.shouldPlayEffect[T.bg]=!0}},t.prototype.spin=function(){if(this.state==d.SpinTableState.Idle||G.default.theme.gameLayer.isFakeSpinning){var e=0;if(c.THEME_GAME_TYPE.MAIN==G.default.theme.ctl.getGameType()){this.cleanForSpin(),G.default.theme.gameLayer.isFakeSpinning=!1;for(var t=1;t<=this.cellList.length;t++)this.cellList[t-1].spinResult=this.spinResult[t-1],this.cellList[t-1].rollingEndResult=this.rollingEndResult[t-1],"number"==typeof(s=this.preRollResult[t-1])&&(s=[s]),this.cellList[t-1].nextPreRollResult=s,this.cellList[t-1].coinIndex=(this.coinIndex||[])[t-1];if(this.prepareForExpecting(),1==(G.default.theme.gameLayer.spinLayer.spinResult.award_notice||0)){for(this.stopAllExpect(),t=1;t<=this.cellList.length;t++)e=this.durationFast,this.cellList[t-1].setDurationState1(e);this.togetherStop=!0}else if(G.default.theme.ctl.footer.getTurboStatus()){for(this.stopAllExpect(),t=1;t<=this.cellList.length;t++)e=this.durationFast,this.cellList[t-1].setDurationState1(e);this.togetherStop=!0}else{var o=0;for(t=1;t<=this.cellList.length;t++)if(1==t)e=this.durationState1Base_NG,this.cellList[t-1].setDurationState1(e),o+=this.durationState1Base_NG;else if(p.judgeList(this.shouldExpectingCellList[t-1],"or",!0)){var n=this.cellList[t-1].getExtraExpectTime();this.cellList[t-1].setDurationState1(o+this.reelFastEffectLength+n),o+=this.reelFastEffectLength}else this.cellList[t-1].setDurationState1(o+this.durationDiv),o+=this.durationDiv}}else if(c.THEME_GAME_TYPE.BONUS==G.default.theme.ctl.getGameType()){this.cleanForSpin(),G.default.theme.gameLayer.isFakeSpinning=!1;var i=[],a=[],r=0;for(t=1;t<=this.cellList.length;t++){var s;this.cellList[t-1].spinResult=this.spinResult[t-1],this.cellList[t-1].notSpin?a[t-1]=1:(r+=1,a[t-1]=0),this.cellList[t-1].rollingEndResult=this.rollingEndResult[t-1],"number"==typeof(s=this.preRollResult[t-1])&&(s=[s]),this.cellList[t-1].nextPreRollResult=s,this.cellList[t-1].coinIndex=(this.coinIndex||[])[t-1]}this.prepareForExpecting(),o=0;for(var u=!1,h=1;h<=5;h++){for(var m=!0,f=1;f<=3;f++)if(t=5*(f-1)+h,!this.cellList[t-1].notSpin){m=!1,1==r&&(i[h-1]=!0,this.cellList[t-1].expecting&&(u=!0));break}var _=0;for(m?1==h&&(_=o+this.durationState1Base_BG,o+=this.durationState1Base_BG):i[h-1]?(n=this.cellList[h-1].getExtraExpectTime(),u?(_=this.reelFastEffectLength+n,o=this.reelFastEffectLength):(_=o+this.reelFastEffectLength+n,o+=this.reelFastEffectLength)):1==h?(_=o+this.durationState1Base_BG,o+=this.durationState1Base_BG):(_=o+this.durationDiv,o+=this.durationDiv),f=1;f<=3;f++)0==a[(t=5*(f-1)+h)-1]&&p.between(this.spinResult[t-1][0],16,43)&&(r-=1),this.cellList[t-1].setDurationState1(_)}}l.default.addCallFunc(this.endSpinStartEffect,.6,this,this)}},t.prototype.stop=function(){if(this.state==d.SpinTableState.Rolling){if(l.default.clearGroup(this),this.isForceStop=!0,this.stopAllExpect(),c.THEME_GAME_TYPE.MAIN==G.default.theme.ctl.getGameType())for(var e=1;e<=this.cellList.length;e++)this.cellList[e-1].stop();else if(c.THEME_GAME_TYPE.FREE==G.default.theme.ctl.getGameType())for(e=1;e<=this.cellList.length;e++)this.cellList[e-1].stop();else if(c.THEME_GAME_TYPE.BONUS==G.default.theme.ctl.getGameType())for(e=1;e<=this.cellList.length;e++)this.cellList[e-1].stop();this.spinStartEffectEnded=!0,this.spinStopEffectEnded=!1,l.default.addCallFunc(this.endSpinStopEffect,.25,this,this)}},t.prototype.endSpinStartEffect=function(){this.spinStartEffectEnded=!0},t.prototype.endSpinStopEffect=function(){this.spinStopEffectEnded=!0},t.prototype.isRollingEffectFinished=function(){return this.spinStartEffectEnded&&this.spinStopEffectEnded},t.prototype.resetReelList=function(e){if(b.NG==e)for(var t=1;t<=this.cellList.length;t++)this.cellList[t-1].resetReelOrder(N.NG);else if(b.BG_NG==e)for(t=1;t<=this.cellList.length;t++)this.cellList[t-1].resetReelOrder(N.BG_NG);else if(b.BG_FG==e)for(t=1;t<=this.cellList.length;t++)this.cellList[t-1].resetReelOrder(N.BG_FG);else if(b.BG_MAP==e)for(t=1;t<=this.cellList.length;t++)this.cellList[t-1].resetReelOrder(N.BG_MAP)},t.prototype.saveTable=function(){for(var e=[],t=1;t<=this.cellList.length;t++)e[t-1]=[],this.cellList[t-1].saveReel(e[t-1]);this.tableStack.push(e)},t.prototype.loadTable=function(){for(var e=this.tableStack.pop(),t=1;t<=this.cellList.length;t++)this.cellList[t-1].loadReel(e[t-1]);this.allSymbolUp()},t.prototype.playNormalStopEffect=function(e){var t=this,o=e;if(t.shouldExpectingCellList[o+1-1]&&p.judgeList(t.shouldExpectingCellList[o+1-1],"or",!0)){G.default.theme.gameLayer.expectStart();var n=h.Common.s_sound.ReelFast;if(t.shouldExpectingCellList[o+1-1][S.scatter]){t.SCExpectCount=t.SCExpectCount+1,t.firstExpect&&(t.firstExpect=!1,Math.random()>.5&&p.playRandomVoice("SCExpect",[h.Common.s_sound.Ting1,h.Common.s_sound.Ting2])),t.cellList[o+1-1].performExpecting();for(var i=1;i<=o;i++)for(var a=t.cellList[i-1].getVisibleCellsIndexList(),r=1;r<=a.length;r++)(s=a[r-1]).checkSymbolType(w.sc)&&s.performSCExpect();cc.tween(t.node).delay(t.reelFastEffectLength).call(function(){if(t.cellList[o+1-1].stopExpecting(),o+1==t.lastExpectReelIndex&&G.default.theme.gameLayer.spinLayer.spinResult.free_game_trig,o+1==t.lastExpectReel[S.scatter]){G.default.theme.gameLayer.spinLayer.spinResult.free_game_trig,t.setSymbolColorNormal(.5,[w.high,w.low,w.wild,w.bg,"reelBack"]);for(var e=1;e<=o;e++)for(var n=t.cellList[e-1].getVisibleCellsIndexList(),i=1;i<=n.length;i++){var a=n[i-1];a.checkSymbolType(w.sc)&&a.stopPerformSCExpect()}}}).start()}else if(t.shouldExpectingCellList[o+1-1][S.bg]){t.firstExpect&&(t.firstExpect=!1);var l=[w.high,w.low,w.wild,w.sc,"reelBack"];for(1==(G.default.theme.gameLayer.spinLayer.spinResult.free_game_trig||0)&&(l=[w.high,w.low,w.wild,"reelBack"]),t.setSymbolColorGrey(.5,l),t.cellList[o+1-1].performBGExpecting(),i=1;i<=o;i++)for(a=t.cellList[i-1].getVisibleCellsIndexList(),r=1;r<=a.length;r++){var s;(s=a[r-1]).checkSymbolType(w.bg)&&s.performBGExpect()}cc.tween(t.node).delay(t.reelFastEffectLength).call(function(){if(t.cellList[o+1-1].stopBGExpecting(),o+1==t.lastExpectReelIndex&&t.hasSymbol[4][g.bg],o+1==t.lastExpectReel[S.bg]){t.hasSymbol[4][g.bg],t.setSymbolColorNormal(.5,l);for(var e=1;e<=o;e++)for(var n=t.cellList[e-1].getVisibleCellsIndexList(),i=1;i<=n.length;i++){var a=n[i-1];a.checkSymbolType(w.bg)&&a.stopPerformBGExpect()}}}).start()}var c=p.playEffect(n,!1);c&&cc.tween(t.node).delay(t.reelFastEffectLength).call(function(){cc.audioEngine.stopEffect(c)}).start()}},t.prototype.stopAllExpect=function(){for(var e in this.shouldExpectingCellList)this.shouldExpectingCellList[e]=!1},t.prototype.stateChangeTo=function(e){this.state=e},t.prototype.fakeSpin=function(){for(var e in G.default.theme.ctl.stopFadeMusicActionNode(),G.default.theme.gameLayer,this.countBar.deleteTip(),G.default.theme.gameLayer.isFakeSpinning=!0,this.downList)this.cleanDown(e);for(e=1;e<=this.cellList.length;e++)this.cellList[e-1].spin()},t.prototype.cleanDown=function(e){this.downList[e]=[]},t.prototype.registerDown=function(e,t){this.downList[e]||(this.downList[e]=[]),this.downList[e].push(t)},t.prototype.stopDown=function(e){if(this.downList[e])for(var t in this.downList[e])this.downList[e][t].stopDown(e)},t.prototype.checkFastStop=function(){return this.isForceStop||G.default.theme.ctl.footer.getTurboStatus()&&G.default.theme.ctl.getGameType()==c.THEME_GAME_TYPE.MAIN||1==(G.default.theme.gameLayer.spinLayer.spinResult.award_notice||0)},t.prototype.allSymbolUp=function(){for(var e in this.cellList)for(var t=this.cellList[e],o=1;o<=t.visibleCellNum;o++)t.conversionCells(o).symbolUp()},t.prototype.allSymbolDown=function(){for(var e in this.cellList)for(var t=this.cellList[e],o=1;o<=t.visibleCellNum;o++)t.conversionCells(o).symbolDown()},t.prototype.initResetFunc=function(){var e,t=this,o=((e={})[b.NG]=function(){for(var e in t.clipNode.active=!0,t.frame.active=!0,t.extraClipNodeList){var o=t.extraClipNodeList[e];p.checkNodeExist(o)&&o.removeFromParent()}for(t.extraClipNodeList=[],e=1;e<=f;e++){var n=G.default.RowNum,i=t.posX[e-1],a=t.centerY-E+n/2*y;t.cellList[e-1]=(new cc.Node).addComponent(I.default),t.cellList[e-1].init({visibleCellNum:n,reelOrderList:t.createReelOrderList(e),clipNode:t.clipNode,unClipNode:t.unClipNode,reelPosX:i,reelPosY:a,spinTable:t,symbolLinkListTable:t.symbolLinkListTable,reelIndex:e})}},e[b.BG_NG]=function(){for(var e=1;e<=3;e++){var o=_*f+50,n=y,i=(cc.v3(-o/2,0),cc.v3(o/2,0),cc.v3(o/2,n),cc.v3(-o/2,n),new u.default("BG_NG.extraClipNode1"));i.AddStencil(o,n*G.default.RowNum,cc.v3(t.centerX,t.centerY-E+(3-e)*G.default.RowNum*y+n/2)),t.node.addChild(i,1),t.extraClipNodeList[e-1]=i}var a=[],r=function(e){var o=G.default.RowNum,n=t.posX[(e-1)%t.posX.length+1-1],i=t.centerY-E+o/2*y+Math.floor((15-e)/5)*o*y,r=t.extraClipNodeList[Math.floor((e-1)/f)+1-1];if(a.push(function(){t.cellList[e-1]=(new cc.Node).addComponent(I.default),t.cellList[e-1].init({visibleCellNum:o,reelOrderList:t.createReelOrderList(e),clipNode:r,unClipNode:t.unClipNode,reelPosX:n,reelPosY:i,spinTable:t,symbolLinkListTable:t.symbolLinkListTable,reelIndex:e})}),1==a.length){for(var l=[],s=1;s<=a.length;s++)l[s-1]=a[s-1];a=[],t.pauseUpdateFuncList.enQueue(function(){for(var e=1;e<=l.length;e++)l[e-1]()})}};for(e=1;e<=3*f;e++)r(e);if(a.length>0){for(var l=[],s=1;s<=a.length;s++)l[s-1]=a[s-1];a=[],t.pauseUpdateFuncList.enQueue(function(){for(var e=1;e<=l.length;e++)l[e-1]()})}return!0},e[b.BG_FG]=function(){for(var e=1;e<=3;e++){var o=_*f+50,n=y,i=(cc.v3(-o/2,0),cc.v3(o/2,0),cc.v3(o/2,n),cc.v3(-o/2,n),new u.default("BG_FG.extraClipNode1"));i.AddStencil(o,n*G.default.RowNum,cc.v3(t.centerX,t.centerY-E+(3-e)*G.default.RowNum*y+n/2)),t.node.addChild(i,1),t.extraClipNodeList[e-1]=i}var a=[],r=function(e){var o=G.default.RowNum,n=t.posX[(e-1)%t.posX.length+1-1],i=t.centerY-E+o/2*y+Math.floor((15-e)/5)*o*y,r=t.extraClipNodeList[Math.floor((e-1)/f)+1-1];if(a.push(function(){t.cellList[e-1]=(new cc.Node).addComponent(I.default),t.cellList[e-1].init({visibleCellNum:o,reelOrderList:t.createReelOrderList(e),clipNode:r,unClipNode:t.unClipNode,reelPosX:n,reelPosY:i,spinTable:t,symbolLinkListTable:t.symbolLinkListTable,reelIndex:e})}),1==a.length){for(var l=[],s=1;s<=a.length;s++)l[s-1]=a[s-1];a=[],t.pauseUpdateFuncList.enQueue(function(){for(var e=1;e<=l.length;e++)l[e-1]()})}};for(e=1;e<=3*f;e++)r(e);if(a.length>0){for(var l=[],s=1;s<=a.length;s++)l[s-1]=a[s-1];a=[],t.pauseUpdateFuncList.enQueue(function(){for(var e=1;e<=l.length;e++)l[e-1]()})}return!0},e[b.BG_MAP]=function(){for(var e=1;e<=3;e++){var o=_*f+50,n=y,i=(cc.v3(-o/2,0),cc.v3(o/2,0),cc.v3(o/2,n),cc.v3(-o/2,n),new u.default("BG_MAP.extraClipNode1"));i.AddStencil(o,n*G.default.RowNum,cc.v3(t.centerX,t.centerY-E+(3-e)*G.default.RowNum*y+n/2)),t.node.addChild(i,1),t.extraClipNodeList[e-1]=i}var a=[],r=function(e){var o=G.default.RowNum,n=t.posX[(e-1)%t.posX.length+1-1],i=t.centerY-E+o/2*y+Math.floor((15-e)/5)*o*y,r=t.extraClipNodeList[Math.floor((e-1)/f)+1-1];if(a.push(function(){t.cellList[e-1]=(new cc.Node).addComponent(I.default),t.cellList[e-1].init({visibleCellNum:o,reelOrderList:t.createReelOrderList(e),clipNode:r,unClipNode:t.unClipNode,reelPosX:n,reelPosY:i,spinTable:t,symbolLinkListTable:t.symbolLinkListTable,reelIndex:e})}),1==a.length){for(var l=[],s=1;s<=a.length;s++)l[s-1]=a[s-1];a=[],t.pauseUpdateFuncList.enQueue(function(){for(var e=1;e<=l.length;e++)l[e-1]()})}};for(e=1;e<=3*f;e++)r(e);if(a.length>0){for(var l=[],s=1;s<=a.length;s++)l[s-1]=a[s-1];a=[],t.pauseUpdateFuncList.enQueue(function(){for(var e=1;e<=l.length;e++)l[e-1]()})}return!0},e);t.resetConfig=o},t.prototype.resetSpinTable=function(e){var t=this;t.resetConfig[e]&&(t.resetConfig[e](),t.pauseUpdateFuncList.enQueue(function(){t.resetReelList(e)}))},t.prototype.changeTableToFG=function(){},t.prototype.changeTableToBG=function(){for(var e=this,t=1;t<=e.cellList.length;t++)e.cellList[t-1].releaseSelf();e.cellList=[],e.frame.changeToBG(),e.countBar.changeToBG();var o=G.default.theme.gameLayer.getGameTypePrivate();e.resetSpinTable(o),e.pauseUpdateFuncList.enQueue(function(){for(var t=1;t<=5;t++)for(var o=1;o<=3;o++){var n=5*(o-1)+t,i=e.cellList[n-1],a=G.default.theme.gameLayer.spinLayer.effectLayer.spinResult.bg_init[t-1][o-1];p.between(a,15,30)||p.findElementInList([11,12,13,33,34],a)?(a=[a],i.initReelPositions(a),i.notSpin=!0):(a=[a],i.initReelPositions(a))}}),e.pauseUpdateFuncList.enQueue(function(){e.setSymbolColorGrey(0,[w.high,w.low,w.sc,w.wild,"reelBack"])}),e.pauseUpdateFuncList.enQueue(function(){e.allSymbolUp()}),e.pauseUpdateFuncList.enQueue(function(){e.checkBGExpect()})},t.prototype.changeTableToNG=function(){for(var e=1;e<=this.cellList.length;e++)this.cellList[e-1].releaseSelf();this.cellList=[];var t=G.default.theme.gameLayer.getGameTypePrivate();for(this.resetSpinTable(t),this.setSymbolColorNormal(0),this.frame.changeToNG(),this.countBar.changeToNG(),e=1;e<=this.cellList.length;e++){for(var o=this.cellList[e-1],n=[],i=1;i<=G.default.RowNum;i++)n[i-1]=1;for(o.initReelPositions(n),i=1-o.topLength;i<=o.realCellNum-o.topLength;i++)o.conversionCells(i).setSymbolVisible(!0)}},t.prototype.setTableColor=function(e,t,o,n){for(var i=[],a=1;a<=e.length;a++){var r=e[a-1];if("reelBar"==r){a-=1,e.splice(a,1);for(var l=this.symbolLinkListTable[r].getAllData(),s=1;s<=l.length;s++)i.push(l[s-1])}}for(a=1;a<=i.length;a++)p.setColorTo(i[a-1],o,n);for(var c=1;c<=this.cellList.length;c++)this.cellList[c-1].setReelColor(e,t,o,n)},t.prototype.setSymbolColorGrey=function(e,t){if(!t){for(var o in t=[],A)t.push(o);t.push("reelBack"),t.push("reelBar")}var n=t.slice(),i=P,a=P;this.setTableColor(n,i,a,e)},t.prototype.setSymbolColorNormal=function(e,t){if(void 0===t&&(t=null),!t){for(var o in t=[],A)t.push(o);t.push("reelBack"),t.push("reelBar")}var n=t.slice(),i=cc.color(255,255,255),a=cc.color(255,255,255);this.setTableColor(n,i,a,e)},t.prototype.setTableOpacity=function(e,t,o,n){for(var i=[],a=1;a<=e.length;a++){var r=e[a-1];if("reelBar"==r){a-=1,e.splice(a,1);for(var l=this.symbolLinkListTable[r].getAllData(),s=1;s<=l.length;s++)i.push(l[s-1])}}for(a=1;a<=i.length;a++)p.setOpacityTo(i[a-1],o,n);for(var c=1;c<=this.cellList.length;c++)this.cellList[c-1].setReelOpacity(e,t,o,n)},t.prototype.setSymbolFadeOut=function(e,t){if(!t){for(var o in t=[],A)t.push(o);t.push("reelBack"),t.push("reelBar")}var n=t.slice();this.setTableOpacity(n,0,0,e)},t.prototype.setSymbolFadeIn=function(e,t){if(!t){for(var o in t=[],A)t.push(o);t.push("reelBack"),t.push("reelBar")}var n=t.slice();this.setTableOpacity(n,255,255,e)},t.prototype.getTableCenterWorldPos=function(){var e=this.centerX,t=this.centerY-E+G.default.RowNum/2*y;return this.node.convertToWorldSpaceAR(cc.v3(e,t))},t.prototype.checkBGExpect=function(){var e=this;cc.Tween.stopAllByTag(12345),cc.tween(e.node).tag(12345).delay(0).call(function(){for(var t=[],o=0,n=!0,i=1;i<=e.cellList.length;i++){var a=e.cellList[i-1];if(!a.notSpin&&(t.push(a),(o+=1)>1)){n=!1;break}}if(n)for(var i in t)t[i].performBGNearWinExpect()}).start()},a([M],t)}(cc.Component);o.default=W,cc._RF.pop()},{"../Base/BetControl":"BetControl","../Base/Common_Base":"Common_Base","../Base/EventCenter":"EventCenter","../Base/ThemeControlNew":"ThemeControlNew","../Base/Tools":"Tools","../Components/ClippingNode":"ClippingNode","./Common":"Common","./Enum":"Enum","./Global":"Global","./GoldTiger":"GoldTiger","./MapPrizeNode":"MapPrizeNode","./MusicManager":"MusicManager","./SpinReel":"SpinReel"}],SpriteFrameSet:[function(e,t){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var o=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=o,cc._RF.pop()},{}],SymbolWheel:[function(e,t,o){"use strict";cc._RF.push(t,"a7dfajHMpFHkrLXCk43rmEm","SymbolWheel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base/Tools"),l=e("../Components/ClippingNode"),s=e("./Global"),c=s.Global.jpMultiTextScale,p=s.Global.jpName,u=s.Global.jpUpperScale,h=s.Global.performTimeList,d=s.Global.symbolUpperNumScale,m=s.Global.symbolUpperPosList,f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setIndex=null,t.multiplier=null,t}return i(t,e),t}(cc.Node)),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clipNode=null,t.scaleNode=null,t.slowSpeed=null,t.reelOrder=[],t.distanceY=null,t.showNum=null,t.upperNum=null,t.downNum=null,t.allNum=null,t.nowOrderIndex=null,t.realCellStablePosYList={},t.cellList=[],t.topSpriteIndex=0,t.result=null,t.resultFlag=!1,t.endFlag=!1,t.lastPositions=[],t.orgPositions=[],t}return i(t,e),t.prototype.init=function(e){var t=e.stencil,o=e.reelOrder,n=e.startPos||1,i=e.slowSpeed||30,a=e.distanceY||70;this.slowSpeed=i,this.reelOrder=o,this.distanceY=a,this.showNum=1,this.upperNum=2,this.downNum=2,this.allNum=this.upperNum+this.showNum+this.downNum,this.nowOrderIndex=n;var r=(this.showNum+this.upperNum+this.upperNum-1)/2;this.realCellStablePosYList={},this.clipNode=new l.default,this.clipNode.AddStencil(t.width,t.height,t.position,null,null,t.type,t.segments),this.node.addChild(this.clipNode),this.scaleNode=new cc.Node,this.clipNode.AddChild(this.scaleNode),this.cellList=[];for(var s=1;s<=this.allNum;s++)this.cellList[s]=this.createElement(),this.realCellStablePosYList[s-this.upperNum]=(r-(s-1))*this.distanceY,this.cellList[s].position=cc.v3(this.cellList[s].x,this.realCellStablePosYList[s-this.upperNum]),this.scaleNode.addChild(this.cellList[s]);for(this.topSpriteIndex=1,s=1;s<=this.showNum+this.downNum;s++)this.moveOrder(1);for(s=this.allNum-this.upperNum;s>=1-this.upperNum;s--){this.moveOrder(-1);var c=this.reelOrder[this.nowOrderIndex-1];this.conversionCells(s).setIndex(c)}},t.prototype.moveOrder=function(e){this.nowOrderIndex=(this.nowOrderIndex-1+e+this.reelOrder.length)%this.reelOrder.length+1},t.prototype.createElement=function(){var e=new y;return e.setIndex=function(t){if(e.removeAllChildren(),t>4){var o=r.createFont("symbol_num");o.string=r.num_2_str(t),o.node.scale=.8*d/.8,o.node.position=m.num.mul(.8),e.addChild(o.node),e.multiplier=t}else if(r.between(t,1,4)){var n=t,i=r.addImage(r.transPng("symbol_upper_"+p[n-1]));i.scale=.8*u,e.addChild(i),e.multiplier=t}else if(t<0){var a=-t,l=r.createFont("jp_multi");l.string="X"+a,l.node.scale=.8*c,e.addChild(l.node),e.multiplier=t}},e},t.prototype.conversionCells=function(e){return this.cellList[this.conversion(e+this.upperNum-1)]},t.prototype.conversion=function(e){return(this.topSpriteIndex+e-1+this.allNum)%this.allNum+1},t.prototype.loopCheck=function(e,t){for(var o=this.topSpriteIndex;t();){o=(o-1-1+this.allNum)%this.allNum+1;var n=this.cellList[o].position.y;if(!(n<this.realCellStablePosYList[this.allNum-this.upperNum]))break;n+=this.distanceY*this.allNum;var i=this.cellList[o].position;this.cellList[o].position=cc.v3(i.x,n),this.topSpriteIndex=o,e()}},t.prototype.setNewSymbolIndexFunc=function(){this.moveOrder(-1);var e=this.reelOrder[this.nowOrderIndex-1];this.conversionCells(1-this.upperNum).setIndex(e)},t.prototype.update=function(e){var t,o=this;if(o.resultFlag){if(o.endFlag){o.endFlag=!1;for(var n=1-o.upperNum;n<=o.allNum-o.upperNum;n++){var i=o.conversionCells(n).position;o.conversionCells(n).position=cc.v3(i.x,o.realCellStablePosYList[n])}}}else for(t=o.slowSpeed*e,n=1-o.upperNum;n<=o.allNum-o.upperNum;n++)i=o.conversionCells(n).position,o.conversionCells(n).position=cc.v3(i.x,i.y-t);o.loopCheck(function(){o.setNewSymbolIndexFunc()},function(){return!0})},t.prototype.performLockScale=function(){for(var e=this.allNum-this.upperNum;e>=1-this.upperNum;e--)this.conversionCells(e).multiplier==this.result?this.conversionCells(e).position=cc.v3(0,0):cc.tween(this.conversionCells(e)).to(0,{opacity:0}).start()},t.prototype.performLockScaleBack=function(){for(var e=this.allNum-this.upperNum;e>=1-this.upperNum;e--)this.conversionCells(e).multiplier==this.result||cc.tween(this.conversionCells(e)).delay(h.symbolWheelMultiJumpTime).to(0,{opacity:0}).start()},t.prototype.performResult=function(e,t){var o=this;if(o.resultFlag)r.showErrorPop("wheel spin twice");else{o.resultFlag=!0,o.result=e;var n=o.reelOrder.length*o.distanceY,i=Math.floor(o.slowSpeed*t*10/n),a=null;for(var l in console.log("performResult",e,o.reelOrder),o.reelOrder)o.reelOrder[l]==e&&(a=Number(l));null==a&&(a=1,r.showErrorPop("wheel error result="+e+" result_pool="+JSON.stringify(o.resultFlag)));var s=o.conversionCells(1-o.upperNum).position.y+(o.reelOrder.length+o.nowOrderIndex-a)*o.distanceY+i*n-o.distanceY/2-o.realCellStablePosYList[1]-2,c=function(e){var n=new cc.Node;o.orgPositions[e]=o.conversionCells(e).position.y,o.lastPositions[e]=0,n.position=o.conversionCells(e).position,o.node.addChild(n),cc.tween(n).by(t,{position:{value:cc.v3(0,-s),easing:"cubicInOut"}},{progress:function(t,n,i,a){return function(e,t){var n=cc.v3(0,t-o.lastPositions[e]);o.conversionCells(e).position=o.conversionCells(e).position.add(n),o.lastPositions[e]=t}.bind(o,e,n.y*a)(),i}}).removeSelf().start()};for(l=1;l<=o.allNum;l++)c(l);cc.tween(o).delay(t).call(function(){o.endFlag=!0}).start()}},a([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../Base/Tools":"Tools","../Components/ClippingNode":"ClippingNode","./Global":"Global"}],Test:[function(e,t,o){"use strict";cc._RF.push(t,"4feb2ymbHBJzI/uPLtpPeln","Test");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,l=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.origin=null,t.white=null,t.red=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this.red.parent.convertToWorldSpaceAR(new cc.Vec2(this.red.x,this.red.y));console.log(e),e=this.origin.convertToWorldSpaceAR(new cc.Vec2(this.red.x,this.red.y)),console.log(e);var t=this.red.parent.convertToNodeSpaceAR(new cc.Vec2(690,470));console.log(t)},a([s(cc.Node)],t.prototype,"origin",void 0),a([s(cc.Node)],t.prototype,"white",void 0),a([s(cc.Node)],t.prototype,"red",void 0),a([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],ThemeControlNew:[function(e,t,o){"use strict";cc._RF.push(t,"02a3f1tue5D7K35WM14/ovV","ThemeControlNew");var n,i,a,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),l=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.THEME_GAME_TYPE=o.THEME_CONTROL_STATUS_LIST=o.THEME_CONTROL_LOCK_LIST=void 0;var s=e("../Game/Enum"),c=e("../Game/GoldTiger"),p=e("../Game/MusicManager"),u=e("./BetControl"),h=e("./Common_Base"),d=e("./EventCenter"),m=e("./Footer"),f=e("./Header"),_=e("./ThemeWinNode"),y=e("./Tools"),g=e("./User"),T=e("../init"),S=e("./UserCoinNode"),E=e("../Common/DataManager"),b=e("../Common/NetTrans"),C=e("../Common/Help"),v=e("../Game/Common"),N=e("../Common/Popup");o.THEME_CONTROL_LOCK_LIST={ENTER_CMD:"enter_cmd",LOAD_RES:"load_res",CHECK_RES:"check_res",FUHAO_RES:"fuhao_res",COMMON_REWARD:"common_reward",NEW_USER_PRELOAD:"new_user_preload",COMMON_PRELOAD:"common_preload"},o.THEME_CONTROL_STATUS_LIST={LOADING:"loading",THEME:"theme"},o.THEME_GAME_TYPE={MAIN:0,FREE:1,BONUS:2,FREEBONUS:3,MAPFREE:4,MAPBONUS:5,SPECIAL:6};var L,B=!1,P=((i={})[111084]=!0,i[110070]=!0,i[110072]=!0,i[111071]=!0,i[111070]=!0,i[111069]=!0,i[110023]=!0,i[110066]=!0,i[110036]=!0,i[110039]=!0,i[111055]=!0,i[110024]=!0,i[111047]=!0,i[111051]=!0,i[111041]=!0,i[111029]=!0,i[111023]=!0,i[110015]=!0,i[110040]=!0,i[110041]=!0,i[110044]=!0,i[110045]=!0,i[110047]=!0,i[110032]=!0,i[110022]=!0,i[110014]=!0,i[111018]=!0,i[111050]=!0,i[110030]=!0,i[111024]=!0,i[110027]=!0,i[110001]=!0,i[110035]=!0,i[110034]=!0,i[110029]=!0,i[111033]=!0,i[110042]=!0,i[110046]=!0,i[111056]=!0,i[111053]=!0,i[111037]=!0,i[111049]=!0,i[111054]=!0,i[111034]=!0,i[110049]=!0,i[110043]=!0,i[111058]=!0,i[111060]=!0,i[110048]=!0,i[111059]=!0,i[111057]=!0,i[111063]=!0,i[110050]=!0,i[111061]=!0,i[111067]=!0,i[111062]=!0,i[111065]=!0,i[110051]=!0,i[110052]=!0,i[110053]=!0,i[110054]=!0,i[111066]=!0,i[111068]=!0,i[110076]=!0,i[110055]=!0,i[110057]=!0,i[110056]=!0,i[110058]=!0,i[110060]=!0,i[110059]=!0,i[110062]=!0,i[111080]=!0,i[111081]=!0,i[111073]=!0,i[111072]=!0,i[111075]=!0,i[110063]=!0,i[111074]=!0,i[111077]=!0,i[111076]=!0,i[110065]=!0,i[110064]=!0,i[110068]=!0,i[110067]=!0,i[111079]=!0,i[111078]=!0,i[110071]=!0,i[110073]=!0,i[110069]=!0,i[110075]=!0,i[110074]=!0,i[111082]=!0,i[111083]=!0,i[110077]=!0,i),A=((a={})[110039]=[3,!0],a[110041]=[3,!0],a[110045]=[5,!0],a[110030]=[4,!1],a[110047]=[5,!0],a[110046]=[3,!0],a[110042]=[4,!0],a[111059]=[4,!0],a[111063]=[3,!0],a[111065]=[4,!0],a[111062]=[5,!0],a[110060]=[4,!0],a[110065]=[3,!0],a),w={},G=cc._decorator,R=G.ccclass,O=G.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TimerCallGroupID="ThemeControlNew",t.theme=null,t.themeName=null,t.curScene=null,t.isMute=!1,t.prefBigWin=null,t.prefPopOut=null,t.header=null,t.nodeFooter=null,t.footer=null,t.nodeBetControl=null,t.betControl=null,t.help=null,t.m_BtnSoundOff=null,t.m_BtnSoundOn=null,t.m_BtnFullScreenOff=null,t.m_BtnFullScreenOn=null,t.fadeMusicActionNode=null,t.backoffMusicActionNode=null,t.fadeMusicActionList=[],t.fadeMusicState=null,t.m_BetChangeSounds=[],t.m_SoundFiles=[],t.spClick=null,t.freeReconnect=!1,t.reconnectFlag=!1,t._enterThemeData=null,t.needToFgChoice=!1,t.newUserQuestionnaireCanSpin=!1,t.cacheSpinRet=null,t.spinRequestTime=null,t.touchSpinTime=0,t.autoEnable=!1,t.autoSpin=!1,t.freespin=0,t.freeItem=null,t.spinCD=0,t.spinMinCD=0,t.maxLine=0,t.featureMul=0,t.jpInitData=null,t.outOfCoinsShowing=!1,t.touchSubBetTag=!1,t.touchAddBetTag=!1,t.esCapTouchBetBtnOnce=null,t.levelUpBonus=null,t.subBetRollingStart=!1,t.addBetRollingStart=!1,t.touchSpinTag=!1,t.autoSpinCheck=!1,t.wasMaxBet=null,t.headerLayerPos=null,t.headerLayerShowPos=null,t.headerLayerHidePos=null,t.footerLayerPos=null,t.footerLayerShowPos=null,t.footerLayerHidePos=null,t.themeGameType=o.THEME_GAME_TYPE.MAIN,t.curStatus="",t.spin_index=0,t.spinCounter=0,t.allrevenue=0,t.allcost=0,t.needEnterTheme=null,t.respList=null,t.receiveAll=null,t.get_bonus_reward_110038_temp=null,t}return r(t,e),t.prototype.onBackHome=function(){history.go(-1)},t.prototype.onHelp=function(){this.help.node.active=!0,p.default.getInstance().playEffect(v.Common.s_sound.AllButton,!1,!0)},t.prototype.onSoundOn=function(){p.default.getInstance().playEffect(v.Common.s_sound.AllButton,!1,!0),cc.audioEngine.setEffectsVolume(0),cc.audioEngine.setMusicVolume(0),this.m_BtnSoundOff.node.active=!0,this.m_BtnSoundOn.node.active=!1,this.isMute=!0},t.prototype.onSoundOff=function(){p.default.getInstance().playEffect(v.Common.s_sound.AllButton,!1,!0),cc.audioEngine.setEffectsVolume(1),cc.audioEngine.setMusicVolume(1),this.m_BtnSoundOff.node.active=!1,this.m_BtnSoundOn.node.active=!0,this.isMute=!1},t.prototype.setVolume=function(){cc.audioEngine.getEffectsVolume()>0?(this.m_BtnSoundOn.node.active=!0,this.m_BtnSoundOff.node.active=!1):(this.m_BtnSoundOn.node.active=!1,this.m_BtnSoundOff.node.active=!0)},t.prototype.updateFullScreen=function(){1==cc.screen.fullScreen()?(this.m_BtnFullScreenOff.node.active=!0,this.m_BtnFullScreenOn.node.active=!1):(this.m_BtnFullScreenOff.node.active=!1,this.m_BtnFullScreenOn.node.active=!0),cc.sys.isMobile&&(this.m_BtnFullScreenOff.node.active=!1,this.m_BtnFullScreenOn.node.active=!1)},t.prototype.onFullScreen=function(){var e=this;cc.screen.requestFullScreen(document.documentElement,function(){}),cc.tween(this.node).delay(.1).call(function(){return function(){this.updateFullScreen()}.bind(e)}).start()},t.prototype.offFullScreen=function(){var e=this;cc.screen.exitFullScreen(),cc.tween(this.node).delay(.1).call(function(){return function(){this.updateFullScreen()}.bind(e)}).start()},t.prototype.init=function(e,t){T.RELOAD_BACKEND_THEME_CONFIG_DATA(E.DataManager.getInstance().initialResponse),this.theme=e,this.themeName=e,this.setGameType(o.THEME_GAME_TYPE.MAIN),this.curScene=t,this.curStatus=null,this.header.init(!1,this),this.footer=this.nodeFooter.getComponent(m.default),this.footer.init(this),this.betControl=this.nodeBetControl.getComponent(u.default),this.needToFgChoice=!1,this.autoEnable=!1,this.spin_index=0,this.respList={},L=new h.PriorityQueue,h.default.addScheduleFunc(function(){},2,null,this),d.default.registerEvent(h.EVT.THEME.BTN_SPIN_STATE,this.updateSpinState,this),this.theme.setControl(this)},t.prototype.start=function(){this.onLoading(),this.setVolume()},t.prototype.onLoad=function(){this.onEnter(E.DataManager.getInstance().initialResponse),p.default.getInstance().loadSound(this.m_SoundFiles);var e=this;cc.game.on(cc.game.EVENT_HIDE,function(){}),cc.game.on(cc.game.EVENT_SHOW,function(){e.onFullScreen()}),cc.sys.isMobile&&(this.m_BtnFullScreenOff.node.active=!1,this.m_BtnFullScreenOn.node.active=!1)},t.prototype.onLoading=function(){this.curStatus=o.THEME_CONTROL_STATUS_LIST.LOADING,this.initPotpCmd(),this.showLoadingView(),this.checkFuHaoRes()},t.prototype.onLoading_2=function(e,t,o,n){void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===o&&(o=void 0),void 0===n&&(n=void 0),this.checkEnterTheme()},t.prototype.checkFuHaoRes=function(){},t.prototype.showLoadingView=function(){},t.prototype.hideLoadingView=function(){return 0},t.prototype.destruct=function(){},t.prototype.removeControlConfig=function(){this.spinCounter=0,this.allrevenue=0,this.allcost=0},t.prototype.onEnter=function(e){o.THEME_CONTROL_STATUS_LIST.THEME!=this.curStatus?(this._enterThemeData=e,this.initControlConfig(),this.needToFgChoice=!1,this.newUserQuestionnaireCanSpin=!0,this.checkEnterTheme()):this.betControl.checkBetValidity()},t.prototype.onEnterTheme=function(e){var t=this;t.header.userCoinNode=t.header.nodeUserCoin.getComponent(S.default),t.header.userCoinNode.init(!1,!1,!1),t.curStatus=o.THEME_CONTROL_STATUS_LIST.THEME,e.coins&&(g.default.getInstance().resetCoinsDeltaValue(),g.default.getInstance().setCoins(e.coins),t.saveThemeInfo(t.getThemeId(),e.coins)),t.maxLine=e.max_lines,t.featureMul=e.feature_bet_mul||0,t.initBetControl(),e.jp_base?t.jpInitData=e.jp_base:t.jpInitData=null,e&&e.enter_theme_info&&e.enter_theme_info.game_info_dict?t.theme&&(t.theme.saveBetChangeTable=e.enter_theme_info.game_info_dict,t.theme.saveBetTable={}):t.theme&&(t.theme.saveBetChangeTable={},t.theme.saveBetTable={}),t.theme.adjustTheme(e);var n=!1;if(t.theme.themeFreeType==h.THEME_FG_TYPE.STEP){var i=e.fg_info;if(i&&(i.fg_total_round&&i.fg_total_round>0||i.tg_total_round&&i.tg_total_round>0||i.fg_info_list&&i.fg_info_list.length>0||i.tg_info_list&&i.tg_info_list.length)&&(n=!0),e&&e.enter_theme_info){var a=e.enter_theme_info.reconnection_data;a&&a.fg_total_round&&a.fg_total_round>0&&(n=!0)}e&&e.enter_theme_info&&e.enter_theme_info.reconnection_data&&e.enter_theme_info.reconnection_data.reconnect_flag&&e.enter_theme_info.reconnection_data.reconnect_flag>0&&(n=!0),e&&e.enter_theme_info&&e.enter_theme_info.reconnection_data&&e.enter_theme_info.reconnection_data.feature_flag&&e.enter_theme_info.reconnection_data.feature_flag>0&&(n=!0)}t.reconnectFlag=n,t.reconnectFlag?t.footer.disableSpinAndOtherBtns():110038==t.getThemeId()?t.get_bonus_reward_110038_temp||(t.footer.enableSpin(),t.footer.enableOtherBtns()):t.theme.cancelEnableSpinAfterEnterTheme||t.footer.enableSpinAndOtherBtns(null,null,((t.theme||{}).gameLayer||{}).cancelEnableOtherBtns),t.footer.enableAuto(!1),t.footer.setLabelDescription("Intro");var r=0;r+=t.hideLoadingView(),h.default.addCallFunc(function(){c.default.theme.onShow()},.5+r,null,t),t.theme.gameLayer&&t.theme.gameLayer.jackpotLayer&&cc.tween(t.theme.gameLayer.jackpotLayer.node).delay(.25).call(function(){t.theme.gameLayer.jackpotLayer.onJpCmd({jp_value:[50*t.betControl.getCurTotalBet(),20*t.betControl.getCurTotalBet(),10*t.betControl.getCurTotalBet(),5*t.betControl.getCurTotalBet()]})}).delay(.25).call(function(){t.theme.gameLayer.jackpotLayer.onJpCmd({jp_value:[50*t.betControl.getCurTotalBet(),20*t.betControl.getCurTotalBet(),10*t.betControl.getCurTotalBet(),5*t.betControl.getCurTotalBet()]})}).start()},t.prototype.checkEnterTheme=function(){this._enterThemeData&&(this.needToFgChoice=1==this._enterThemeData.fg_choice,this.onEnterTheme(this._enterThemeData))},t.prototype.initControlConfig=function(){this.cacheSpinRet=null,this.spinRequestTime=null,this.touchSpinTime=0,this.spinCounter=0,this.allrevenue=0,this.allcost=0,this.autoSpin=!1,this.autoSpinCheck=!0,this.freespin=0,this.freeItem=null,this.spinCD=.3,this.spinMinCD=.15},t.prototype.updateSpinState=function(){},t.prototype.newUserPreload=function(){},t.prototype.adjustThemeJP=function(){if(this.theme&&this.theme.themeId&&P[this.theme.themeId]&&this.jpInitData){this.theme.jpInitData=this.jpInitData;var e=void 0;this.jpInitData&&this.jpInitData.length>0&&(this.jpInitData.length>=2?(e=this.getMathType(),e=Math.min(e,this.jpInitData.length)):e=1,((this.theme||{}).gameLayer||{}).jackpotLayer?this.theme.gameLayer.jackpotLayer.reset(this.jpInitData[e-1]):this.theme&&this.theme.gameLayer&&this.theme.gameLayer.spinLayer&&this.theme.gameLayer.spinLayer.spinTable&&this.theme.gameLayer.spinLayer.spinTable[0]&&this.theme.gameLayer.spinLayer.spinTable[0].jackpotLayer&&this.theme.gameLayer.spinLayer.spinTable[0].jackpotLayer.reset(this.jpInitData[e-1]))}},t.prototype.getMathType=function(){var e=this;if(!A[e.theme.themeId])return e.getCurBet()<u.default.getMinLargeBet()?1:2;var t=function(t,o){for(var n=A[e.theme.themeId][0],i=o;i>=o-(n-2);i--)if(e.getCurBet()>=t[i-1])return n-(o-i);return 1};return A[e.theme.themeId][0]<=6?A[e.theme.themeId][1]?t(window.GLOBAL_LEVEL_BET.five_bet_list_1,5):t(window.GLOBAL_LEVEL_BET.five_bet_list,5):1},t.prototype.adjustThemeInitTable=function(){if(this.theme&&w[this.theme.themeId])if(this.theme.saveBetChangeTable||(this.theme.saveBetChangeTable={}),this.theme.saveBetTable||(this.theme.saveBetTable={}),this.theme.saveBetChangeTable[this.getCurBet()]&&!this.reconnectFlag)this.theme.dealKeepAlive(this.theme.saveBetChangeTable[this.getCurBet()]);else{var e=this.getCurBet()||-1;this.theme.saveBetTable.splice(0,0,e),this.sendThemeChangeBetCmd()}},t.prototype.commonPreload=function(){},t.prototype.initBetControl=function(){this.betControl.init(this)},t.prototype.showNewUserMission=function(){},t.prototype.stopFadeMusicActionNode=function(){this.fadeMusicActionNode&&(this.fadeMusicActionNode.stopAllActions(),this.fadeMusicActionList=null,this.fadeMusicState=null),this.backoffMusicActionNode&&this.backoffMusicActionNode.stopAllActions()},t.prototype.pauseFadeMusic=function(){this.fadeMusicActionNode&&(this.fadeMusicActionNode.stopAllActions(),this.fadeMusicState="pause")},t.prototype.resumeFadeMusic=function(){var e=this;if("pause"==e.fadeMusicState&&y.next(e.fadeMusicActionList)&&e.fadeMusicActionNode){var t=cc.tween(),o=function(o){var n=e.fadeMusicActionList[o],i=cc.tween().call(function(){e.isMute||cc.audioEngine.setMusicVolume(n[1]),e.fadeMusicActionList&&e.fadeMusicActionList[0]&&e.fadeMusicActionList.splice(0,1)}),a=cc.tween().delay(n[0]);t.then(a),t.then(i)};for(var n in e.fadeMusicActionList)o(n);t.clone(e.fadeMusicActionNode).start()}},t.prototype.fadeLoopMusic=function(e,t,o,n){var i=this;null==i.fadeMusicActionNode&&(i.fadeMusicActionNode=new cc.Node,i.theme.node.addChild(i.fadeMusicActionNode)),n=n||0;var a=o||cc.audioEngine.getMusicVolume();if(!(a-n<.01&&a-n>-.01)){var r=t||1,l=cc.tween(),s=[],c=Math.floor(r/.1),p=a||0,u=(n-p)/c,h=e||0,d=cc.tween().delay(h);l.then(d);for(var m=function(e){var t=cc.tween().call(function(){i.isMute||cc.audioEngine.setMusicVolume(p+u*e),i.fadeMusicActionList&&i.fadeMusicActionList[0]&&i.fadeMusicActionList.splice(0,1)}),o=cc.tween().delay(.1);l.then(o),l.then(t),s.push([.1,p+u*e])},f=1;f<=c;f++)m(f);l.clone(i.fadeMusicActionNode).start(),i.fadeMusicState=null,i.fadeMusicActionList=s}},t.prototype.loopMusicBackoff=function(e,t){void 0===t&&(t=null);var o=this;t=t||0,o.backoffMusicActionNode||(o.backoffMusicActionNode=new cc.Node,o.theme.node.addChild(o.backoffMusicActionNode)),cc.tween(o.backoffMusicActionNode).delay(t).call(function(){o.fadeLoopMusic(0,.1,1,.2)}).delay(Math.max(e-.2,0)).call(function(){o.fadeLoopMusic(0,.1,.2,1)}).start()},t.prototype.getTotalWinNum=function(){return this.footer.getTotalWinNum()},t.prototype.getTotalWinNumValue=function(){return this.footer.getTotalWinNumValue()},t.prototype.getTotalWinNumEndValue=function(){return this.footer.getTotalWinNumEndValue()},t.prototype.getWinNodeWorldPosition=function(){return this.footer.getWinNodeWorldPosition()},t.prototype.getAutoStatus=function(){return 1==this.autoSpin},t.prototype.enableAuto=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null),this.autoEnable=e,(!e||this.toSpin())&&(this.autoSpin=e,this.footer.enableAuto(this.autoEnable),this.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW&&(this.themeName.gameLayer.spinLayer.autoAvailable=!1),!t&&e&&p.default.getInstance().playEffect(v.Common.s_sound.AutoSpin,!1))},t.prototype.turnOffAutoSpinCheck=function(){this.autoSpinCheck=!1},t.prototype.turnOnAutoSpinCheck=function(){this.autoSpinCheck=!0},t.prototype.touchSpinBtnBegan=function(){var e=this;e.outOfCoinsShowing=!1,e.touchSpinTag=!0,e.footer.hideAutoBoard(),e.autoSpinCheck&&!e.autoSpin&&e.footer.canToAutoSpin()&&(cc.Tween.stopAllByTag(666999),cc.tween(e.curScene).tag(666999).delay(.5).call(function(){(e.isThemeIdle()||e.isThemeWinLine())&&e.footer.showAutoBoard()}).start())},t.prototype.touchSpinBtnEnded=function(){if(null!=this.themeName&&this.touchSpinTag&&(cc.Tween.stopAllByTag(666999),this.touchSpinTag=!1,!this.footer.autoNode.node.active)){if(this.autoSpinCheck&&this.autoSpin)this.isSpinning()&&this.nowStop(),this.themeName.gameLayer&&this.themeName.gameLayer.spinLayer.effectLayer&&this.themeName.gameLayer.spinLayer.effectLayer.shouldLockSpin&&this.footer.disableSpin(),this.enableAuto(!1),this.footer.stopAuto();else if(this.isSpinning())this.nowStop();else{if(this.outOfCoinsShowing)return!1;this.toSpin(),this.theme.dealMusic_TouchBtnSpinMusic()}this.footer.showAutoCountBoard(!1)}},t.prototype.touchSpinBtnCanceled=function(){cc.Tween.stopAllByTag(666999),this.touchSpinTag=!1},t.prototype.touchSubBetBtnBegan=function(){var e=this;if((e.isNgOver()||e.isThemeWinLine())&&o.THEME_GAME_TYPE.MAIN==e.getGameType()&&e.isBetControlReady()&&e.theme.readyToChangeBet()){e.touchSubBetTag=!0;var t=e.getCurBet();e.footer.hideAutoBoard(),cc.Tween.stopAllByTag(787878),cc.tween(e.curScene).tag(787878).delay(.5).call(function(){e.isThemeIdle()&&e.getCurBet()==t&&e.footer.createUnClickLayer()}).start()}},t.prototype.touchSubBetBtnEnded=function(){null!=this.themeName&&(this.esCapTouchBetBtnOnce?this.esCapTouchBetBtnOnce=null:this.touchSubBetTag&&(cc.Tween.stopAllByTag(787878),this.touchSubBetTag=!1,this.subBetRollingStart?this.subBetRollingStart=!1:this.changeToDownBet()))},t.prototype.touchSubBetBtnCanceled=function(){this.esCapTouchBetBtnOnce=null,cc.Tween.stopAllByTag(787878),this.touchSubBetTag=!1,this.subBetRollingStart=!1},t.prototype.touchAddBetBtnBegan=function(){var e=this;if((e.isNgOver()||e.isThemeWinLine())&&o.THEME_GAME_TYPE.MAIN==e.getGameType()&&e.isBetControlReady()&&e.theme.readyToChangeBet()){e.touchAddBetTag=!0;var t=e.getCurBet();e.footer.hideAutoBoard(),cc.Tween.stopAllByTag(878787),cc.tween(e.curScene).tag(878787).delay(.5).call(function(){e.isThemeIdle()&&e.getCurBet()==t&&e.footer.createUnClickLayer()}).start()}},t.prototype.touchAddBetBtnEnded=function(){null!=this.themeName&&(this.esCapTouchBetBtnOnce?this.esCapTouchBetBtnOnce=null:this.touchAddBetTag&&(cc.Tween.stopAllByTag(878787),this.touchAddBetTag=!1,this.addBetRollingStart?this.addBetRollingStart=!1:this.changeToUpBet()))},t.prototype.touchAddBetBtnCanceled=function(){this.esCapTouchBetBtnOnce=null,cc.Tween.stopAllByTag(878787),this.touchAddBetTag=!1,this.addBetRollingStart=!1},t.prototype.setFooterStopBtn=function(){this.footer.setStopBtn()},t.prototype.setFooterSpinBtn=function(){this.footer.setSpinBtn()},t.prototype.setFooterAutoSpinBtn=function(){this.footer.setAutoSpinBtn()},t.prototype.setFGStopBtn=function(e){var t=this;e=e||.5,t.setFooterStopBtn(),t.disableStop(),cc.tween(t.curScene).delay(e).call(function(){t.enableStop()}).start()},t.prototype.setGameType=function(e){this.themeGameType=e},t.prototype.getGameType=function(){return this.themeGameType},t.prototype.isFakeSpinning=function(){return this.theme.themeBaseType==h.THEME_BASE_TYPE.NEW?this.theme.isFakeSpinning():this.themeName.gameLayer.isFakeSpinning},t.prototype.isSpinning=function(){return this.theme.themeBaseType==h.THEME_BASE_TYPE.NEW?!this.theme.isStopped||!this.theme.isStopped():this.themeName.gameLayer.spinLayer.state==s.SpinLayerState.Rolling},t.prototype.canSpin=function(){var e=this,t=[{msg:"isSpinning",func:function(t){return void 0===t&&(t=null),!e.isSpinning()}},{msg:"theme",func:e.theme.canSpin.bind(e.theme),funcSelf:e.theme}],o=!0,n=null;for(var i in t){var a=t[i];if(!(o=a.funcSelf?a.func(a.funcSelf):a.func())){n=a.msg;break}}return[o,n]},t.prototype.isThemeIdle=function(){return null==this.cacheSpinRet&&null==this.spinRequestTime&&!this.getAutoStatus()},t.prototype.isThemeWinLine=function(){var e,t=((e={})[111052]=!0,e[111050]=!0,e[111049]=!0,e[110032]=!0,e[111047]=!0,e[111046]=!0,e[110030]=!0,e[110028]=!0,e[110031]=!0,e[110021]=!0,e[111041]=!0,e[110015]=!0,e[110014]=!0,e[110001]=!0,e[111036]=!0,e[110023]=!0,e[100014]=!0,e[111018]=!0,e[111040]=!0,e[110027]=!0,e[110024]=!0,e[111037]=!0,e[111051]=!0,e[110019]=!0,e[111034]=!0,e[111022]=!0,e[111009]=!0,e[111053]=!0,e[110038]=!0,e[110036]=!0,e[110039]=!0,e[111054]=!0,e[100016]=!0,e[111055]=!0,e[100017]=!0,e[110044]=!0,e[110045]=!0,e[111059]=!0,e[110042]=!0,e[110041]=!0,e[111033]=!0,e[110046]=!0,e[110047]=!0,e[100021]=!0,e[100018]=!0,e[111056]=!0,e[110004]=!0,e[110007]=!0,e[110043]=!0,e[111058]=!0,e[110029]=!0,e[111060]=!0,e[110049]=!0,e[111057]=!0,e[110050]=!0,e[110048]=!0,e[111061]=!0,e[111063]=!0,e[110051]=!0,e[100020]=!0,e[111062]=!0,e[110052]=!0,e[110053]=!0,e[110054]=!0,e[111065]=!0,e[111066]=!0,e[111068]=!0,e[110056]=!0,e[111069]=!0,e[110057]=!0,e[111070]=!0,e[110058]=!0,e[111071]=!0,e[110059]=!0,e[110061]=!0,e[110060]=!0,e[111081]=!0,e[111072]=!0,e[110062]=!0,e[111074]=!0,e[110063]=!0,e[111075]=!0,e[111076]=!0,e[110064]=!0,e[111077]=!0,e[110066]=!0,e[110065]=!0,e[110067]=!0,e[111079]=!0,e[110071]=!0,e[110069]=!0,e[110073]=!0,e[110072]=!0,e[110070]=!0,e[110074]=!0,e[111084]=!0,e[111082]=!0,e[110075]=!0,e[111080]=!0,e[110077]=!0,e[111083]=!0,e[110076]=!0,e);if(this.theme.themeBaseType==h.THEME_BASE_TYPE.NEW)return!0;if((((this.theme||{}).gameLayer||{}).spinLayer||{}).effectLayer&&t[this.getThemeId()]){if(this.theme.gameLayer.spinLayer.effectLayer.state&&s.WinShowState&&s.WinShowState.SymbolLineAnimation&&(this.theme.gameLayer.spinLayer.effectLayer.state==s.WinShowState.SymbolLineAnimation||s.WinShowState.WinDelay&&this.theme.gameLayer.spinLayer.effectLayer.state==s.WinShowState.WinDelay))if(100014==this.getThemeId()){if(this.theme.gameLayer.spinLayer.effectLayer.AnimationEffectIdx==(this.theme.gameLayer.spinLayer.effectLayer.spinResult&&this.theme.gameLayer.spinLayer.effectLayer.spinResult.win_info_list.length))return!0}else{if(111083!=this.getThemeId())return!0;if(this.theme.gameLayer.spinLayer.effectLayer.winRemoveNumEnd==(this.theme.gameLayer.spinLayer.effectLayer.spinResult&&this.theme.gameLayer.spinLayer.effectLayer.spinResult.win_info_list.length))return!0}if(111037==this.getThemeId()&&this.theme.gameLayer.spinLayer.effectLayer.state==s.WinShowState.BgWin2)return!0}return!1},t.prototype.toSpin=function(){var e=this,t=e.canSpin(),o=t[0],n=t[1],i=L.isEmpty();if(o&&i&&e.spin())return null==e.spinCounter&&(e.spinCounter=0),e.spinCounter=e.spinCounter+1,e.spinCounter%5==0&&e.theme.unloadImgRes([]),e.footer.checkAutoSpin(),cc.tween(e.curScene).delay(.5).call(function(){e.footer.resetTotalWin()}).start(),!0;if(!e.isNgOver()||(o||"theme"==n||"isSpinning"==n)&&i){var a={infarction:i?n:"popupsQueue",is_auto:e.getAutoStatus(),theme_id:e.getThemeId()};return d.default.pushEvent(h.EVT.THEME.SPIN_STROKE,a),!1}e.ngPerformOverPopups(),h.default.addScheduleUntilFunc(function(){return!(0!=h.POPUP_STACK.getStackSize("ngPerformOver")||!L.isEmpty()&&(L.pop()[0](),1))},.05,null,"ngPerformOver_pop")},t.prototype.spin=function(){return this.touchSpinTime=Date.now(),!(this.isSpinning()&&!this.isFakeSpinning()||(this.ngPerformOver(),this.requestSpin(),this.footer.onSpinStart(this.autoEnable,this.footer.getTurboStatus()),h.POPUP_STACK.clearStack("ngPerformOver"),h.default.clearGroup("ngPerformOver_pop"),this.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW?this.theme.gameLayer.fakeSpin&&this.getCurTotalBet()<=g.default.getInstance().getCoins()&&(this.theme.fakeSpinUpdateJw(),this.theme.gameLayer.fakeSpin()):this.getCurTotalBet()<=g.default.getInstance().getCoins()&&this.theme.onSpinStart(),0))},t.prototype.cleanStatus=function(){this.cacheSpinRet=null,this.spinRequestTime=null},t.prototype.getSpinIndex=function(){return this.spin_index=this.spin_index%1e3+1,this.spin_index},t.prototype.requestSpin=function(){var e=this.getCurBet();this.betControl.checkBetValidity(),e=this.getCurBet();var t=this.footer&&this.footer.getTurboStatus(),o=this.getAutoStatus(),n={bet:e,bet_string:e+"",remotePrize:-1,game_type:0,spin_index:this.getSpinIndex(),is_quest:void 0,is_fast:t?1:0,is_auto:o?1:0};(this.theme||{}).themeId,b.NetTrans.sendGamePacket(h.BATCH_SPIN,n),this.spinRequestTime=Date.now(),d.default.pushEvent(h.EVT.THEME.SEND_BATCH_SPIN,{game_type:0,is_auto:o?1:0})},t.prototype.sendFreeGameChoiceCmd=function(e){this.touchSpinTime=Date.now();var t=this.getCurBet();t=this.getCurBet();var o=this.footer&&this.footer.getTurboStatus(),n=this.getAutoStatus(),i={bet:t,bet_string:t+"",lines:50,sf_choice:e,spin_index:this.getSpinIndex(),is_quest:void 0,is_fast:o?1:0,is_auto:n?1:0};b.NetTrans.sendGamePacket(h.BATCH_SPIN,i),this.spinRequestTime=Date.now()},t.prototype.sendFreeGameChoiceCmdTemp=function(e){b.NetTrans.sendGamePacket("theme_choice",{fg_choice:e})},t.prototype.requestFreeGameSpin=function(){this.touchSpinTime=Date.now();var e=this.getCurBet();e=this.getCurBet();var t=this.footer&&this.footer.getTurboStatus(),o=this.getAutoStatus(),n={bet:e,bet_string:e+"",lines:50,sf_choice:1,fg_step:1,game_type:1,spin_index:this.getSpinIndex(),is_quest:void 0,is_fast:t?1:0,is_auto:o?1:0};b.NetTrans.sendGamePacket(h.BATCH_SPIN,n),this.spinRequestTime=Date.now()},t.prototype.requestMapFreeGameSpin=function(){this.touchSpinTime=Date.now();var e=this.getCurBet();e=this.getCurBet();var t=this.footer&&this.footer.getTurboStatus(),o=this.getAutoStatus(),n={bet:e,bet_string:""+e,lines:50,sf_choice:1,fg_step:1,game_type:3,spin_index:this.getSpinIndex(),is_quest:void 0,is_fast:t?1:0,is_auto:o?1:0};b.NetTrans.sendGamePacket(h.BATCH_SPIN,n),this.spinRequestTime=Date.now()},t.prototype.requestBonusGameSpin=function(){this.touchSpinTime=Date.now();var e=this.getCurBet();e=this.getCurBet();var t=this.footer&&this.footer.getTurboStatus(),o=this.getAutoStatus(),n={bet:e,bet_string:""+e,lines:50,sf_choice:1,fg_step:1,game_type:2,spin_index:this.getSpinIndex(),is_quest:void 0,is_fast:t?1:0,is_auto:o?1:0};b.NetTrans.sendGamePacket(h.BATCH_SPIN,n),this.spinRequestTime=Date.now()},t.prototype.requestSpecialFreeGameSpin=function(){this.touchSpinTime=Date.now();var e=this.getCurBet();e=this.getCurBet();var t=this.footer&&this.footer.getTurboStatus(),o=this.getAutoStatus(),n={bet:e,bet_string:""+e,lines:50,sf_choice:2,spin_index:this.getSpinIndex(),is_quest:void 0,is_fast:t?1:0,is_auto:o?1:0};b.NetTrans.sendGamePacket(h.BATCH_SPIN,n),this.spinRequestTime=Date.now()},t.prototype.afterReconnect=function(e){this.isNgOver()?this.getAutoStatus()&&0==h.POPUP_STACK.getStackSize("ngPerformOver")?this.spin():this.isFakeSpinning()?this.spin():(this.spinRequestTime=null,((this.theme||{}).gameLayer||{}).cancelEnableSpinAfterReconnect||this.footer.enableSpinAndOtherBtns(!this.get_bonus_reward_110038_temp,!0,((this.theme||{}).gameLayer||{}).cancelEnableOtherBtns)):this.getGameType()==o.THEME_GAME_TYPE.FREE?this.theme.themeBaseType==h.THEME_BASE_TYPE.NEW&&this.isFakeSpinning()?this.theme.fgNetworkReconnect():this.theme.themeFreeType==h.THEME_FG_TYPE.STEP&&this.isFakeSpinning()&&this.theme.gameLayer.fgReconnectWithoutExit?this.theme.gameLayer.fgReconnectWithoutExit(e):this.theme.gameLayer&&this.theme.gameLayer.shouldChoice?(this.freeReconnect=!1,this.theme.gameLayer.fgReconnect()):(this.freeReconnect=!0,this.checkFreeGameResultCompleteness()):this.getGameType()==o.THEME_GAME_TYPE.BONUS||this.getGameType()==o.THEME_GAME_TYPE.FREEBONUS?this.theme.themeBonusType&&this.theme.themeBonusType==h.THEME_BG_TYPE.STEP&&this.isFakeSpinning()&&this.theme.gameLayer.bgReconnectWithoutExit(e):this.getGameType()==o.THEME_GAME_TYPE.MAPFREE?this.theme.themeFreeType==h.THEME_FG_TYPE.STEP&&this.isFakeSpinning()&&(this.theme.gameLayer.mapFgReconnectWithoutExit?this.theme.gameLayer.mapFgReconnectWithoutExit(e):this.theme.gameLayer.fgReconnectWithoutExit&&this.theme.gameLayer.fgReconnectWithoutExit(e)):this.getGameType()==o.THEME_GAME_TYPE.MAPBONUS&&this.theme.themeMapBonusType&&this.theme.themeMapBonusType==h.THEME_BG_TYPE.STEP&&this.isFakeSpinning()&&this.theme.gameLayer.mapBGReconnectWithoutExit&&this.theme.gameLayer.mapBGReconnectWithoutExit(e),d.default.pushEvent(h.EVT.SYSTEM.AFTER_THEME_RECONNECT,e)},t.prototype.dealRequestSpinResult=function(e){var t=this;if(t.reconnectFlag=null,d.default.pushEvent(h.EVT.THEME.BATCH_SPIN,e),t.needToFgChoice){var n=e.list[0];t.setCacheRet(n);var i=n.result.fg_total_win+g.default.getInstance().getCoinsDeltaValueForKey("SeparatelyCountedFgTotalWin");g.default.getInstance().setCoinsDeltaValueForKey(i,"SeparatelyCountedFgTotalWin",!1),g.default.getInstance().setCoins(t.cacheSpinRet.coins),t.theme.gameLayer.processFreeGameResult(n.result)}else if(t.isNgOver()){if(1==(n=e.list[0]).out_of_coins)return t.out_of_coins(),void t.cleanStatus();if(t.setCacheRet(n),t.deductUserCoins(),!n||!n.result)return void(t.getAutoStatus()?t.setFooterAutoSpinBtn():(t.spinRequestTime=null,t.footer.enableSpinAndOtherBtns(!t.get_bonus_reward_110038_temp,!0,((t.theme||{}).gameLayer||{}).cancelEnableOtherBtns)));t.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW&&t.theme.gameLayer.spinLayer.processSpinResult(n.result),1==n.result.ad_double_permission?(_.default.AD_FLAG=1,_.default.ad_bonus=n.result.ad_bonus,_.default.ad_popup_id=n.result.ad_popup_id):1==n.result.ad_fixed_permission?(_.default.AD_FLAG=2,_.default.ad_bonus=n.result.ad_bonus,_.default.ad_popup_id=n.result.ad_popup_id):_.default.AD_FLAG=null,n.result.jw_loot;var a=t.spinCD;t.autoSpin?t.setFooterAutoSpinBtn():(t.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW||t.footer.getTurboStatus())&&(t.footer.getTurboStatus()||t.theme.gameLayer.cancelEnableStop)||cc.tween(t.curScene).delay(a).call(function(){t.enableStop(),d.default.pushEvent(h.EVT.THEME.ON_CAN_STOP,{})}).start()}else if(t.theme.themeBonusType!=h.THEME_BG_TYPE.STEP||t.getGameType()!=o.THEME_GAME_TYPE.BONUS&&t.getGameType()!=o.THEME_GAME_TYPE.FREEBONUS)if(t.theme.themeMapBonusType&&t.theme.themeMapBonusType==h.THEME_BG_TYPE.STEP&&t.getGameType()==o.THEME_GAME_TYPE.MAPBONUS)_.default.AD_FLAG=null,n=e.list[0],t.setCacheRet(n),n.result.bg_total_win&&(n.result.bg_pre&&n.result.bg_pre>=1?(i=n.result.fg_total_win+g.default.getInstance().getCoinsDeltaValueForKey("SeparatelyCountedFgTotalWin"),n.result.bg_win_check&&(i+=n.result.bg_win_check),g.default.getInstance().setCoinsDeltaValueForKey(i,"SeparatelyCountedFgTotalWin",!1),g.default.getInstance().setCoins(t.cacheSpinRet.coins)):(l=n.result.bg_total_win+g.default.getInstance().getCoinsDeltaValueForKey("SeparatelyCountedBgTotalWin"),g.default.getInstance().setCoinsDeltaValueForKey(l,"SeparatelyCountedBgTotalWin",!1),g.default.getInstance().setCoins(t.cacheSpinRet.coins,!1))),t.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW&&t.theme.gameLayer.spinLayer.processSpinResult(n.result);else if(t.theme.themeFreeType==h.THEME_FG_TYPE.STEP){if(_.default.AD_FLAG=null,n=e.list[0],t.setCacheRet(n),n.result.fg_total_win&&(i=n.result.fg_total_win+g.default.getInstance().getCoinsDeltaValueForKey("SeparatelyCountedFgTotalWin"),n.result.bg_win_check&&(i+=n.result.bg_win_check),g.default.getInstance().setCoinsDeltaValueForKey(i,"SeparatelyCountedFgTotalWin",!1),g.default.getInstance().setCoins(t.cacheSpinRet.coins)),111019==t.theme.themeId&&t.getGameType()==o.THEME_GAME_TYPE.BONUS&&n.result.total_win){var r=n.result.total_win+g.default.getInstance().getCoinsDeltaValueForKey("SeparatelyCountedFgTotalWin");n.result.bg_win_check&&(r+=n.result.bg_win_check),g.default.getInstance().setCoinsDeltaValueForKey(r,"SeparatelyCountedFgTotalWin",!1),g.default.getInstance().setCoins(t.cacheSpinRet.coins)}(110008==t.theme.themeId||111013==t.theme.themeId)&&n.result&&n.result[0]&&n.result[0].fg_total_win&&(i=n.result[0].fg_total_win+g.default.getInstance().getCoinsDeltaValueForKey("SeparatelyCountedFgTotalWin"),g.default.getInstance().setCoinsDeltaValueForKey(i,"SeparatelyCountedFgTotalWin",!1),g.default.getInstance().setCoins(t.cacheSpinRet.coins)),t.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW&&t.theme.gameLayer.spinLayer.processSpinResult(n.result)}else _.default.AD_FLAG=null,n=e.list[0],t.setCacheRet(n),i=n.result.fg_total_win+g.default.getInstance().getCoinsDeltaValueForKey("SeparatelyCountedFgTotalWin"),n.result.bg_win_check&&(i+=n.result.bg_win_check),g.default.getInstance().setCoinsDeltaValueForKey(i,"SeparatelyCountedFgTotalWin",!1),g.default.getInstance().setCoins(t.cacheSpinRet.coins),t.theme.gameLayer.processFreeGameResult(n.result);else{_.default.AD_FLAG=null;n=e.list[0];if(t.setCacheRet(n),n.result.bg_total_win)if(n.result.bg_pre&&1==n.result.bg_pre){i=n.result.fg_total_win||0+g.default.getInstance().getCoinsDeltaValueForKey("SeparatelyCountedFgTotalWin");n.result.bg_win_check&&(i+=n.result.bg_win_check),g.default.getInstance().setCoinsDeltaValueForKey(i,"SeparatelyCountedFgTotalWin",!1),g.default.getInstance().setCoins(t.cacheSpinRet.coins)}else{var l=n.result.bg_total_win+g.default.getInstance().getCoinsDeltaValueForKey("SeparatelyCountedBgTotalWin");g.default.getInstance().setCoinsDeltaValueForKey(l,"SeparatelyCountedBgTotalWin",!1),g.default.getInstance().setCoins(t.cacheSpinRet.coins)}t.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW&&t.theme.gameLayer.spinLayer.processSpinResult(n.result)}t.needToFgChoice=!1},t.prototype.checkFreeGameResultCompleteness=function(){if(this.theme.gameLayer&&this.theme.gameLayer.freeGameTotalRound&&this.theme.gameLayer.currentFreeGameResultLength){var e=this.theme.gameLayer.currentFreeGameResultLength();this.theme.gameLayer.freeGameTotalRound>e?this.requestMoreFreeGameResult(e):this.freeReconnect=!1}else this.freeReconnect=!1},t.prototype.requestMoreFreeGameResult=function(e){b.NetTrans.sendGamePacket("get_free_game_result",{theme_id:this.getThemeId(),index:e})},t.prototype.setCacheRet=function(e){this.cacheSpinRet=e},t.prototype.deductUserCoins=function(){var e=g.default.getInstance().getCoins()-this.getCurTotalBet();101003==this.getThemeId()&&(e=g.default.getInstance().getCoins());var t=this.cacheSpinRet.coins-e;this.levelUpBonus&&101003!=this.getThemeId()&&(t-=this.levelUpBonus),g.default.getInstance().setCoinsDeltaValueForKey(t,"NgTotalWin",!1),g.default.getInstance().setCoins(this.cacheSpinRet.coins)},t.prototype.addUserExp=function(){},t.prototype.nowStop=function(){this.footer.onStop(),this.canStop()&&(this.onStop_at_firstTime(),this.onStop_at_afterTheme())},t.prototype.canStop=function(){return this.isSpinning()&&this.theme.canStop()},t.prototype.onStop_at_firstTime=function(){},t.prototype.onStop_at_afterTheme=function(){},t.prototype.reelsStopped=function(){this.theme.onAllReelStop()},t.prototype.ngPerformOverPopups=function(){},t.prototype.ngPerformOver=function(){var e=this;if(e.cacheSpinRet){e.receiveAll||console.error("not_receive_all_ngPerformOver",{}),e.betControl.checkBetValidity(),e.cleanStatus(),g.default.getInstance().setCoinsDeltaValueForKey(null,"NgTotalWin"),g.default.getInstance().setCoinsDeltaValueForKey(null,"SeparatelyCountedFgTotalWin"),g.default.getInstance().setCoinsDeltaValueForKey(null,"SeparatelyCountedBgTotalWin"),e.ngPerformOverPopups();var t=e.getAutoStatus();return e.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW&&e.theme.gameLayer.spinLayer.stateChangeTo(-2,!0),t?L.push(function(){e.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW&&e.theme.gameLayer.spinLayer.stateChangeTo(1,!0)},-999):e.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW&&e.theme.gameLayer.spinLayer.stateChangeTo(1,!0),h.POPUP_STACK.clearStack("ngPerformOver"),0==h.POPUP_STACK.getStackSize("ngPerformOver")?L.isEmpty()?(d.default.pushEvent(h.EVT.THEME.AFTER_NG_PERFORM_OVER),((e.theme||{}).gameLayer||{}).cancelEnableSpinAfterNGPerformOver||e.footer.enableSpinAndOtherBtns(!e.get_bonus_reward_110038_temp,e.theme.gameLayer&&!e.theme.gameLayer.ngPerformOverNotSpin,((e.theme||{}).gameLayer||{}).cancelEnableOtherBtns)):(L.pop()[0](),h.default.addScheduleUntilFunc(function(){return 0==h.POPUP_STACK.getStackSize("ngPerformOver")&&(L.isEmpty()?(d.default.pushEvent(h.EVT.THEME.AFTER_NG_PERFORM_OVER),((e.theme||{}).gameLayer||{}).cancelEnableSpinAfterNGPerformOver||e.footer.enableSpinAndOtherBtns(!e.get_bonus_reward_110038_temp,e.theme.gameLayer&&!e.theme.gameLayer.ngPerformOverNotSpin,((e.theme||{}).gameLayer||{}).cancelEnableOtherBtns),!0):(L.pop()[0](),!1))},.05,null,"ngPerformOver_pop")):h.default.addScheduleUntilFunc(function(){return 0==h.POPUP_STACK.getStackSize("ngPerformOver")&&(L.isEmpty()?(d.default.pushEvent(h.EVT.THEME.AFTER_NG_PERFORM_OVER),((e.theme||{}).gameLayer||{}).cancelEnableSpinAfterNGPerformOver||e.footer.enableSpinAndOtherBtns(!e.get_bonus_reward_110038_temp,e.theme.gameLayer&&!e.theme.gameLayer.ngPerformOverNotSpin,((e.theme||{}).gameLayer||{}).cancelEnableOtherBtns),!0):(L.pop()[0](),!1))},.05,null,"ngPerformOver_pop"),e.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW&&(e.theme.gameLayer.shouldRequestFreeGameChoice=!1),e.receiveAll=null,!0}return!1},t.prototype.isNgOver=function(){return null==this.cacheSpinRet},t.prototype.isAfterSpinPopupHeapEmpty=function(){return L.isEmpty()},t.prototype.bigWinOver=function(){},t.prototype.enableSpin=function(){this.footer.enableSpin()},t.prototype.disableSpin=function(){this.footer.disableSpin()},t.prototype.getSpinEnableState=function(){return this.footer.getSpinEnableState()},t.prototype.delayEnableSpin=function(e){this.footer.delayEnableSpin(e)},t.prototype.getOtherBtnsEnableState=function(){return this.footer.getOtherBtnsEnableState()},t.prototype.enableSpinAndOtherBtns=function(){this.footer.enableSpinAndOtherBtns()},t.prototype.disableSpinAndOtherBtns=function(){this.footer.disableSpinAndOtherBtns()},t.prototype.enableStop=function(){this.footer.enableStop()},t.prototype.disableStop=function(){this.footer.disableStop()},t.prototype.enableOtherBtns=function(){this.footer.enableOtherBtns(!0)},t.prototype.disableOtherBtns=function(){this.footer.enableOtherBtns(!1)},t.prototype.setTurboVisible=function(e){this.footer.setTurboVisible(e)},t.prototype.forceSetTurboStatus=function(e){this.footer.forceSetTurboStatus(e)},t.prototype.getThemeId=function(){return this.theme.themeid},t.prototype.getCurTheme=function(){return this.theme},t.prototype.setHeader=function(e){this.header!=e&&(this.header=e,this.theme.header=e)},t.prototype.getHeader=function(){return this.header},t.prototype.setFooter=function(e){this.footer!=e&&(this.footer=e,this.theme.footer=e)},t.prototype.getFooter=function(){return this.footer},t.prototype.hideHeaderFooter=function(){this.hideFooterForce(),this.hideHeaderForce()},t.prototype.hideFooterForce=function(){this.footer.hide()},t.prototype.hideHeaderForce=function(){this.header.hide()},t.prototype.showHeaderFooter=function(){this.showFooterForce(),this.showHeaderForce()},t.prototype.showFooterForce=function(){this.footer.show()},t.prototype.showHeaderForce=function(){this.header.show()},t.prototype.showJackpotBetDialog=function(){},t.prototype.checkForceEnableToLobby=function(){return this.theme&&this.theme.isStuck()},t.prototype.isBetControlReady=function(){return null!=this.betControl},t.prototype.getUserLevel=function(){return 0},t.prototype.getCurBetBase=function(){return this.isBetControlReady()?this.betControl.getCurBetBase():null},t.prototype.getCurFakeBetBase=function(){return this.isBetControlReady()?this.betControl.getCurFakeBetBase():null},t.prototype.getCurBet=function(){return this.isBetControlReady()?this.betControl.getCurBet():null},t.prototype.getCurTotalBet=function(){return this.isBetControlReady()?this.betControl.getCurTotalBet():null},t.prototype.checkIsMaxBet=function(){return this.isBetControlReady()?this.betControl.checkIsMaxBet():null},t.prototype.checkIsMinBet=function(){return this.isBetControlReady()?this.betControl.checkIsMinBet():null},t.prototype.changeToUpBet=function(){return!this.isNgOver()&&!this.isThemeWinLine()||o.THEME_GAME_TYPE.MAIN!=this.getGameType()?null:this.isBetControlReady()?this.betControl.changeToUpBet():null},t.prototype.changeToDownBet=function(){return!this.isNgOver()&&!this.isThemeWinLine()||o.THEME_GAME_TYPE.MAIN!=this.getGameType()?null:this.isBetControlReady()?this.betControl.changeToDownBet():null},t.prototype.changeToMaxBet=function(){return!this.isNgOver()&&!this.isThemeWinLine()||o.THEME_GAME_TYPE.MAIN!=this.getGameType()?null:this.isBetControlReady()?this.betControl.setMaxBet():null},t.prototype.fakeChangeToDesignatedBet=function(e){if(!this.isBetControlReady())return null;this.footer.setBetInfo(e)},t.prototype.betChanged=function(){this.footer.checkFlameBetTip(),this.footer.changedBet||this.updateBetRange(!0),this.checkSendThemeChangeBetCmd(),this.adjustThemeJP(),this.adjustThemeInitTable(),this.theme.themeBaseType!=h.THEME_BASE_TYPE.NEW?(((this.theme||{}).gameLayer||{}).spinLayer||{}).effectLayer&&this.theme.gameLayer.spinLayer.stopShow&&this.theme.gameLayer.spinLayer.stopShow(!0):this.theme.stopLinePerform&&this.theme.stopLinePerform(),this.theme.dealAboutBetChange(),d.default.pushEvent(h.EVT.SYSTEM.BET_CHANGE),this.theme.gameLayer&&this.theme.gameLayer.jackpotLayer&&this.theme.gameLayer.jackpotLayer.onJpCmd({jp_value:[50*this.betControl.getCurTotalBet(),20*this.betControl.getCurTotalBet(),10*this.betControl.getCurTotalBet(),5*this.betControl.getCurTotalBet()]})},t.prototype.updateBetRange=function(e){var t=this.checkIsMaxBet(),o=this.checkIsMinBet();t?this.wasMaxBet||(this.wasMaxBet=!0,this.footer.addMaxBetFlash()):(this.wasMaxBet=!1,this.footer&&this.footer.tipTotalBetSprite&&y.setTexture(this.footer.tipTotalBetSprite,h.translateImage("footer/label_bet_total"))),this.footer.setMaxBetState(t),e?(this.footer.setMaxBetBtnEnable(!t),this.footer.setMinBetBtnEnable(!o)):(this.footer.maxBetTag=!t,this.footer.minBetTag=!o);var n=this.getCurTotalBet();this.footer.setBetInfo(n)},t.prototype.checkSendThemeChangeBetCmd=function(){T.THEME_CONFIG_LIST[this.getThemeId()].ROOM_LOGIC&&this.sendThemeChangeBetCmd()},t.prototype.sendThemeChangeBetCmd=function(){var e=this.getCurBet(),t=this.theme&&this.theme.mathType&&this.theme.mathType||(u.default.getMinLargeBet(),1);b.NetTrans.sendGamePacket("theme_change_bet",{theme_id:this.getThemeId(),bet:e,math_type:t})},t.prototype.checkShowClubPointBetTip=function(){},t.prototype.checkJourneyLock=function(){},t.prototype.ConnectLost=function(){},t.prototype.registerCmd=function(e){b.NetTrans.registerCmd(e,this.oncmd.bind(this),this)},t.prototype.getCmds=function(){return["behavior",h.BATCH_SPIN,"batch_spin_act_a","batch_spin_act_b","batch_spin_act_c","batch_spin_cm","batch_spin_sys","batch_spin_sys_1","batch_spin_level_up","batch_spin_new_user_mission","batch_spin_9","batch_spin_10",h.THEME_JP_CMD,"get_free_game_result","theme_change_bet","wild_africa_shop_spin","chili_kingdom_shop_spin","fulushouxi_shop_spin","dafushow_spin_multi","captainjackpot_shop_spin","farm_market_map_spin","antarctic_penguin_map_spin","aliceadventures_map_multi","get_spin_result","dafu_classic_4_choice","dafu_classic_2_choice","loveforever_map_multi","get_chocolate_map","mulan_shop_spin","daily_mission_extend","get_alienbuster_map","theme_choice","collect_spin_free_coins","choose_AT_little_green_3","slot_choose_room_110038","get_user_info_110038","slot_leave_room_110038","slot_update_table_info_110038","get_bonus_reward_110038","slot_big_win_110038","get_simple_user_info_110038","get_all_info_110038","happyeaster_spin_multi","ninja_get_points_list"]},t.prototype.initPotpCmd=function(){var e=this.getCmds();for(var t in e){var o=e[t];this.registerCmd(o)}},t.prototype.unregisterPotpCmds=function(){var e=this.getCmds();for(var t in e){var o=e[t];b.NetTrans.unregisterCmd(o)}},t.prototype.dealWithThemeActivity=function(){},t.prototype.dealWithRaffleCollect=function(){},t.prototype.dealWithThemeShopCollect=function(){},t.prototype.oncmd=function(e,t){var o=this;if("behavior"==e)o.footer.changedBet&&o.updateBetRange(!0),o.footer.changedBet=!1;else if(e==h.BATCH_SPIN){if(1==t.need_enter_theme)return void(o.needEnterTheme=!0);if(o.needEnterTheme=null,o.respList={},t.resp_list&&y.next(t.resp_list))for(var n in t.resp_list.length,t.resp_list){var i=t.resp_list[n];o.respList[i]=!0}o.dealRequestSpinResult(t),h.default.addScheduleUntilFunc(function(){return!y.next(o.respList)&&(o.receiveAll=!0,!0)},.01,null,o)}else if("batch_spin_9"==e){if(o.needEnterTheme)return;o.respList.batch_spin_9=null;var a=(t.list||[])[0];T.RELOAD_BACKEND_THEME_CONFIG_DATA(a),d.default.pushEvent(h.EVT.EVT_SPIN_UPDATE_FIVE_BET)}else if("batch_spin_sys_1"==e){if(o.needEnterTheme)return;o.respList.batch_spin_sys_1=null,a=void 0,t&&t.list&&(a=t.list[0]),a&&(o.dealWithTrophyData(a.trophy),o.dealWithBadgeData(a.trophy_v2,a.trophy_pick_v2,a.at_trophy_v2),o.dealWithMedalRush(a.trophy_challenge),o.dealWithMedalStampBingo(a.trophy_v2),o.dealWithMedalMadness(a.trophy_v2),h.default.addCallFunc(function(){111020==this.theme.themeId||110029==this.theme.themeId||this.updateBetRange(!1)},.1,o,o)),o.setBoostedWinData(t)}else if("theme_change_bet"==e)t.game_info&&o.theme.dealKeepAlive(t.game_info,!0);else if("theme_choice"==e){if(t.err_msg)return;o.setBoostedWinData(t),o.theme.themeBaseType==h.THEME_BASE_TYPE.NEW?o.theme.processThemeChoiceResult(t):101003==o.theme.themeId||o.theme.gameLayer.processThemeChoiceResult(t),o.dealWithThemeActivity(t),o.dealWithTrophyData(t.trophy),o.dealWithBadgeData(t.trophy_v2,t.trophy_pick_v2,t.at_trophy_v2),o.dealWithMedalRush(t.trophy_challenge),o.dealWithMedalStampBingo(t.trophy_v2),o.dealWithMedalMadness(t.trophy_v2),o.dealWithThemeShopCollect(t)}},t.prototype.dealWithMedalRush=function(){},t.prototype.dealWithMedalMadness=function(){},t.prototype.dealWithMedalStampBingo=function(){},t.prototype.dealWithBadgeData=function(){},t.prototype.dealWithTrophyData=function(){},t.prototype.sendThemeJpCmd=function(){this.getCurBet(),this.theme&&this.theme.mathType&&this.theme.mathType||u.default.getMinLargeBet(),this.getThemeId(),this.getCurBet()},t.prototype.updateSGAdReward=function(){},t.prototype.updateAdReward=function(){},t.prototype.preloadBWImgRes=function(){_.default.loadEffects(),this.theme.preloadImgResAsync(_.default.getPreloadRes().manual,function(){B=!0})},t.prototype.unloadBWImgRes=function(){this.theme.unloadImgRes(_.default.getPreloadRes().manual),this.theme.unloadImgRes(_.default.getPreloadRes().auto),B=!1},t.prototype.performBigWin=function(e,t,o,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var a=this;i=i||0,h.default.addScheduleUntilFunc(function(){var r;if(r=null==n||n(),B&&r){var l=cc.instantiate(a.prefBigWin);return cc.director.getScene().getChildByName("Canvas").addChild(l,1e4),l.getComponent(_.default).init(e,t,function(){o&&o(),a.unloadBWImgRes()},i),!0}return!1},.1,null,a)},t.prototype.out_of_coins=function(){this.enableAuto(!1),this.footer.enableSpinAndOtherBtns(!this.get_bonus_reward_110038_temp,!0,((this.theme||{}).gameLayer||{}).cancelEnableOtherBtns),this.outOfCoinsShowing=!0;var e=cc.instantiate(this.prefPopOut);cc.director.getScene().getChildByName("Canvas").addChild(e,1e4),e.getComponent(N.default).show("There is no credit, please deposit!")},t.prototype.saveThemeInfo=function(){},t.prototype.refreshLanguage=function(){this.theme.refreshLanguage(),this.theme.jwLootRefreshLanguage&&this.theme.jwLootRefreshLanguage()},t.prototype.changeLanguage=function(){},t.prototype.hideThemeActivityNode=function(e){void 0===e&&(e=null)},t.prototype.showThemeActivityNode=function(){},t.prototype.hideFooter=function(){this.footer&&(this.footerLayerPos=this.footer.node.position,this.footerLayerHidePos=cc.v3(this.footerLayerPos.x,this.footerLayerPos.y-600),cc.tween(this.footer.node).to(.5,{position:this.footerLayerHidePos}).start())},t.prototype.showFooter=function(){this.footer&&(this.footerLayerPos=this.footer.node.position,this.footerLayerShowPos=cc.v3(this.footerLayerPos.x,this.footerLayerPos.y+600),cc.tween(this.footer.node).to(.5,{position:this.footerLayerShowPos}).start())},t.prototype.hideHeader=function(){this.header&&(this.headerLayerPos=this.header.node.position,this.headerLayerHidePos=cc.v3(this.headerLayerPos.x,this.headerLayerPos.y+200),cc.tween(this.header.node).to(.5,{position:this.headerLayerHidePos}).start())},t.prototype.showHeader=function(){this.header&&(this.headerLayerPos=this.header.node.position,this.headerLayerShowPos=cc.v3(this.headerLayerPos.x,this.headerLayerPos.y-200),cc.tween(this.header.node).to(.5,{position:this.headerLayerShowPos}).start())},t.prototype.judgeCanReturnToLobby=function(){return!0},t.prototype.setBoostedWinData=function(){},t.prototype.getJwLootData=function(){return null},t.prototype.updateJwLootDataInFakeSpin=function(){},t.prototype.getOldJwLootData=function(){return null},t.prototype.performDoublePrizeComplete=function(){},t.prototype.playBetSound=function(e){e>=0?cc.audioEngine.playEffect(this.m_BetChangeSounds[e],!1):cc.audioEngine.playEffect(this.m_BetChangeSounds[this.m_BetChangeSounds.length-1],!1)},t.themeInitTable=w,l([O(cc.Prefab)],t.prototype,"prefBigWin",void 0),l([O(cc.Prefab)],t.prototype,"prefPopOut",void 0),l([O(f.default)],t.prototype,"header",void 0),l([O(cc.Node)],t.prototype,"nodeFooter",void 0),l([O(cc.Node)],t.prototype,"nodeBetControl",void 0),l([O(C.default)],t.prototype,"help",void 0),l([O(cc.Button)],t.prototype,"m_BtnSoundOff",void 0),l([O(cc.Button)],t.prototype,"m_BtnSoundOn",void 0),l([O(cc.Button)],t.prototype,"m_BtnFullScreenOff",void 0),l([O(cc.Button)],t.prototype,"m_BtnFullScreenOn",void 0),l([O(cc.Node)],t.prototype,"fadeMusicActionNode",void 0),l([O(cc.Node)],t.prototype,"backoffMusicActionNode",void 0),l([O(cc.AudioClip)],t.prototype,"m_BetChangeSounds",void 0),l([O(cc.AudioClip)],t.prototype,"m_SoundFiles",void 0),l([R],t)}(cc.Component);o.default=I,cc._RF.pop()},{"../Common/DataManager":"DataManager","../Common/Help":"Help","../Common/NetTrans":"NetTrans","../Common/Popup":"Popup","../Game/Common":"Common","../Game/Enum":"Enum","../Game/GoldTiger":"GoldTiger","../Game/MusicManager":"MusicManager","../init":"init","./BetControl":"BetControl","./Common_Base":"Common_Base","./EventCenter":"EventCenter","./Footer":"Footer","./Header":"Header","./ThemeWinNode":"ThemeWinNode","./Tools":"Tools","./User":"User","./UserCoinNode":"UserCoinNode"}],ThemeNew:[function(e,t,o){"use strict";cc._RF.push(t,"d9d09RMPRJMlZM4tTKKe/DC","ThemeNew");var n,i,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.CNT_IN_THEMECNT=void 0;var l=e("../Game/Enum"),s=e("./Common_Base"),c=e("./EventCenter"),p=e("../init"),u=e("./ThemeControlNew"),h=e("./Tools"),d=cc._decorator,m=d.ccclass;d.property,(i={})[111002]=!0,i[111011]=!0,i[111013]=!0,i[111015]=!0,o.CNT_IN_THEMECNT=0;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TimerCallGroupID="ThemeNew",t.ctl=null,t.curScene=null,t.gameLayer=null,t.ClassName=null,t.header=null,t.footer=null,t.themeId=110059,t.themeMapBonusType=void 0,t.themeid=0,t.recordList={},t.spinLayerLongTimeIdleFlag=!1,t.jw_listen=null,t.playGame=!1,t.hintMusicCnt=0,t.playNormalLoopMusic=!1,t._needClearScreen=!1,t._eventOnCheckSymbolJwLoot=null,t._eventOnJwIndexListChange=null,t._eventOnChangeSymbolJwLoot=null,t._eventOnCheckJwLootNgPerformOver=null,t._eventOnShowJwSymbolDown=null,t._eventOnShowJwReelSymbolDown=null,t._eventOnRefreshJwLanguage=null,t._eventOnUpdateJw=null,t._eventOnFakeSpinUpdateJw=null,t._eventOnReceiveBatchSpin=null,t._eventOnSpinStroke=null,t._eventOnEnterForeground=null,t._eventOnEnterBackground=null,t.saveBetChangeTable=null,t.saveBetTable=null,t.jpInitData=null,t}return a(t,e),t.prototype.onLoad=function(){cc.Tween.stopAllByTag(999),this.initGameLayer(),this.startFPSRecord(),s.default.addCallFunc(this.stopFPSRecord,60,this,this)},t.prototype.init=function(e){this.themeid=e||0,o.CNT_IN_THEMECNT=o.CNT_IN_THEMECNT+1,this.themeFreeType=s.THEME_FG_TYPE.NORMAL,this.recordList={},this._initEvent()},t.prototype._initEvent=function(){c.default.registerEvent(s.EVT.JW_LOOT.JW_LOOT_CHECK_SYMBOL,this._checkSymbolJwLoot,this),c.default.registerEvent(s.EVT.JW_LOOT.JW_LOOT_CHANGE_LIST_INDEX,this._changeJwListIndex,this),c.default.registerEvent(s.EVT.JW_LOOT.JW_LOOT_CHANGE_SYMBOL,this._changeSymbolJwLoot,this),c.default.registerEvent(s.EVT.JW_LOOT.JW_LOOT_REEL_SYMBOL_DOWN,this._showJwReelSymbolDown,this),c.default.registerEvent(s.EVT.THEME.SEND_BATCH_SPIN,this._onSendBatchSpin,this),c.default.registerEvent(s.EVT.THEME.BATCH_SPIN,this._onReceiveBatchSpin,this),c.default.registerEvent(s.EVT.THEME.ON_CAN_STOP,this._onCanStop,this),c.default.registerEvent(s.EVT.THEME.SPIN_STROKE,this._onSpinStroke,this),c.default.registerEvent(s.EVENTNAMES.EVT_ENTER_FOREGROUND,this._onEnterForeground,this),c.default.registerEvent(s.EVENTNAMES.EVT_ENTER_BACKGROUND,this._onEnterBackground,this)},t.prototype._removeEvent=function(){c.default.removeEvent(s.EVT.JW_LOOT.JW_LOOT_CHECK_SYMBOL,this._checkSymbolJwLoot,this),c.default.removeEvent(s.EVT.JW_LOOT.JW_LOOT_CHANGE_LIST_INDEX,this._changeJwListIndex,this),c.default.removeEvent(s.EVT.JW_LOOT.JW_LOOT_CHANGE_SYMBOL,this._changeSymbolJwLoot,this),c.default.removeEvent(s.EVT.JW_LOOT.JW_LOOT_REEL_SYMBOL_DOWN,this._showJwReelSymbolDown,this),c.default.removeEvent(s.EVT.THEME.SEND_BATCH_SPIN,this._onSendBatchSpin,this),c.default.removeEvent(s.EVT.THEME.BATCH_SPIN,this._onReceiveBatchSpin,this),c.default.removeEvent(s.EVT.THEME.ON_CAN_STOP,this._onCanStop,this),c.default.removeEvent(s.EVT.THEME.SPIN_STROKE,this._onSpinStroke,this),c.default.removeEvent(s.EVENTNAMES.EVT_ENTER_FOREGROUND,this._onEnterForeground,this),c.default.removeEvent(s.EVENTNAMES.EVT_ENTER_BACKGROUND,this._onEnterBackground,this)},t.prototype._dispatchToComponents=function(){},t.prototype._checkSymbolJwLoot=function(e){this._eventOnCheckSymbolJwLoot&&(this._eventOnCheckSymbolJwLoot.cell=e[0],this._eventOnCheckSymbolJwLoot.reel=e[1],this._eventOnCheckSymbolJwLoot.cellSize=e[2],this._eventOnCheckSymbolJwLoot.zOrder=e[3],this._eventOnCheckSymbolJwLoot.long_symbol=e[4],this._eventOnCheckSymbolJwLoot.long_place=e[5],this._dispatchToComponents(this._eventOnCheckSymbolJwLoot))},t.prototype._changeJwListIndex=function(e){this._eventOnJwIndexListChange&&(this._eventOnJwIndexListChange.reelIndex=e[0],this._dispatchToComponents(this._eventOnJwIndexListChange))},t.prototype._changeSymbolJwLoot=function(e){this._eventOnChangeSymbolJwLoot&&(this._eventOnChangeSymbolJwLoot.cell=e[0],this._eventOnChangeSymbolJwLoot.width=e[1],this._eventOnChangeSymbolJwLoot.height=e[2],this._eventOnChangeSymbolJwLoot.x=e[3],this._eventOnChangeSymbolJwLoot.y=e[4],this._eventOnChangeSymbolJwLoot.beforeX=e[5],this._eventOnChangeSymbolJwLoot.beforeY=e[6],this._eventOnChangeSymbolJwLoot.cellSize=e[7],this._eventOnChangeSymbolJwLoot.zOrder=e[8],this._eventOnChangeSymbolJwLoot.scale=e[9],this._dispatchToComponents(this._eventOnChangeSymbolJwLoot))},t.prototype.checkJwLootNgPerformOver=function(e,t){this._eventOnCheckJwLootNgPerformOver&&(this._eventOnCheckJwLootNgPerformOver.callBack=e,this._eventOnCheckJwLootNgPerformOver.data=t,this._eventOnCheckJwLootNgPerformOver.spinElementList=this.ClassName.gameLayer.spinLayer.effectLayer.lineAnimator.spinElementList,this._eventOnCheckJwLootNgPerformOver.gameLayer=this.ClassName.gameLayer,this._dispatchToComponents(this._eventOnCheckJwLootNgPerformOver))},t.prototype.showJwSymbolDown=function(){this._eventOnShowJwSymbolDown&&(this._eventOnShowJwSymbolDown.spinElementList=this.ClassName.gameLayer.spinLayer.effectLayer.lineAnimator.spinElementList,this._dispatchToComponents(this._eventOnShowJwSymbolDown))},t.prototype._showJwReelSymbolDown=function(e){this._eventOnShowJwReelSymbolDown&&(this._eventOnShowJwReelSymbolDown.spinElementList=e.spinElementList,this._dispatchToComponents(this._eventOnShowJwReelSymbolDown))},t.prototype.jwLootRefreshLanguage=function(){this._eventOnRefreshJwLanguage&&this._dispatchToComponents(this._eventOnRefreshJwLanguage)},t.prototype.updateJw=function(e){this._eventOnUpdateJw&&(this._eventOnUpdateJw.jw_loot=e,this.jw_listen=!0,this._dispatchToComponents(this._eventOnUpdateJw))},t.prototype.fakeSpinUpdateJw=function(){this._eventOnFakeSpinUpdateJw&&this._dispatchToComponents(this._eventOnFakeSpinUpdateJw)},t.prototype.setControl=function(e){this.ctl=e},t.prototype.setCurScene=function(e){this.curScene=e||{}},t.prototype.update=function(){var e=this;e.ClassName&&e.ClassName.gameLayer&&e.ClassName.gameLayer.spinLayer&&(l.SpinLayerState.Rolling==e.ClassName.gameLayer.spinLayer.state?(cc.Tween.stopAllByTag(4951),e.spinLayerLongTimeIdleFlag=!1):(e.spinLayerLongTimeIdleFlag||(e.node.getActionByTag(4951)||cc.tween(e.node).tag(4951).delay(10).call(function(){e.spinLayerLongTimeIdleFlag=!0,console.log("@debug [!Attention] supposed stuck.")}).start(),l.SpinLayerState&&l.SpinLayerState.Show&&e.ClassName.gameLayer.spinLayer.state&&u.THEME_GAME_TYPE.MAIN==e.ClassName.ctl.getGameType()&&l.SpinLayerState.Show==e.ClassName.gameLayer.spinLayer.state&&e.ClassName.gameLayer.spinLayer.effectLayer&&e.ClassName.gameLayer.spinLayer.effectLayer.state&&l.WinShowState&&l.WinShowState.SymbolLineAnimation&&(e.ClassName.gameLayer.spinLayer.effectLayer.state==l.WinShowState.SymbolLineAnimation||111037==e.ClassName.themeId&&e.ClassName.gameLayer.spinLayer.effectLayer.state==l.WinShowState.BgWin2)&&(cc.Tween.stopAllByTag(4951),e.spinLayerLongTimeIdleFlag=!0)),e.jw_listen&&l.SpinLayerState.Show==e.ClassName.gameLayer.spinLayer.state&&(e.jw_listen=!1,e.ClassName&&e.ClassName.themeId&&(p.LOBBY_THEME_CONFIG[e.ClassName.themeId]||{}).IS_JW_LOOT&&e.showJwSymbolDown())))},t.prototype._fpsDropMonitor=function(){},t.prototype._onReceiveBatchSpin=function(){var e="ng_receive";this.recordList&&this.recordList[e]&&h.next(this.recordList[e])&&(this.recordList[e].recordFlag=!1),this._dispatchToComponents(this._eventOnReceiveBatchSpin)},t.prototype._onCanStop=function(){var e="ng_receive_on_stop";this.recordList&&this.recordList[e]&&h.next(this.recordList[e])&&this.recordList[e].recordFlag&&(this.recordList[e].recordFlag=!1)},t.prototype._onSendBatchSpin=function(e){0==e.game_type&&this.recordList},t.prototype._onSpinStroke=function(){},t.prototype._onEnterForeground=function(){this._dispatchToComponents(this._eventOnEnterForeground)},t.prototype._onEnterBackground=function(){this._dispatchToComponents(this._eventOnEnterBackground)},t.prototype.startFPSRecord=function(){},t.prototype.stopFPSRecord=function(){},t.prototype.isSlotIdle=function(){},t.prototype.performKickOutTip=function(){},t.prototype.destructKickOutTip=function(){},t.prototype.initGameLayer=function(){},t.prototype.destruct=function(){},t.prototype.getThemeLoadingView=function(){},t.prototype.preloadBasicImgResAsync=function(){},t.prototype.initResInfo=function(){},t.prototype.initResList=function(){},t.prototype.setResInfo=function(){},t.prototype.loadAllMusics=function(){this.loadResMusic(),this.loadThemeMusics()},t.prototype.loadResMusic=function(){},t.prototype.loadThemeMusics=function(){},t.prototype.loadResInfo=function(){},t.prototype.preloadHeroSGRes=function(){},t.prototype.onLoading_0=function(){},t.prototype.onLoading_100=function(){},t.prototype.preloadImgResAsync=function(e,t){return t(),0},t.prototype.unloadImgRes=function(){},t.prototype.unloadBasicImgRes=function(){},t.prototype.dumpTextures=function(){},t.prototype.unloadThemeMusics=function(){},t.downloadThemeResource=function(){},t.prototype.adjustTheme=function(){},t.prototype.onShow=function(){},t.prototype.onSpinStart=function(){cc.Tween.stopAllByTag(777),cc.Tween.stopAllByTag(987),this.playGame=!1,this.hintMusicCnt=0,this.playNormalLoopMusic&&(this.playNormalLoopMusic=!1),cc.Tween.stopAllByTag(999)},t.prototype.canSpin=function(){},t.prototype.canStop=function(){},t.prototype.onAllReelStop=function(){cc.Tween.stopAllByTag(999)},t.prototype.dealAboutBetChange=function(){},t.prototype.dealMusic_TouchBtnSpinMusic=function(){},t.prototype.dealMusic_TouchBonusBtnSpinMusic=function(){},t.prototype.getPic=function(){return""},t.prototype.getCommonPic=function(){return""},t.prototype.getAudio=function(){return""},t.prototype.getCommonAudio=function(){},t.prototype.touchPaytableCallback=function(){},t.prototype.paytableBackCallback=function(){},t.prototype.refreshLanguage=function(){},t.prototype.isStuck=function(){return this.spinLayerLongTimeIdleFlag&&!this.getNeedClearScreen()},t.prototype.setNeedClearScreen=function(e){this._needClearScreen=e},t.prototype.getNeedClearScreen=function(){return!!this._needClearScreen},t.prototype.isSelectingSpecialGame=function(){return!1},t.prototype.isInFullScreenPerforming=function(){return!0},t.prototype.dealKeepAlive=function(){},t.prototype.dealShopSpin=function(){},t.prototype.getSpinTableCenterWorldPos=function(){if(this.ClassName.gameLayer&&this.ClassName.gameLayer.spinLayer)return this.ClassName.gameLayer.spinLayer.node.convertToWorldSpaceAR(this.ClassName.gameLayer.spinLayer.tableCenterPos)},t.prototype.adNodeReposition=function(){},t.prototype.refreshSpinLayer=function(){this.ClassName.gameLayer&&this.ClassName.gameLayer.spinLayer&&(this.ClassName.gameLayer.spinLayer.node.removeFromParent(),this.initSpinLayer())},t.prototype.initSpinLayer=function(){},t.prototype.createDiamondUnitedNode=function(){return null},t.prototype.getDiamondUnitedNode=function(){return null},t.prototype.readyToChangeBet=function(){return!0},t.prototype.getBasicImgResList=function(){return[]},t.prototype.getSpineImgResList=function(){return[]},t.prototype.getFgImgResList=function(){return[]},t.prototype.getBgImgResList=function(){return[]},t.prototype.getBwImgResList=function(){return[]},t.prototype.getReservePath=function(){return[]},t.prototype.setThemeScaleX=function(e,t){if(t=t||1,e){var o=e.getContentSize(),n=cc.winSize;return 0==o.width&&(o=cc.size(720,1560)),e.setScaleX(n.width/o.width*e.getScaleX()*t)}},r([m],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../Game/Enum":"Enum","../init":"init","./Common_Base":"Common_Base","./EventCenter":"EventCenter","./ThemeControlNew":"ThemeControlNew","./Tools":"Tools"}],ThemeWinNode:[function(e,t,o){"use strict";cc._RF.push(t,"2f7daf1iehFxaanK7qPu7ec","ThemeWinNode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Game/Common"),l=e("../Game/Global"),s=l.Global.ResFontPath,c=l.Global.ResSpinePath,p=e("../Game/GoldTiger"),u=e("../Game/MusicManager"),h=e("./Common_Base"),d=e("./Tools"),m=cc._decorator,f=m.ccclass,_=(m.property,6),y={manual:["big_win/BigWin_glow","big_win/BigWin_K","big_win/BigWin_lizi1","big_win/BigWin_lizi2","big_win/BigWin","big_win/SuperWin","big_win/MegaWin","big_win/EpicWin","big_win/UltimateWin","big_win/coin","big_win/hall_winsz_0"],auto:[]},g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TimerCallGroupID="ThemeWinNode",t.winType=o.BigWin,t.winCoins=0,t.callback=null,t.musicVolume=0,t.effectList=[],t.mask=null,t.root=null,t.spWinScale=2,t.spBoardScaleX=1,t.spBoardScaleY=1,t.spBoardMoveDis=0,t.spLight=null,t.backParticle=null,t.coinsNode=null,t.duration=0,t.spWin=null,t.spBoard=null,t.coinLabel=null,t.processing=!1,t}var o;return i(t,e),o=t,t.prototype.init=function(e,t,n,i){var a=this;a.winType=e||o.BigWin,a.winCoins=t||0,a.callback=n,a.musicVolume=i||0,a.node.addComponent(cc.BlockInputEvents),p.default.theme.ctl.stopFadeMusicActionNode(),a.effectList=[];var l=cc.winSize;a.mask=new cc.Node,a.mask.color=cc.Color.BLACK,a.mask.opacity=200,a.mask.width=l.width,a.mask.height=l.height,a.node.addChild(a.mask),a.root=new cc.Node,a.node.addChild(a.root),a.spWinScale=2,a.spBoardScaleX=1,a.spBoardScaleY=1,a.spBoardMoveDis=0,a.spLight=d.createAni(c.Common+"BigWin/BigWin_glow").getComponent(sp.Skeleton),a.spLight.node.opacity=0,a.spLight.node.scale=0,a.root.addChild(a.spLight.node),cc.tween(a.spLight.node).call(function(){a.spLight.setAnimation(0,"BigWin_glow",!0)}).to(.17,{scale:1*a.spWinScale}).start(),cc.tween(a.spLight.node).to(.33,{opacity:255}).start(),a.backParticle=d.createParticle(c.Common+"BigWin/BigWin_lizi1"),a.backParticle.node.setPosition(0,120),a.root.addChild(a.backParticle.node),a.coinsNode=new cc.Node,a.root.addChild(a.coinsNode),a.duration=5;var h,m=0,f=0,y=1;o.BigWin==a.winType?(a.duration=5,_=9,m=r.Common.s_sound.BigWinBgMusic,f=r.Common.s_sound.BigWinBig,y=1):o.SuperWin==a.winType?(a.duration=7,_=7,m=r.Common.s_sound.BigWinBgMusic,f=r.Common.s_sound.BigWinSuper,y=1.05):o.MegaWin==a.winType?(a.duration=10,_=5,m=r.Common.s_sound.BigWinBgMusic,f=r.Common.s_sound.BigWinMega,y=1.1):o.EpicWin==a.winType?(a.duration=9,_=6,m=r.Common.s_sound.BigWinBgMusic,f=r.Common.s_sound.BigWinEpic,y=1.08):o.UltimateWin==a.winType&&(a.duration=12,_=2,m=r.Common.s_sound.BigWinBgMusic,f=r.Common.s_sound.BigWinUltimate,y=1.15),h=Math.floor(100*(a.duration+2)/_),cc.tween(a.node).delay(.2).call(function(){var e=u.default.getInstance().playEffect(m,!1);a.addToWinNodeEffect(e)}).delay(.8).call(function(){var e=u.default.getInstance().playEffect(f,!1);a.addToWinNodeEffect(e)}).start(),1==o.AD_FLAG?o.BigWin==a.winType||o.SuperWin==a.winType||o.MegaWin==a.winType||o.EpicWin==a.winType||(o.UltimateWin,a.winType):2==o.AD_FLAG&&(o.BigWin==a.winType||o.SuperWin==a.winType||o.MegaWin==a.winType||o.EpicWin==a.winType||(o.UltimateWin,a.winType)),a.emitCoins(h),a.spWin=d.createAni(c.Common+"BigWin/"+a.winType).getComponent(sp.Skeleton),cc.tween(a.spWin.node).call(function(){a.spWin.setAnimation(0,"intro",!1),a.spWin.addAnimation(0,"idle",!0)}).start(),a.spWin.node.setPosition(0,110),a.root.addChild(a.spWin.node),a.spWin.node.scale=a.spWinScale,a.spBoard=d.createAni(c.Common+"BigWin/BigWin_K").getComponent(sp.Skeleton),a.spBoard.node.setPosition(0,-150+a.spBoardMoveDis),a.spBoard.node.scale=0,a.root.addChild(a.spBoard.node),cc.tween(a.spBoard.node).call(function(){a.spBoard.setAnimation(0,"K_idle",!0)}).delay(.17).to(.5,{scaleX:.9*a.spBoardScaleX,scaleY:.9*a.spBoardScaleY},{easing:"cubicInOut"}).to(a.duration-1,{scaleX:y*a.spBoardScaleX,scaleY:y*a.spBoardScaleY}).start();var g=new cc.Node;g.setPosition(a.spBoard.node.getBoundingBox().width/2,a.spBoard.node.getBoundingBox().height/2),a.spBoard.node.addChild(g),a.coinLabel=d.addFNT(s+"hall_winsz_0","0").getComponent(cc.Label),g.addChild(a.coinLabel.node),a.coinLabel.getComponent(cc.Label).overflow=cc.Label.Overflow.SHRINK,a.coinLabel.node.position=cc.v3(a.coinLabel.node.position.x,a.coinLabel.node.position.y+45),a.coinLabel.node.width=940;var T=new cc.Node;cc.tween(T).to(a.duration,{position:cc.v3(0,a.winCoins)},{progress:function(e,t,o,n){return a.coinLabel.string=r.num_with_commas(a.winCoins*n,2),o}}).start(),cc.tween(a.node).delay(1).call(function(){a.mask.on(cc.Node.EventType.TOUCH_END,function(){if(!a.processing){T.stopAllActions(),cc.Tween.stopAllByTarget(T),a.processing=!0,a.coinLabel.string=r.num_with_commas(a.winCoins),a.stopWinNodeEffect();var e=u.default.getInstance().playEffect(r.Common.s_sound.BigWinWinEnd,!1);a.addToWinNodeEffect(e),a.spBoard.node.stopAllActions(),cc.tween(a.node).delay(.1).call(function(){a.hide()}).start()}})}).start(),cc.tween(a.node).delay(a.duration+.2).call(function(){a.processing=!0,a.stopWinNodeEffect();var e=u.default.getInstance().playEffect(r.Common.s_sound.BigWinWinEnd,!1);a.addToWinNodeEffect(e)}).call(function(){a.hide()}).start()},t.prototype.onExit=function(){h.default.clearGroup(this)},t.prototype.stopWinNodeEffect=function(){for(var e=1;e<=this.effectList.length;e++)this.effectList[e-1]&&cc.audioEngine.stopEffect(this.effectList[e-1]);this.effectList=[]},t.prototype.addToWinNodeEffect=function(e){this.effectList.push(e)},t.prototype.emitCoins=function(){},t.prototype.skipToShowAdUI=function(){this.node.stopAllActions()},t.prototype.adBonus=function(){},t.prototype.hide=function(){var e=this;h.default.clearGroup(e),e.node.stopAllActions(),cc.tween(e.spWin.node).to(.5,{scale:1.2*e.spWinScale},{easing:"cubicOut"}).to(.2,{scale:0}).start(),cc.tween(e.spLight.node).to(.5,{scale:1.2*e.spWinScale},{easing:"cubicOut"}).to(.2,{scale:0}).start(),e.backParticle.node.removeFromParent(),e.backParticle=null,cc.tween(e.spBoard.node).delay(.07).by(.5,{scale:1.2},{easing:"cubicOut"}).to(.2,{scale:0}).start(),cc.tween(e.coinsNode).to(.45,{opacity:0}).start(),cc.tween(e.mask).delay(.5).to(.2,{opacity:0}).start(),cc.tween(e.node).delay(.65).call(function(){e.stopWinNodeEffect()}).delay(1.1-.65).removeSelf().start(),cc.tween(cc.director.getScene().getChildByName("Canvas")).delay(.65).call(function(){var e=d.createParticle(c.Common+"BigWin/BigWin_lizi2");cc.director.getScene().getChildByName("Canvas").addChild(e.node,h.POPOVER_PRIORITY.BIG_WIN_SHOW),cc.tween(e.node).delay(1).removeSelf().start()}).start();var t=e.callback;h.default.addCallFunc(function(){p.default.theme.ctl.stopFadeMusicActionNode(),t&&t(),p.default.theme.ctl.bigWinOver()},1.1,null,"big_win_end")},t.getPreloadRes=function(){return y},t.loadEffects=function(){},t.unloadEffects=function(){},t.getWinType=function(e){var t=e.spinResult,n=e.winIndex;n=n&&n>0?"_"+n:"";var i=e.base,a=e.totalWin;return t?t["big_win"+n]?o.BigWin:t["super_win"+n]?o.SuperWin:t["mega_win"+n]?o.MegaWin:t["epic_win"+n]?o.EpicWin:!!t["ultimate_win"+n]&&o.UltimateWin:a>=80*i?o.UltimateWin:a>=40*i?o.MegaWin:a>=20*i?o.EpicWin:a>=10*i?o.SuperWin:a>=5*i&&o.BigWin},t.delWinType=function(e){var t=e.spinResult,o=e.winIndex;o=o&&o>0?"_"+o:"",t&&(t["big_win"+o]?t["big_win"+o]=null:t["super_win"+o]?t["super_win"+o]=null:t["mega_win"+o]?t["mega_win"+o]=null:t["epic_win"+o]?t["epic_win"+o]=null:t["ultimate_win"+o]&&(t["ultimate_win"+o]=null))},t.getWinTypeCoins=function(e){var t,o=e.spinResult,n=e.winIndex;return n=n&&n>0?"_"+n:"",o&&(t=o["big_win"+n+"_coins"]?o["big_win"+n+"_coins"]:o["super_win"+n+"_coins"]?o["super_win"+n+"_coins"]:o["mega_win"+n+"_coins"]?o["mega_win"+n+"_coins"]:o["epic_win"+n+"_coins"]?o["epic_win"+n+"_coins"]:o["ultimate_win"+n+"_coins"]?o["ultimate_win"+n+"_coins"]:null),t},t.BigWin="BigWin",t.SuperWin="SuperWin",t.MegaWin="MegaWin",t.EpicWin="EpicWin",t.UltimateWin="UltimateWin",t.AD_FLAG=null,t.ad_bonus=null,t.ad_popup_id=null,o=a([f],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../Game/Common":"Common","../Game/Global":"Global","../Game/GoldTiger":"GoldTiger","../Game/MusicManager":"MusicManager","./Common_Base":"Common_Base","./Tools":"Tools"}],TipNode:[function(e,t,o){"use strict";cc._RF.push(t,"0cf9cbVk4ZGMYTY/1Vv9QBi","TipNode");var n,i,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../Base/Tools"),s=e("./Global").Global.ResImagePath,c=cc._decorator,p=c.ccclass,u=(c.property,{lowBet:1,highBet:2,collect:3}),h=((i={})[u.lowBet]={path:s.NG+"power_mode_lock_tip",anchorPoint:cc.v2(.5,0),position:cc.v3(-391.5,-247),level:0},i[u.highBet]={path:s.NG+"power_mode_unlock_tip",anchorPoint:cc.v2(.5,0),position:cc.v3(-391.5,-247),level:0},i[u.collect]={path:s.NG+"collect_tip",anchorPoint:cc.v2(.5,1),position:cc.v3(0,248),level:0},i),d=function(e){function t(){var t=e.call(this)||this;t.root=null,t.betList=[];var o=t;return o.root=new cc.Node,o.node.addChild(o.root),o.betList=[],t}return a(t,e),t.prototype.createTip=function(e){var t=this,o=h[e],n=new cc.Node;n.setScale(0),t.root.addChild(n,o.level),n.setPosition(o.position);var i=l.addImage(o.path);i.setAnchorPoint(o.anchorPoint),i.setPosition(0,0),n.addChild(i,0);var a=i.getContentSize(),r=l.createBtnWithSize(a,{handler:function(o){o.target.getComponent(cc.Button).interactable&&o.type==cc.Node.EventType.TOUCH_END&&t.hideTip(null,e)},target:t});return r.node.setPosition((.5-o.anchorPoint.x)*a.width,(.5-o.anchorPoint.y)*a.height),n.addChild(r.node,1),n},t.prototype.hideTip=function(e,t){t=Number(t);var o=this.betList[t];l.checkNodeExist(o)&&(o.stopAllActions(),cc.tween(o).to(.2,{scale:0}).removeSelf().start(),this.betList[t]=null)},t.prototype.showTip=function(e){var t=this;if(l.checkNodeExist(t.betList[e]))t.hideTip(null,e);else{var o=t.createTip(e);t.betList[e]=o,o.stopAllActions(),cc.tween(o).to(.2,{scale:1}).delay(2).call(function(){t.hideTip(null,e)}).start()}},t.prototype.hideAllTip=function(){for(var e in u)this.hideTip(null,u[e])},t.prototype.showOneTip=function(e){for(var t in u)e==u[t]?this.showTip(u[t]):this.hideTip(null,u[t])},r([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../Base/Tools":"Tools","./Global":"Global"}],Tools:[function(e,t,o){"use strict";cc._RF.push(t,"e9cb5hUx1BFVZNVck1vClku","Tools"),Object.defineProperty(o,"__esModule",{value:!0}),o.setOpacityTo=o.setColorTo=o.createLinkList=o.ListNode=o.LinkList=o.createBtnWithSize=o.getHorizontalNode=o.deleteBlackLayer=o.createBlackLayer=o.createShakeAction=o.between=o.num_2_str=o.judgeList=o.createStack=o.createQueue=o.showErrorPop=o.getWorldPos=o.changeFather=o.setColorWithFather=o.safeRunAction=o.copyAni=o.createAni=o.loadSpineResourceFile=o.checkAniRes=o.symmetricSpriteCreate=o.transPng=o.playRandomVoice=o.playRandomEffect=o.playVoice=o.playEffect=o.registerTag=o.funcDelay=o.createFont=o.copyFont=o.addFNT=o.addText=o.addNoEffectText=o.getSysFont=o.createParticle=o.loadAtlas=o.getAtlas=o.getFooterAtlas=o.getHeaderAtlas=o.getSymbolAtlas=o.checkThemeExist=o.checkNodeExist=o.setTexture=o.addImage=o.getImage=o.loadImageFromUrl=void 0,o.cubicInOut=o.next=o.randomList=o.findElementInList=void 0;var n=e("../Game/Common"),i=e("../Game/Global"),a=i.Global.WebMemCache,r=i.Global.PlistPath,l=i.Global.CommonPlistPath,s=i.Global.ResFontPath,c=i.Global.ResImagePath,p=e("../Game/MusicManager"),u=e("./Common_Base"),h=(cc.size(1280,720),{actionTag:0,actionTagList:null});o.loadImageFromUrl=function(e,t){a[e]?t(null,new cc.SpriteFrame(a[e],new cc.Rect(0,0,a[e].width,a[e].height))):cc.resources.load(e,cc.Texture2D,function(e,o){if(e)return console.error(e),console.trace(),void t(e,null);t(e,new cc.SpriteFrame(o,new cc.Rect(0,0,o.width,o.height)))})},o.getImage=function(e){return a[e]},o.addImage=function(e,t){void 0===t&&(t=void 0);var o=new cc.Node,n=o.addComponent(cc.Sprite);return n.type=cc.Sprite.Type.SIMPLE,n.sizeMode=cc.Sprite.SizeMode.RAW,n.trim=!1,a[e]?(n.spriteFrame=new cc.SpriteFrame(a[e],new cc.Rect(0,0,a[e].width,a[e].height)),t&&t()):cc.resources.load(e,function(e,o){if(e)return console.error(e),void console.trace();n.spriteFrame=new cc.SpriteFrame(o,new cc.Rect(0,0,o.width,o.height)),t&&t()}),o},o.setTexture=function(e,t,o){e.type=cc.Sprite.Type.SIMPLE,e.sizeMode=cc.Sprite.SizeMode.RAW,e.trim=!1,a[t]?(e.spriteFrame=new cc.SpriteFrame(a[t],new cc.Rect(0,0,a[t].width,a[t].height)),o&&o(a[t],a[t].width,a[t].height)):cc.resources.load(t,function(t,n){if(t)return console.error(t),void console.trace();e.spriteFrame=new cc.SpriteFrame(n,new cc.Rect(0,0,n.width,n.height)),o&&o(n,n.width,n.height)})},o.checkNodeExist=function(e){return e&&null!=e},o.checkThemeExist=function(){return!0},o.getSymbolAtlas=function(){return o.getAtlas(r+"symbol")},o.getHeaderAtlas=function(){return o.getAtlas(l+"header")},o.getFooterAtlas=function(){return o.getAtlas(l+"game_footer")},o.getAtlas=function(e){return a[e]},o.loadAtlas=function(e,t){a[e]?t(null,a[e]):cc.resources.load(e,cc.SpriteAtlas,function(e,o){if(e)return console.error(e),void console.trace();t(e,o)})},o.createParticle=function(e){if(o.checkThemeExist()){var t=(new cc.Node).addComponent(cc.ParticleSystem);return a[e]?t.file=a[e]:cc.resources.load(e,cc.ParticleAsset,function(e,o){if(e)return console.error(e),void console.trace();t.file=o}),t}},o.getSysFont=function(){return"Arial"},o.addNoEffectText=function(e,t,n,i){null!=e&&""!=e||(e=o.getSysFont()),t=(t=0==Number(t)?"0":t)||"";var r=new cc.Node,l=r.addComponent(cc.Label);return l.string=t,l.fontSize=n,r.color=i,l.horizontalAlign=cc.Label.HorizontalAlign.CENTER,l.verticalAlign=cc.Label.VerticalAlign.CENTER,l.enableWrapText=!1,a[e]?l.font=a[e]:cc.resources.load(e,cc.Font,function(e,t){if(e)return console.error(e),void console.trace();l.font=t}),r},o.addText=function(e,t,n,i){return o.addNoEffectText(e,t,n,i)},o.addFNT=function(e,t){return o.addText(e,t,24,cc.Color.WHITE)},o.copyFont=function(e,t){e.node.color=t.node.color,e.font=t.font,e.fontSize=t.fontSize,e.horizontalAlign=t.horizontalAlign,e.verticalAlign=t.verticalAlign,e.enableWrapText=t.enableWrapText,e.string=t.string,e.overflow=t.overflow},o.createFont=function(e,t){return void 0===t&&(t=""),o.addFNT(s+e,t).getComponent(cc.Label)},o.funcDelay=function(e,t){cc.tween(cc.director.getScene().getChildByName("Canvas")).delay(t).call(function(){e()}).start()},o.registerTag=function(e){return h.actionTagList||(h.actionTagList={}),h.actionTagList[e]||(h.actionTag?h.actionTag=h.actionTag+1:h.actionTag=1,h.actionTagList[e]=h.actionTag),h.actionTagList[e]},o.playEffect=function(e,t,o){return void 0===t&&(t=null),void 0===o&&(o=null),p.default.getInstance().playEffect(e,t,o)},o.playVoice=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),o.playEffect(e,t,n)},o.playRandomEffect=function(e,t){var n=Math.floor(Math.random()*t.length);o.playEffect(t[n])},o.playRandomVoice=function(e,t){var n=Math.floor(Math.random()*t.length);o.playVoice(t[n])},o.transPng=function(e){return u.translateImage(e)},o.symmetricSpriteCreate=function(e,t){var o=!1,n=!1;"left"==t?n=!0:"right"==t&&(o=!0);var i=new cc.Node,r=new cc.Sprite,l=new cc.Sprite;return a[e]?r.spriteFrame=l.spriteFrame=a[e]:cc.resources.load(e,cc.SpriteFrame,function(e,t){if(e)return console.error(e),void console.trace();r.spriteFrame=l.spriteFrame=t}),n?(l.node.setScale(-1,1),l.node.setAnchorPoint(1,.5),r.node.setAnchorPoint(1,.5)):o&&(r.node.setScale(-1,1),l.node.setAnchorPoint(0,.5),r.node.setAnchorPoint(0,.5)),r.node.setPosition(0,0),l.node.setPosition(0,0),i.addChild(r.node),i.addChild(l.node),i},o.checkAniRes=function(){return!0},o.loadSpineResourceFile=function(e,t){void 0===t&&(t=!1);var o=new cc.Node,n=o.addComponent(sp.Skeleton);return n.loop=!0,n.premultipliedAlpha=!1,n.timeScale=1,n.debugSlots=!1,n.debugBones=!1,n.debugMesh=!1,n.useTint=!1,n.enableBatch=!1,a[e]?n.skeletonData=a[e]:cc.resources.load(e,sp.SkeletonData,function(e,t){if(e)return console.error(e),void console.trace();n.skeletonData=t}),o},o.createAni=function(e){return o.loadSpineResourceFile(e,!0)},o.copyAni=function(e,t){e.skeletonData=t.skeletonData,e.defaultAnimation=t.defaultAnimation,e.enableBatch=t.enableBatch,e.premultipliedAlpha=t.premultipliedAlpha,e.loop=t.loop,e.setSlotsToSetupPose()},o.safeRunAction=function(e,t,n){void 0===n&&(n=void 0),o.checkNodeExist(e)&&(n?cc.tween(e).tag(n).then(t).start():cc.tween(e).then(t).start())},o.setColorWithFather=function(){},o.changeFather=function(e,t,n){void 0===n&&(n=void 0);var i=o.getWorldPos(e),a=t.convertToNodeSpaceAR(i);n=n||e.zIndex,e.removeFromParent(!1),t.addChild(e,n),e.setPosition(a)},o.getWorldPos=function(e){return e.parent.convertToWorldSpaceAR(e.position)},o.showErrorPop=function(e){console.error(e)},o.createQueue=function(){var e={head:1,tail:1,store:{},enQueue:function(t){return e.store[e.head]=t,e.head=e.head+1,!0},deQueue:function(){if(e.tail<e.head){var t=e.store[e.tail];return e.store[e.tail]=null,e.tail=e.tail+1,t}return!1},getValue:function(t){return t&&t>0&&e.tail+(t-1)<e.head?e.store[e.tail+(t-1)]:(o.showErrorPop(["queue getValue error index=",t]),!1)},getLength:function(){return e.head-e.tail},isEmpty:function(){return!(e.tail<e.head)},clean:function(){for(;e.deQueue(););e.head=1,e.tail=1},release:function(){e=null}};return e},o.createStack=function(){var e={index:0,store:{},push:function(t){return e.index=e.index+1,e.store[e.index]=t,!0},pop:function(){if(e.index>0){var t=e.store[e.index];return e.store[e.index]=null,e.index=e.index-1,t}return!1},getTop:function(){return e.index>0&&e.store[e.index]},isEmpty:function(){return 0==e.index},clean:function(){for(;e.pop(););},release:function(){e=null}};return e},o.judgeList=function(e,t,o){if("and"==t){if(null!=o){for(var n in e)if(e[n]!=o)return!1;return!0}for(var n in e)if(!e[n])return!1;return!0}if("or"==t){if(null!=o){for(var n in e)if(e[n]==o)return!0;return!1}for(var n in e)if(e[n])return!0;return!1}return null},o.num_2_str=function(e,t,o){return void 0===t&&(t=0),void 0===o&&(o=1),n.stringify(e)},o.between=function(e,t,o){return e>=t&&e<=o},o.createShakeAction=function(e,t){cc.v3(0,0);var o=t.duration,n=t.shakeRange,i=t.initPos,a=t.addSpeed||0;a=1+a/100;var r=2,l=i||cc.v3(0,0);n&&(r*=n);var s=o,c=Math.floor(s/5/.05);return s<0?cc.tween().repeatForever(cc.tween().call(function(){e.setPosition(r+l.x,4*r+l.y),r*=a}).delay(.05).call(function(){e.setPosition(-2*r+l.x,2*r+l.y),r*=a}).delay(.05).call(function(){e.setPosition(2*r+l.x,2*r+l.y),r*=a}).delay(.05).call(function(){e.setPosition(-r+l.x,4*r+l.y),r*=a}).delay(.05).call(function(){e.setPosition(0+l.x,0+l.y),r*=a}).delay(.05)):cc.tween().repeat(c,cc.tween().call(function(){e.setPosition(r+l.x,4*r+l.y),r*=a}).delay(.05).call(function(){e.setPosition(-2*r+l.x,2*r+l.y),r*=a}).delay(.05).call(function(){e.setPosition(2*r+l.x,2*r+l.y),r*=a}).delay(.05).call(function(){e.setPosition(-r+l.x,4*r+l.y),r*=a}).delay(.05).call(function(){e.setPosition(0+l.x,0+l.y),r*=a}).delay(.05))},o.createBlackLayer=function(e){var t=e.fatherNode,n=e.zOrder||0,i=e.time||0,a=null==e.opacity?170:e.opacity,r=new cc.Node;return r.addComponent(cc.Sprite),r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o.getImage(c.Common+"default_panel")),r.getComponent(cc.Sprite).type=cc.Sprite.Type.SLICED,r.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,r.color=cc.Color.BLACK,r.opacity=0,r.width=1e4,r.height=1e4,r.setPosition(0,0),t.addChild(r,n),cc.tween(r).to(i,{opacity:a}).start(),r.addComponent(cc.BlockInputEvents),r},o.deleteBlackLayer=function(e,t){o.safeRunAction(e,cc.tween().to(t,{opacity:0}).removeSelf())},o.getHorizontalNode=function(e,t){var o=new cc.Node;for(var n in e)o.addChild(e[n]);var i=o.addComponent(cc.Layout);return i.type=cc.Layout.Type.HORIZONTAL,i.resizeMode=cc.Layout.ResizeMode.CONTAINER,i.spacingX=t,i.horizontalDirection=cc.Layout.HorizontalDirection.LEFT_TO_RIGHT,o},o.createBtnWithSize=function(e,t){void 0===t&&(t=null);var o=e.width,n=e.height,i=(new cc.Node).addComponent(cc.Button);return i.node.opacity=0,i.node.width=o,i.node.height=n,i.node.on(cc.Node.EventType.TOUCH_START,t.handler,t.target),i.node.on(cc.Node.EventType.TOUCH_MOVE,t.handler,t.target),i.node.on(cc.Node.EventType.TOUCH_CANCEL,t.handler,t.target),i.node.on(cc.Node.EventType.TOUCH_END,t.handler,t.target),i};var d=function(){this.head=null,this.tail=null,this.length=0,this.nodeMap={},this.initLinkList=null,this.addToHead=null,this.addToTail=null,this.removeNode=null,this.getAllData=null};o.LinkList=d;var m=function(){this.identifier=null,this.data=null,this.next=null,this.previous=null,this.setData=null,this.getData=null,this.setNext=null,this.getNext=null,this.setPrevious=null,this.getPrevious=null,this.removeSelf=null};o.ListNode=m,o.createLinkList=function(){var e=new d,t=function(){var e=new m;return e.identifier=Date.now(),e.setData=function(t){e.data=t},e.getData=function(){return e.data},e.setNext=function(t){e.next=t},e.getNext=function(){return e.next},e.setPrevious=function(t){e.previous=t},e.getPrevious=function(){return e.previous},e.removeSelf=function(){var t=e.getNext(),o=e.getPrevious();t&&o&&(t.setPrevious(o),o.setNext(t)),e=null},e};return e.initLinkList=function(o){var n=t();return n.setData(o),e.head=n,e.tail=n,e.nodeMap[n.identifier]=!0,e.length=e.length+1,n},e.addToHead=function(o){if(0==e.length)return e.initLinkList(o);var n=t();return n.setData(o),e.head.setNext(n),n.setPrevious(e.head),e.head=n,e.nodeMap[n.identifier]=!0,e.length=e.length+1,e.head},e.addToTail=function(o){if(0==e.length)return e.initLinkList(o);var n=t();return n.setData(o),e.tail.setPrevious(n),n.setNext(e.tail),e.tail=n,e.nodeMap[n.identifier]=!0,e.length=e.length+1,e.head},e.removeNode=function(t){if(e.nodeMap[t.identifier]){var o=t.getNext(),n=t.getPrevious();return o&&n?(o.setPrevious(n),n.setNext(o),e.length=e.length-1,delete e.nodeMap[t.identifier],t=null):o&&!n?(o.setPrevious(null),e.tail=o,e.length=e.length-1,delete e.nodeMap[t.identifier],t=null):n&&!o?(n.setNext(null),e.head=n,e.length=e.length-1,delete e.nodeMap[t.identifier],t=null):(e.head=null,e.tail=null,e.length=0,e.nodeMap={},t=null),!0}return!1},e.getAllData=function(){for(var t=e.tail,o=[],n=1;n<=e.length;n++){var i=t.getData();o.push(i),t=t.getNext()}return o},e},o.setColorTo=function(e,t,n){if(n&&n>0){var i=cc.tween().to(n,{color:t});cc.Tween.stopAllByTag(123456),o.safeRunAction(e,i,123456)}else cc.Tween.stopAllByTag(123456),e.color=t},o.setOpacityTo=function(e,t,o){o&&o>0?(cc.Tween.stopAllByTag(1234567),cc.tween(e).tag(1234567).to(o,{opacity:t}).start()):(cc.Tween.stopAllByTag(1234567),e.opacity=t)},o.findElementInList=function(e,t){for(var o in e)if(e[o]==t)return o;return!1},o.randomList=function(e){for(var t=e.length,o=[],n=1;n<=t;n++)o[n-1]=n;var i=[];for(n=1;n<=t;n++){var a=Math.floor(Math.random()*o.length+1),r=o[a-1];o.splice(a-1,1),i.push(e[r-1])}return i},o.next=function(e){return Object.keys(e).length>0},o.cubicInOut=function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2},cc._RF.pop()},{"../Game/Common":"Common","../Game/Global":"Global","../Game/MusicManager":"MusicManager","./Common_Base":"Common_Base"}],UserCoinNode:[function(e,t,o){"use strict";cc._RF.push(t,"0fae62TuoNPR7qkg4J/g/av","UserCoinNode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./LabelNumRoll"),l=e("./User"),s=cc._decorator,c=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.coinLabel=null,t}return i(t,e),t.prototype.init=function(e,t,o){this.initUI(e,t,o),l.default.getInstance().registerCoinsShowLabel(this.coinLabel)},t.prototype.initUI=function(){},t.prototype.playCoinAnimation=function(){},t.prototype.stopCoinAnimation=function(){},a([p(r.default)],t.prototype,"coinLabel",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./LabelNumRoll":"LabelNumRoll","./User":"User"}],User:[function(e,t,o){"use strict";cc._RF.push(t,"e1f25I1NJJLD5yEt4IXKHbq","User");var n=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./LabelNumRoll"),a=cc._decorator,r=a.ccclass,l=(a.property,function(){function e(){this.abType=null,this.isNewUser=null,this._coins=-1,this._coins_delta=0,this._coins_delta_dict={},this.coinsShowLabelList={},this.coinsShowValueList={}}var t;return t=e,e.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},e.prototype.setCoins=function(e,t){void 0===t&&(t=void 0),this._coins=e,0!=t&&this._updateCoinsToShow(t)},e.prototype.getCoins=function(){return this._coins},e.prototype.setCoinsDeltaValueForKey=function(e,t,o){void 0===o&&(o=void 0),(null==e||"object"!=typeof e)&&(0==e&&(e=null),this._coins_delta_dict[t]=e,this._calcCoinsDelta(),0!=o&&this._updateCoinsToShow(o))},e.prototype.resetCoinsDeltaValue=function(){this._coins_delta_dict={},this._coins_delta=0},e.prototype.getCoinsDeltaValueForKey=function(e){return this._coins_delta_dict[e]||0},e.prototype._calcCoinsDelta=function(){var e=0;for(var t in this._coins_delta_dict)e+=this._coins_delta_dict[t];this._coins_delta=e},e.prototype._updateCoinsToShow=function(e){e=e||.5,this._stopCoinsLabelsRolling(!1),this._startCoinsLabelsRolling(e)},e.prototype._startCoinsLabelsRolling=function(e){for(var t in this.coinsShowLabelList){var o=this.coinsShowLabelList[t];if(o.exist){var n=o.nrGetCurValue(),i=null;null!=this._coins&&null!=this._coins_delta&&(i=this._coins-this._coins_delta),e>0&&null!=n&&null!=n&&null!=i&&null!=i&&i>n?o.nrStartRoll(n,i,e):o.nrSetCurValue(i),o.startRollCallback&&null!=n&&null!=n&&null!=i&&null!=i&&i>n&&o.startRollCallback()}else this.deregisterCoinsShowLabel(o)}},e.prototype._stopCoinsLabelsRolling=function(e){for(var t in this.coinsShowLabelList){var o=this.coinsShowLabelList[t];o.exist?o.nrStopRoll(e):this.deregisterCoinsShowLabel(o)}},e.prototype.registerCoinsShowLabel=function(e){e&&(e.getComponent(i.default).nrInit(0,12),this.coinsShowLabelList[e.name]=e,e.getComponent(i.default).exist=!0)},e.prototype.deregisterCoinsShowLabel=function(e){e&&(delete this.coinsShowLabelList[e.name],delete this.coinsShowValueList[e.name])},e._instance=null,t=n([r],e)}());o.default=l,cc._RF.pop()},{"./LabelNumRoll":"LabelNumRoll"}],init:[function(e,t,o){"use strict";cc._RF.push(t,"6b771it4T1MaIyb3+YBc1Bm","init");var n,i,a,r,l,s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.CLUB_FLAG=o.IS_CM_ATTRIBUTION=o.IN_HERO_WISH_GAME_THEME=o.IN_FLAME_THEME_FLAG=o.IN_QUEST_NEW_USER_THEME_FLAG=o.IN_QUEST_STAY_THEME_FLAG=o.RELOAD_BACKEND_QUEST_NEW_USER_BET_CONFIG_DATA=o.RELOAD_BACKEND_QUEST_STAY_BET_CONFIG_DATA=o.PAY_SITUATION=o.RELOAD_BACKEND_THEME_CONFIG_DATA=o.FAKE_THEME_BASE_BET_DATA=o.IS_THEME_VERTICAL=o.THEME_CONFIG_LIST=o.LOBBY_THEME_CONFIG=void 0;var c=e("./Base/BetControl"),p=e("./Base/Common_Base"),u=e("./Base/EventCenter"),h=206;h=Math.ceil(h/2),o.LOBBY_THEME_CONFIG=((n={})[110059]={POS_X_IDX:h-153,POS_Y_IDX:0,POS_X_IDX_2:4,POS_Y_IDX_2:0,ICON_SORL:1,JP_ALL_POS_Y:[-30,-89],JP_OWN_POS_Y:[-30,-89],JP_ALL_NUM_SCALE:[.75,.75],JP_OWN_NUM_SCALE:[.75,.75]},n),o.THEME_CONFIG_LIST=((i={})[110059]={THEME_NAME:"ThemeGoldTiger",RULE_MEDAL_DATA:{filename:"Info_06"},JP_INDEXES_ALL:[1],JP_INDEXES_OWN:[1],NEW_LOADING_CONFIG:(a={},a[1]={pos:cc.v3(-400,-202),num:2,size:32,gap:8,color:cc.color(255,255,255,255)},a[2]={pos:cc.v3(400,-202),num:2,size:32,gap:8,color:cc.color(255,255,255,255)},a.pos=cc.v3(0,72),a.specificMusic=!0,a.specificMusicTime=3,a.backgroundAnimation={pos:cc.v3(0,0)},a.multiAnimation={pos:cc.v3(0,0)},a.hideDelay=.5,a),BET_FEATURE:"jackpotAndBetTip"},i),o.IS_THEME_VERTICAL=((r={})[111083]=!0,r[111084]=!0,r[111079]=!0,r[111080]=!0,r[111078]=!0,r[111075]=!0,r[111072]=!0,r[111073]=!0,r[111081]=!0,r[111071]=!0,r[111074]=!0,r[111077]=!0,r[111076]=!0,r[111082]=!0,r[111070]=!0,r[111066]=!0,r[111068]=!0,r[111067]=!0,r[111062]=!0,r[111063]=!0,r[111057]=!0,r[111061]=!0,r[111065]=!0,r[111069]=!0,r[111056]=!0,r[111060]=!0,r[111059]=!0,r[111058]=!0,r[111055]=!0,r[111053]=!0,r[111054]=!0,r[111052]=!0,r[111050]=!0,r[111049]=!0,r[111048]=!0,r[111051]=!0,r[111047]=!0,r[111046]=!0,r[111045]=!0,r[111044]=!0,r[111043]=!0,r[111042]=!0,r[111041]=!0,r[111040]=!0,r[111038]=!0,r[111039]=!0,r[111035]=!0,r[111037]=!0,r[111036]=!0,r[111034]=!0,r[111032]=!0,r[111033]=!0,r[111031]=!0,r[111030]=!0,r[111024]=!0,r[111029]=!0,r[111021]=!0,r[111015]=!0,r[111001]=!0,r[111002]=!0,r[111011]=!0,r[111013]=!0,r[111003]=!0,r[111004]=!0,r[111005]=!0,r[111006]=!0,r[111007]=!0,r[111008]=!0,r[111009]=!0,r[111010]=!0,r[111014]=!0,r[121001]=!0,r[121002]=!0,r[111012]=!0,r[111016]=!0,r[111017]=!0,r[111018]=!0,r[111022]=!0,r[111020]=!0,r[111023]=!0,r[111019]=!0,r[111025]=!0,r[111026]=!0,r[111027]=!0,r[111028]=!0,r);var d=[0,110076,111083,110077,111082,111084,110075,110070,110072,110073,110069,110074,110068,110071,111079,111080,111078,110067,110066,110065,111076,111075,110064,111074,111077,111072,111073,111081,110061,110060,111071,110059,110058,111066,111070,110052,111069,111067,110056,110055,111062,110051,111063,111065,110053,100020,110048,111061,111057,111058,110049,111060,110050,100018,110043,110042,111056,110046,100021,111059,110045,110047,110044,110041,111055,100017,110040,110039,100016,110038,110037,110036,111053,111054,111035,110034,110033,111050,110032,111048,111051,111052,110031,111049,111046,111045,111044,110029,110028,110030,111047,110027,110026,111043,110025,111041,111038,111042,111039,111035,111037,111040,111036,110024,111034,110023,111032,110022,111031,100015,111033,111030,110021,111024,111029,111028,111026,111027,111025,111021,111023,111022,111020,111019,111018,111017,100014,110019,110018,110016,110017,111016,110014,111015,110014,110015,110020,111014,110012,110013,111012,111013,110009,100013,110010,110011,110008,100011,111009,111007,100010,111008,111010,111005,111006,110007,110006,111003,111011,111002,110004,110001,111004,120002,110005,121001,120001,110002,100001,120009,111001,100002,121002,110003,120003,120004,100005,100009,100006,100007,120005,120006,120007],m=[0,110076,111083,110077,111082,111084,110075,110070,110072,110068,110073,110069,110074,110071,111079,111080,111078,110067,110066,110065,111076,111075,110064,111073,111074,111077,111072,111081,110061,110060,111071,110058,111066,111070,110052,111069,111067,110056,110055,111062,110051,111063,111065,110053,110048,111061,100020,111057,111058,110049,110043,110050,111056,111060,110042,110046,100021,111059,110045,110047,110044,110041,111055,100018,100017,110040,110039,100016,110038,110037,110036,111053,111054,110035,110034,110033,111050,110032,111048,111051,111052,110031,111049,111046,111045,111044,110029,110028,110030,111047,110027,110026,111043,110025,111041,111038,111042,111039,111035,110024,111040,111037,111036,111034,110023,111032,110022,111031,100015,111033,111030,110021,111024,111029,111028,111026,111027,111025,111021,111023,111022,111020,111019,111018,111017,100014,110019,110016,111016,110017,110014,111015,110014,110015,110020,111014,110012,110013,111012,111013,110009,100013,110008,100011,111007,120005,120006,120007,111003,111011,111002,110004,110001,111004,120002,110005,121001,120001,110002,100001,120009,111001,100002,121002,110003,120003,120004,100005,100009,100006,100007,110007];o.FAKE_THEME_BASE_BET_DATA=((l={})[110076]=[100,100],l[111083]=[100,100],l[111084]=[100,100],l[110077]=[100,100],l[110075]=[100,100],l[110073]=[100,100],l[110069]=[100,100],l[110074]=[100,100],l[110071]=[100,100],l[110068]=[100,100],l[111079]=[100,100],l[111080]=[100,100],l[111078]=[100,100],l[110067]=[100,100],l[110065]=[100,100],l[111076]=[100,100],l[111082]=[100,100],l[111075]=[100,100],l[111073]=[100,100],l[111074]=[100,100],l[111077]=[100,100],l[110063]=[100,100],l[111072]=[100,100],l[111081]=[100,100],l[110062]=[100,100],l[110060]=[100,100],l[111071]=[100,100],l[110058]=[100,100],l[110064]=[100,100],l[110061]=[100,100],l[110066]=[100,100],l[110072]=[100,100],l[110070]=[100,100],l[110059]=[100,100],l[110057]=[100,100],l[111066]=[100,100],l[110052]=[100,100],l[111068]=[100,100],l[110056]=[100,100],l[110054]=[100,100],l[111067]=[100,100],l[111062]=[100,100],l[110053]=[100,100],l[110051]=[100,100],l[110055]=[100,100],l[111063]=[100,100],l[111065]=[100,100],l[111069]=[100,100],l[111070]=[100,100],l[111061]=[100,100],l[110048]=[100,100],l[111057]=[100,100],l[110049]=[100,100],l[110043]=[100,100],l[110050]=[100,100],l[111056]=[100,100],l[111060]=[100,100],l[110042]=[100,100],l[110046]=[100,100],l[111059]=[100,100],l[111058]=[100,100],l[110045]=[100,100],l[110047]=[100,100],l[110044]=[100,100],l[110041]=[100,100],l[111055]=[100,100],l[110040]=[100,100],l[110039]=[80,100],l[100016]=[100,100],l[100017]=[100,100],l[100021]=[100,100],l[100020]=[100,100],l[100018]=[100,100],l[110038]=[100,100],l[110037]=[100,100],l[110036]=[100,100],l[111053]=[70,70],l[111054]=[80,100],l[110035]=[100,100],l[110034]=[100,100],l[111052]=[80,100],l[110033]=[12,12],l[111050]=[100,100],l[110032]=[12,12],l[111049]=[90,100],l[111048]=[60,60],l[111051]=[100,100],l[110031]=[100,100],l[111047]=[80,100],l[111046]=[88,88],l[111045]=[100,100],l[111044]=[65,65],l[110029]=[80,100],l[111043]=[50,50],l[110028]=[100,100],l[110030]=[100,100],l[110027]=[80,100],l[110026]=[100,100],l[110025]=[65,75],l[111035]=[70,75],l[111041]=[60,75],l[111038]=[60,75],l[110023]=[40,75],l[111039]=[50,60],l[111040]=[75,100],l[111042]=[60,70],l[110024]=[100,100],l[111037]=[88,100],l[111036]=[60,75],l[111034]=[100,100],l[111032]=[88,100],l[111031]=[100,100],l[110022]=[60,75],l[100015]=[9,9],l[111033]=[88,100],l[111030]=[100,100],l[110021]=[88,100],l[111024]=[75,75],l[111029]=[100,100],l[111028]=[45,75],l[111026]=[88,100],l[111027]=[130,150],l[111019]=[100,100],l[111025]=[88,100],l[110020]=[100,100],l[111021]=[40,50],l[111023]=[88,88],l[111022]=[100,100],l[111020]=[100,100],l[111018]=[88,88],l[111017]=[100,100],l[100014]=[88,100],l[110019]=[88,100],l[110018]=[75,100],l[110016]=[88,100],l[110017]=[50,60],l[110015]=[100,100],l[111016]=[88,100],l[111015]=[88,100],l[111014]=[30,40],l[110014]=[60,75],l[110012]=[30,50],l[110013]=[50,50],l[111012]=[45,75],l[110009]=[50,60],l[100013]=[50,50],l[110008]=[40,50],l[100011]=[50,65],l[111009]=[50,100],l[100010]=[80,100],l[111008]=[45,75],l[111007]=[50,50],l[111010]=[88,88],l[111005]=[88,100],l[110007]=[30,30],l[110010]=[60,80],l[110011]=[80,100],l[110006]=[40,50],l[111002]=[88,100],l[111011]=[88,100],l[111013]=[88,100],l[110004]=[30,30],l[110001]=[88,88],l[111004]=[25,30],l[120002]=[50,50],l[110005]=[25,30],l[121001]=[88,88],l[120001]=[50,50],l[110002]=[10,10],l[100001]=[30,30],l[120009]=[50,50],l[111001]=[88,88],l[100002]=[30,30],l[121002]=[88,88],l[110003]=[75,75],l[120003]=[25,25],l[120004]=[60,60],l[100005]=[9,9],l[100009]=[9,9],l[100006]=[25,25],l[100007]=[20,20],l[120005]=[88,88],l[120006]=[88,88],l[120007]=[88,88],l[111003]=[50,75],l[111006]=[50,50],l),o.RELOAD_BACKEND_THEME_CONFIG_DATA=function(e){if(e.level_bet){var t=!1;window.LEVEL_BET_DATA&&c.default.getBetList()&&c.default.getMaxBet()<c.default.getMinLargeBet()&&(t=!0),window.LEVEL_BET_DATA=s({},e.level_bet),window.GLOBAL_LEVEL_BET=s({},e.level_bet),t&&c.default.getMaxBet()>=c.default.getMinLargeBet()&&u.default.pushEvent(p.EVT.SYSTEM.MAX_BET_EXCEED_MIN_LARGE)}if(e.theme_base_bet&&(window.THEME_BASE_BET_DATA=s({},e.theme_base_bet)),e.slots_config&&(window.SLOTS_CONFIG_DATA=s({},e.slots_config),window.THEME_UNLOCK_DATA={},window.USE_BACKEND_THEME_CONFIG)){d=[0],m=[0];var n=0;for(var i in window.SLOTS_CONFIG_DATA.normal_hall){var a=window.SLOTS_CONFIG_DATA.normal_hall[i],r=Number(a[0])-n,l=Number(a[1]);if(o.THEME_CONFIG_LIST[l]){d[r]=l;var h=Math.floor((r-1)/3)%2==0?1:-1,f=(r-1)%6%3+3*Math.floor((r-1)/6);o.LOBBY_THEME_CONFIG[l].POS_X_IDX=f,o.LOBBY_THEME_CONFIG[l].POS_Y_IDX=h,o.THEME_CONFIG_LIST[l].UNLOCK_LEVEL_NORMAL=Number(a[3]),window.THEME_UNLOCK_DATA[Number(a[3])]=l,o.LOBBY_THEME_CONFIG[l].IS_HOT_RED=1<=Number(i)&&Number(i)<=3,o.LOBBY_THEME_CONFIG[l].IS_NEW=4<=Number(i)&&Number(i)<=6,o.LOBBY_THEME_CONFIG[l].IS_HOT=!1,o.LOBBY_THEME_CONFIG[l].IS_NEW_RED=!1}else n+=1}window.LOBBY_VIEW_X_IDX_MAX=(d.length+1)%6==0&&(d.length+1)/2-1||(d.length+1+6-(d.length+1)%6)/2-1;for(var _=2*(window.LOBBY_VIEW_X_IDX_MAX+1)+1,y=d.length+1;y<=_;y++)o.LOBBY_THEME_CONFIG[y]={},r=y,h=Math.floor((r-1)/3)%2==0?1:-1,f=(r-1)%6%3+3*Math.floor((r-1)/6),o.LOBBY_THEME_CONFIG[r].POS_X_IDX=f,o.LOBBY_THEME_CONFIG[r].POS_Y_IDX=h;for(var i in n=0,window.SLOTS_CONFIG_DATA.club)a=window.SLOTS_CONFIG_DATA.club[i],r=Number(a[0])-n,l=Number(a[1]),o.THEME_CONFIG_LIST[l]?(m[r]=l,h=Math.floor((r-1)/3)%2==0?1:-1,f=(r-1)%6%3+3*Math.floor((r-1)/6),o.LOBBY_THEME_CONFIG[l].POS_X_IDX_2=f,o.LOBBY_THEME_CONFIG[l].POS_Y_IDX_2=h,o.THEME_CONFIG_LIST[l].UNLOCK_LEVEL_CLUB=Number(a[3])):n+=1;window.CLUB_LOBBY_VIEW_X_IDX_MAX=(m.length+1)%6==0&&(m.length+1)/2-1||(m.length+1+6-(m.length+1)%6)/2-1;var g=2*(window.CLUB_LOBBY_VIEW_X_IDX_MAX+1)+1;for(g%6!=0&&(g=g+6-g%6),y=m.length+1;y<=g;y++)o.LOBBY_THEME_CONFIG[y]||(o.LOBBY_THEME_CONFIG[y]={}),r=y,h=Math.floor((r-1)/3)%2==0?1:-1,f=(r-1)%6%3+3*Math.floor((r-1)/6),o.LOBBY_THEME_CONFIG[r].POS_X_IDX_2=f,o.LOBBY_THEME_CONFIG[r].POS_Y_IDX_2=h}},o.PAY_SITUATION={NULL:-1,OTHERS:0,LOGIN_POP:1,SPIN_OUT_OF_COINS_POP:2,USER_CLICK:3,CLOSE_STORE_POP:4,BACK_TO_HALL_POP:5,ACTIVITY_DIALOG_POP:6,ACHIEVE_POP:7,INBOX_POP:8,USERINFO_POP:9,LEVELUP_POP:10,BOOST_TIP_POP:11,BOOST_LEVEL_POP:12,INBOX_COUPON:13,TIME_MACHINE:14,INBOX_REMOVE_AD:15,QUEST_PASS:16},o.RELOAD_BACKEND_QUEST_STAY_BET_CONFIG_DATA=function(e){e.quest_can_bet&&(window.QUEST_STAY_BET_CONFIG_DATA=s({},e.quest_can_bet))},o.RELOAD_BACKEND_QUEST_NEW_USER_BET_CONFIG_DATA=function(e){e.quest_can_bet&&(window.QUEST_NEW_USER_BET_CONFIG_DATA=s({},e.quest_can_bet))},o.IN_QUEST_STAY_THEME_FLAG=!1,o.IN_QUEST_NEW_USER_THEME_FLAG=!1,o.IN_FLAME_THEME_FLAG=!0,o.IN_HERO_WISH_GAME_THEME=!1,o.IS_CM_ATTRIBUTION=!1,o.CLUB_FLAG=void 0,cc._RF.pop()},{"./Base/BetControl":"BetControl","./Base/Common_Base":"Common_Base","./Base/EventCenter":"EventCenter"}],"polyglot.min":[function(e,t,o){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min"),function(e,n){"function"==typeof define&&define.amd?define([],function(){return n(e)}):"object"==typeof o?t.exports=n(e):e.Polyglot=n(e)}(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||s}function o(e){var t,o,n,i={};for(t in e)if(e.hasOwnProperty(t))for(n in o=e[t])i[o[n]]=t;return i}function n(e){return e.replace(/^\s+|\s+$/g,"")}function i(e,t,o){var i;return null!=o&&e?n((i=e.split(p))[r(t,o)]||i[0]):e}function a(e){var t=o(h);return t[e]||t.en}function r(e,t){return u[a(e)](t)}function l(e,t){for(var o in t)"_"!==o&&t.hasOwnProperty(o)&&(e=e.replace(new RegExp("%\\{"+o+"\\}","g"),t[o]));return e}function s(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function c(e){var t={};for(var o in e)t[o]=e[o];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var o;for(var n in e)e.hasOwnProperty(n)&&(o=e[n],t&&(n=t+"."+n),"object"==typeof o?this.extend(o,n):this.phrases[n]=o)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var o,n;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?o=this.phrases[e]:"string"==typeof t._?o=t._:this.allowMissing?o=e:(this.warn('Missing translation for key: "'+e+'"'),n=e),"string"==typeof o&&(t=c(t),n=l(n=i(o,this.currentLocale,t.smart_count),t)),n},t.prototype.has=function(e){return e in this.phrases};var p="||||",u={chinese:function(){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},h={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}]},{},["BetControl","Common_Base","EventCenter","Footer","Header","LabelNumRoll","ThemeControlNew","ThemeNew","ThemeWinNode","Tools","User","UserCoinNode","DataManager","Help","HttpClient","NetTrans","NodeDialog","Popup","ClippingNode","CompoAutoNode","CompoMaxBetButton","CompoSpinButton","CompoSpinNode","Common","CountWinLine","EffectLayer","Enum","GameLayer","Global","GoldTiger","InterludeNode","JackpotLayer","LineAnimator","MapPrizeNode","MapTower","MusicManager","PickNode","PopOut","SpinElement","SpinLayer","SpinReel","SpinTable","SymbolWheel","TipNode","Language","LoadingController","init","Test","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);